---
title: "D√≠a 2 - Manejo de datos con Tidyverse. Programa de doctorado UAH"
author: "Marina Rodes Blanco, Paloma Ruiz Benito, Ver√≥nica Cruz Alonso y Juli√°n Tijerin Trivi√±o"
date: today
date-format: "DD/MM/YYYY"
toc: true
toc-depth: 5
toc-title: "√çndice"
format:
  html:
    link-external-newwindow: true
    # css: styles.css
  gfm: default
editor: visual
editor_options: 
  chunk_output_type: console
number-sections: true
---

## S√≠ntesis del d√≠a 1: Introducci√≥n a R y a R studio (POR TERMINAR)

### Modelo de ciencia de datos

![Modelo de ciencia de datos de Hadley Wickham, Mine √áetinkaya-Rundel y Garrett Grolemund. Traducido de https://r4ds.hadley.nz/intro#fig-ds-diagram](images/datascience.png){#fig-datascience}

### Buenas pr√°cticas en la gesti√≥n de datos

-   Trabajar por proyectos
-   Usar teclas r√°pidas
-   Consultar documentacion / pedir ayuda
-   C√≥digo reproducible
-   Seguir estilo (guia de estilo)

### Tipos de objetos y operaciones b√°sicas en R

-   Vectores
-   Matrices
-   Data frames
-   Listas

#### üß© Ejercicio: *repaso* *del d√≠a anterior*

-   Crea un vector con los meses del a√±o (en n√∫mero) y calcula la media
-   Crea una matriz ... ¬øCual es el elemento de la fila 3 columna 2?
-   Crea una lista .. ¬øQue hay en el tercer elemento de la lista?
-   Crea un data frame con la siguiente informaci√≥n

## Introducci√≥n

### Tidyverse

Conjunto de paquetes de R para ciencia de datos. Todos los paquetes tienen una misma estructura (filosof√≠a, gram√°tica y estructura de datos).

![https://tidyverse.org/](images/tidyverse_packages.png)

Se basa en los siguientes principios:

-   Centrado en humanos: tiene un dise√±o intuitivo que facilita su uso y accesibilidad para el usuario

-   Consistencia: todos los paquetes est√°n dise√±ados para trabajar con datos ordenados (‚ÄúTidy Data‚Äù), y las funciones de los paquetes tienen una nomenclatura com√∫n y congruente. Esto permite que un usuario que aprende sobre una funci√≥n o paquete pueda aplicar ese conocimiento a otros, facilitando as√≠ la tarea de recordar y deducir c√≥digo de manera m√°s sencilla.

-   Componiblidad: permite al usuario resolver problemas complejos dividi√©ndolos en peque√±as partes, que pueden combinarse utilizando el operador ‚Äúpipe‚Äù (%\>% or \|\>).

-   Inclusividad: no se trata s√≥lo de la colecci√≥n de paquetes, sino tambi√©n la comunidad de personas que los usan, bas√°ndose en la ayuda entre usuarios y generando un ambiente inclusivo.

### Datos ordenados o tidy data

![](images/clipboard-2935155425.png)

Est√°ndar para organizar conjuntos de datos donde cada variable es una columna, cada observaci√≥n es una fila y cada tipo de unidad de observaci√≥n es una tabla. Esto facilita el an√°lisis, la manipulaci√≥n y la visualizaci√≥n de datos. Esto lo explican muy bien con una serie de ilustraciones Julia Lowndes y Allison Horst en ["Tidy data for efficiency, reproducibility, and collaboration"](https://openscapes.org/blog/2020-10-12-tidy-data/)

![](images/tidydata_2.png)

Usando este est√°ndar se consigue que todos los set de datos tengan la misma estructura.

![](images/tidydata_3.png)

Que tengan la misma estructura nos permite trabajar con ellos de la misma manera y por tanto reutilizar el c√≥digo.

En resumen, trabajar con tidy data es m√°s eficiente, permite la colaboraci√≥n, la reproducibildiad y la reutilizaci√≥n de c√≥digo.

### Operador "pipe"

-   Permite encadenar varias funciones de tidyverse

-   Dos estilos: %\>% o \|\> (m√°s reciente).

-   Acceso directo: ctrl/command + shift + M

-   La estructura siempre es la misma: set de datos \|\> acci√≥n1 \|\> acci√≥n 2 etc. Estas "acciones" puede ser filtros, selecci√≥n de filas o columnas, operaciones etc.

Para configurar el uso de la versi√≥n \|\> en Rstudio...

![![](images/pipe_config_Rstudio.png){width="672"}]()

### Presentando los set de datos con los que vamos a trabajar:

Vamos a trabajar con datos de Tidytuesday, de las librerias de tidyverse y de un paquete denominado "palmerpenguins". En todos los casos son datos reales.

Tidytuesday es un proyecto comunitario de ciencia de datos impulsado por la comunidad de R, especialmente por usuarios de tidyverse. Cada martes se publica un dataset limpio y listo para analizar, junto con una breve descripci√≥n y enlaces a la fuente original.

![[TidyTuesday](https://github.com/rfordatascience/tidytuesday/)](images/tidyTuesday_logo.png)

De este proyecto vamos a trabajar con dos set de datos diferentes:

+:---------------------------------------------:+:-----------------------------------------------------------------------------------------------------------------------------------------------------:+
| ![](images/recetas1_copilot.png){width="800"} | El dataset de **Cuisine** de TidyTuesday recopila informaci√≥n sobre recetas y tipos de cocina (origen, valor nutricional, tiempo de preparaci√≥n etc.) |
+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

+:------------------------------------------------:+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/pixar_image1_flickr.jpg){width="500"} | El dataset de **Pixar** en TidyTuesday recopila informaci√≥n detallada sobre las pel√≠culas de Pixar, incluyendo variables de producci√≥n, taquilla y cr√≠tica. |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+

Tidyverse tambien tiene sus propios set de datos con los que podemos practicar. Puedes consultarlo con la funci√≥n data(). De los sets de datos de tidyverse vamos a trabajar con msleep

+----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/mammals_sleeping_picture1_copilot.png){width="500"} | El dataset **msleep** contiene informaci√≥n sobre **el sue√±o de distintos** mam√≠feros. Incluye variables biol√≥gicas, ecol√≥gicas y taxon√≥micas, as√≠ como medidas relacionadas con sus patrones de sue√±o |
+----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Por √∫ltimo vamos a trabajar, para el ejercicio final, con los datos de paquete palmerpenguins

+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/palmer_penguins.png){width="500"} | Los datos fueron recopilados y puestos a disposici√≥n por la Dra. Kristen Gorman y la Estaci√≥n Palmer, LTER de la Ant√°rtida, miembro de la Red de Investigaci√≥n Ecol√≥gica a Largo Plazo. |
|                                              |                                                                                                                                                                                         |
|                                              | Datos de pinguinos adultos de tres especies diferentes y de tres islas diferentes e incluye informaci¬¥n sonbre tama√±o y sexo.                                                           |
+----------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## Importar y renombrar datos

### [Read_delim](https://readr.tidyverse.org/reference/read_delim.html): leer datos desde fuera de R

Leer datos que tenemos almacenados, como por ejemplo, una tabla en formato csv.

```{r read}
#| warning: false

library(tidyverse)

recetas <- read_delim(file = "data/cuisines.csv", delim = ",")

recetas <- read_delim(
  file = "data/cuisines.csv",
  delim = ",",
  col_type = list(country = "f", servings="f"),
  # puedo especificar el tipo de dato (country como factor)
  )

recetas


View(recetas)
summary(recetas)
glimpse(recetas)
```

### [Rename](https://dplyr.tidyverse.org/reference/rename.html): cambiar nombres de variables (columnas)

```{r rename}
#| warning: false  

names(recetas)

# Cambio el nombre y a√±ado la unidad de medida (gramos)

recetas_g <- recetas |>
  rename(
    fat_g = fat,
    carbs_g = carbs,
    # nombre nuevo = nombre viejo
    protein_g = protein
  )

```

üìù Ajustar sangr√≠a de c√≥digo: Ctrl + i; Reformatear c√≥digo: Ctrl + Shift + a

## Funciones b√°sicas de filtrado y selecci√≥n

### [Slice](https://dplyr.tidyverse.org/reference/slice.html): filtrar filas seg√∫n el √≠ndice num√©rico

Seleccionar filas concretas del set de datos

```{r slice}
#| warning: false

recetas |> # shortcut para el pipe: CTRL + SHIFT + M
  slice(1) # la primera fila

recetas |>
  slice(1, 5) # la fila 1 y la 5

recetas |> 
  slice(1:6) # de la fila 1 a la 5

recetas |>
  slice(-c(1:5)) # todas las filas excepto de la 1 a la 5

```

### [Arrange](https://dplyr.tidyverse.org/reference/arrange.html): ordenar filas por los valores de una o m√°s variables (columnas)

```{r arrange}
#| warning: false

recetas |>
  arrange(prep_time)

recetas |> 
  arrange(desc(prep_time))

```

### [Filter](https://dplyr.tidyverse.org/reference/filter.html): filtrar filas utilizando condiciones

Se necesita un vector de filtrado que contenga valores l√≥gicos (TRUE/FALSE).

```{r filter}
#| warning: false

recetas |>
  filter(country == "Chilean") # filtrar por filas que cumplen un patr√≥n 
#En este caso, todass las recetas chilenas

recetas |>
  filter(country == "Chilean" & total_time  < 60) # combinar criterios: AND
#En este caso, todas las recetas chilenas que se preparan en menos de 60 minutos

recetas |>
  filter(country == "Chilean" & total_time  < 60) # combinar criterios: OR
#En este caso, todas las recetas chilenas (independientemente del tiempo de preparaci√≥n) o bien aquellas recetas que se preparen en menos de 60mins (independientemente del pa√≠s)

recetas |>
  filter(country %in% c("Chilean", "Brazilian", "Peruvian")) # combinar criterios: %in% 

#En este caso, todas las recetas de pa√≠ses del cono sur. Es equivalente a:

recetas |>
  filter(country == "Chilean" | country == "Brazilian"| country == "Peruvian")


```

#### üß© *Ejercicio: slice(), filter(), arrange()*

+----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/mammals_sleeping_picture1_copilot.png){width="950"} | -   Lee el data.frame "msleep.csv". Pista: el delimitador entre datos es la coma (",").                                                                                                             |
|                                                                |                                                                                                                                                                                                     |
|                                                                | -   Crea un subset que NO contenga los animales dom√©sticos (campo conservation). ¬øCuantas son?                                                                                                      |
|                                                                |                                                                                                                                                                                                     |
|                                                                | -   Crea un subset de datos que contenga las filas de la 1 a la 5 y de la 18 a la 20, sobre esos datos obten los animales carn√≠voros. Ordena seg√∫n las horas de sue√±o ¬øQu√© animal duerme m√°s horas? |
+----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

### [Select](https://dplyr.tidyverse.org/reference/select.html): sirve para seleccionar columnas utilizando condiciones

Para ver como funciona esta funci√≥n vamos a usar un set de datos sobre el sue√±o de los mam√≠feros. Se llama "msleep" y viene en librer√≠a de tidyverse. Puedes encontrar mas informaci√≥n sobre este set de datos en ?msleep

```{r select}
#| warning: false

names(recetas)

# ?select

recetas |> 
  select(name, calories, fat, carbs, protein) #solo nos interesan las columnas con informacion nutricional de cada receta

recetas |> 
  select(name, calories, fat, carbs, protein)

# Se puede usar un patron de texto pra seleccionar colmnas
recetas |>
  select(ends_with("time")) # solo nos interesan las columnas relacionadas con el tiempo

# se pueden utilizar todo tipo de patrones de texto: https://rstudio.github.io/cheatsheets/strings.pdf

recetas |>
  select(name,author, everything()) # se puede usar para reordenar variables

recetas |>
  select(recipes_name=name, country, author, reviews) # y para renombrarlas a la vez que hacemos la seleccion

```

#### üß© *Ejercicio: select()*

+---------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/mammals_sleeping_picture2_copilot.png) | -   Con el data set de msleep, crea un nuevo data.frame que contenga las variables relacionadas con el sue√±o.                           |
|                                                   |                                                                                                                                         |
|                                                   | -   Crea un nuevo objeto con el orden, g√©nero y nombre al principio y que incluya todas las dem√°s columnas excepto el tiempo despierto. |
|                                                   |                                                                                                                                         |
|                                                   | -   (extra) ¬øQue animal del orden Carnivora en estado vulnerable (conservation = vu) duerme m√°s?                                        |
+---------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+

## Transformar los datos y calcular nuevas variables

### [Mutate](https://dplyr.tidyverse.org/reference/mutate.html): crear, modificar o eliminar columnas

```{r mutate}
#| warning: false

# definir una variable 

recetas |>
  mutate(
    # desde cero
    ID = 1:nrow(recetas),
    
    # utilizando una variable para calcular otra (ej.- el numero de personas que       han dejado una puntuaci√≥n pero no han escrito un review)
    num_ratings_no_review = total_ratings - reviews) |>
  
  select(
    ID, 
    name:date_published, 
    total_ratings,
    reviews,
    num_ratings_no_review,
    everything()
  )

# sobreescribir una variable.
recetas |>
  mutate(
    
    # fct_recode sirve para redefinir los niveles de un factor (ojo sintaxis:          new_name="old_name")
    servings = fct_recode(
      servings,
      una_persona = "1" ,
      dos_personas = "2",
      tres_personas = "3" 
      ))

#utilizar mas de una variable para generar otra
recetas |>
  mutate(
    classification = case_when(
      # utilizar varias variables para calcular otra nueva
      avg_rating > 4 &
        country %in% c(
          "Chilean",
          "Brazilian",
          "Peruvian",
          "Cuban",
          "Puerto Rican",
          "Colombian"
        )  ~ "highest‚Äërated_Latin_cuisine",
      
      avg_rating < 2 &
        country %in% c(
          "Chilean",
          "Brazilian",
          "Peruvian",
          "Cuban",
          "Puerto Rican",
          "Colombian"
        )  ~ "lowest‚Äërated_Latin_cuisine",
      
      TRUE ~ "others" #resto de casos
    )
  )

# Podemos hacer todo lo anterior concatenando todo el proceso y guardar el set de datos:

recetas_modif <- recetas |>
  mutate(
    ID = 1:nrow(recetas),
    
    num_ratings_no_review = total_ratings - reviews,
    
    servings = fct_recode(
      servings,
      una_persona = "1" ,
      dos_personas = "2",
      tres_personas = "3"),
    
    classification = case_when(
      # utilizar varias variables para calcular otra nueva
      avg_rating > 4 &
        country %in% c(
          "Chilean",
          "Brazilian",
          "Peruvian",
          "Cuban",
          "Puerto Rican",
          "Colombian")  ~ "highest‚Äërated_Latin_cuisine",
      
      avg_rating < 2 &
        country %in% c(
          "Chilean",
          "Brazilian",
          "Peruvian",
          "Cuban",
          "Puerto Rican",
          "Colombian")  ~ "lowest‚Äërated_Latin_cuisine",
      
      TRUE ~ "others" #resto de casos
    )
  )

```

#### üß© *Ejercicio: mutate()*

+----------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/mammals_sleeping_picture3_copilot.png){width="222"} | -   Con el data set de msleep, incluye una nueva columna con el porcentaje de horas que duerme cada animal al d√≠a                                                                                                                                                                                                   |
|                                                                |                                                                                                                                                                                                                                                                                                                     |
|                                                                | -   Haz una clasificaci√≥n que incluya tres categor√≠as: carnivoros amenazados, herviboros amenazados y otros. Para ello tienes que basarte en las columnas "vore" y "conservation". Segun la UICN se considera amenazado cuando est√° en las categor√≠as vulnerable (vu), endangered (en) o critically endangered (cr) |
+----------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

: [Summarise](https://dplyr.tidyverse.org/reference/summarise.html) y [group by](https://dplyr.tidyverse.org/reference/group_by.html): generar un nuevo `data.frame` resumiendo cada grupo a una fila

```{r summarise}
#| warning: false

# m√≠nimo y m√°ximo tiempo de preparaci√≥n
recetas |> 
  summarise(prep_time_max = max(prep_time),
            prep_time_total_min = min(prep_time))

# minimo, m√°ximo y media de prote√≠nas de todas las recetas
recetas |> 
  summarise(protein_max = max(protein),
            protein_mean = mean(protein),
            protein_min = min(prep_time))

 ## Ojo! si no queremos que tenga en cuenta los NA hay que a√±adir argumento na.rm=T
recetas |> 
  summarise(protein_max = max(protein, na.rm=T),
            protein_mean = mean(protein, na.rm=T),
            protein_min = min(prep_time, na.rm=T))
```

```{r group_by}
#| warning: false

#Lo mismo que antes, pero por pa√≠s
recetas |> 
  group_by(country) |>
  summarise(protein_max = max(protein, na.rm=T),
            protein_mean = mean(protein, na.rm=T),
            protein_min = min(prep_time, na.rm=T))

```

#### üß© *Ejercicio: group_by(), summrise()*

+--------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![]()![](images/mammals_sleeping_picture4_copilot.png) | -   Con el data set de msleep, cuenta el n√∫mero de especies estudiadas por orden (order)                                                                          |
|                                                        |                                                                                                                                                                   |
|                                                        | -   Calcula el promedio de horas de sue√±o seg√∫n el tipo de alimentaci√≥n ¬øduemen mas los carnivoros, los herb√≠voros o los insect√≠voros estudiados en este dataset? |
+--------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------+

### [Pivot](https://tidyr.tidyverse.org/reference/pivot_longer.html): transformar datos a formato largo o ancho

Nos permite transformar datos de formato largo a ancho y viceversa. Nos puede convenir una forma u otra seg√∫n lo que queramos hacer con lo datos: presentarlos en una tabla, hacer transformaciones o an√°lisis, hacer un gr√°fico etc.

En la siguiente imagen, extra√≠da de [The Epidemiologist R Handbook](https://www.epirhandbook.com/en/) se puede ver en qu√© consiste esta transformaci√≥n.

![Pivot data transformation](images/pivot_longer_epirhandbook.png){fig-align="center" width="555"}

```{r pivot}
#| warning: false

recetas_Vietnam<- recetas |>  select(name, country, fat, carbs,protein) |>  filter(country=="Vietnamese")

# transformamos a formato largo, incluyendo los valores de grasas, carbohidratos y proteinas en una columna llamada "nutritional_value

recetas_Vietnam_long <- recetas_Vietnam |> 
  pivot_longer(cols=fat:protein, names_to="nutritional_value")

#volvemos al set original

recetas_Vietnam_wide<- recetas_Vietnam_long |> 
  pivot_wider(names_from=nutritional_value, values_from=value)

```

#### üß© *Ejercicio: transformar datos largo ancho*

+--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ![](images/pixar_image2_flickr.jpg){width="231"} | -   Lee el set de datos pixar_public_response_long. En este set de datos se encuentra la puntuaci√≥n de pel√≠culas pixar por la audiencia seg√∫n tres webs diferentes: rotten tomatoes, metacritic y critics' choice. |
|                                                  |                                                                                                                                                                                                                    |
|                                                  | -   Reorganiza el set de datos para que la puntuaci√≥n de cada una de las webs se encuentre en una columna diferente                                                                                                |
|                                                  |                                                                                                                                                                                                                    |
|                                                  | -   (extra) ¬øCual es el promedio de puntuaci√≥n por pel√≠cula teniendo en cuenta todas las fuentes? ¬øQue pel√≠cula es la mejor y peor puntuada de media?                                                              |
+--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Fuente: <https://www.flickr.com/photos/harshlight/17294952412> (CC BY 2.0)

## Unir data.frames

[Joins](https://dplyr.tidyverse.org/reference/mutate-joins.html)

`*_join()` a√±ade columnas de `y` (segundo data.frame) a `x` (primer data.frame), haciendo coincidir las observaciones en funci√≥n de la variable com√∫n.

![](images/joins_from_dataWrangling_RStudio_cheatsheet.png){width="559"}

```{r joins}
#| warning: false

# join: left, right, full, inner

#datos de pais - capital- continente
paises <- tibble(
  pais = c("Espa√±a", "Francia", "Jap√≥n", "Brasil", "Sud√°frica"),
  capital = c("Madrid", "Par√≠s", "Tokio", "Brasilia", "Pretoria"),
  continente = c("Europa", "Europa", "Asia", "Am√©rica", "√Åfrica")
)

#datos demogr√°ficos
demografia <- tibble(
  pais = c("Espa√±a", "Jap√≥n", "Brasil", "Canad√°", "Sud√°frica"),
  poblacion_millones = c(47.4, 125.7, 203.1, 39.6, 60.0),
  extension_km2 = c(505990, 377975, 8515767, 9984670, 1221037)
)

#left join: se une al set de datos de pais los datos de demografia (si los hay)
left_join(paises, demografia, by="pais")

#right join: se une al set de datos de demografa los datos de pais (si los hay)
right_join(paises, demografia, by="pais")

#inner join: une los paises presentes en los dos set de datos
inner_join(paises, demografia, by="pais")

#full join: une todos los paises presentes en uno u otro.
paises_demo_full_join<-full_join(paises, demografia, by="pais")
```

## Guardar datos

[Write_delim](https://readr.tidyverse.org/reference/write_delim.html):

```{r export}
#| warning: false

write_delim(paises_demo_full_join, file = "paises_demo_full_join.csv", delim = ";")
# en file hay que especificar el directorio donde queremos que se guarde. Si no, se guardar√° en el directorio de trabajo (getwd())
```

#### üß© *Ejercicio: \*\_join() y exportar datos*

+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------+
| [![Fuente](images/pixar_image3_flickr.jpg){width="293"}](https://www.flickr.com/photos/harshlight/6988729286) | -   Lee el set de datos pixar_public_response y pixar_films                                                                     |
|                                                                                                               |                                                                                                                                 |
|                                                                                                               | -   Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()                        |
|                                                                                                               |                                                                                                                                 |
|                                                                                                               | -   une ambos datasets en uno solo para tener en un mismo data frame toda la informaci√≥n. Elige el campo m√°s apropiado de uni√≥n |
|                                                                                                               |                                                                                                                                 |
|                                                                                                               | -   Guarda el nuevo set de datos como pixar_joint                                                                               |
+---------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------+

Fuente imagen: <https://www.flickr.com/photos/harshlight/6988729286> (CC BY 2.0)

## üß© *Ejercicio final*

Queremos estudiar caracter√≠sticas f√≠sicas de los ping√ºinos y relacionarlas con el tipo de isla donde viven. Para ello, realiza las siguientes tareas utilizando exclusivamente funciones del tidyverse:

üêß Instala el paquete penguins y c√°rgalo

üêß Crea un data frame con dos columnas, la primera denominada "islands_info" con los valores "Torgersen", "Biscoe", "Dream" y otra llamada "protected_area" con los valores "Si", "No", "Si"

üêßSelecciona los pinguinos que tengan picos de m√°s de 40mm (bill_len) y que pesen menos de 4.5kg (recuerda que puedes ver m√°s informaci√≥n de tu dataset en ?penguins)

üêßDe los datos filtrados conserva √∫nicamente las columnas species, island, bill_length, bill_depth y body_mass

üêßA√±ade una columna llamada bill_ratio que calcule la relaci√≥n entre longitud y profundidad del pico

üêßUne el resultado con el dataset islands \_info, de forma que cada ping√ºino quede asociado a si su isla es un √°rea protegida.

üêßCrea una columna categoria_peso con valores "ligero", "medio", "pesado"seg√∫n los umbrales que quieras o, m√°s dificil, con terciles de body_mass.

üêßCuenta cuantos individuos hay ligeros, medios y pesados en zonas protegidas vs zonas no protegidas

üêß(EXTRA) Responde a las siguientes preguntas:

üêß¬øCual es la m√°xima relaci√≥n entre longitud y profundidad del pico de los individuos en zonas protegidas? ¬øy no protegidas? ¬øCuanto pesa el individuo m√°s pesado?

## Enlaces de inter√©s

-   [Hands-On Programming with R](https://rstudio-education.github.io/hopr/)

-   [R for data Science (Data transformation)](https://r4ds.had.co.nz/transform.html)

-   [Style guide](http://adv-r.had.co.nz/Style.html)

-   [P√°gina web de *tidyverse*](https://www.tidyverse.org)

-   [Cheat sheet the dplyr](https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf)

-   [Quince consejos para mejorar nuestro c√≥digo y flujo de trabajo con R](https://www.revistaecosistemas.net/index.php/ecosistemas/article/view/2129)

------------------------------------------------------------------------

<details>

<summary>Session Info</summary>

```{r session_info}
Sys.time()
sessionInfo()
```

</details>
