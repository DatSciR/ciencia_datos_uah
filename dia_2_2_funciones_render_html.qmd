---
title: "D√≠a 2 - Manejo de datos con Tidyverse. Programa de doctorado UAH"
author: "Marina Rodes Blanco, Paloma Ruiz Benito, Ver√≥nica Cruz Alonso y Juli√°n Tijerin Trivi√±o"
date: today
date-format: "DD/MM/YYYY"
toc: true
toc-depth: 5
toc-title: "√çndice"
format:
  html:
    link-external-newwindow: true
    # css: styles.css
  gfm: default
editor: visual
editor_options: 
  chunk_output_type: console
number-sections: true
---

## Introducci√≥n a la programaci√≥n con funciones

### ¬øQu√© es una funcion?

Una caracter√≠stica clave de R son las funciones. Las funciones son una serie de intruccciones agrupadas para lograr un resultado espec√≠fico. M√°s concretamente, son m√≥dulos de c√≥digo ‚Äòautocontenidos‚Äô que realizan una tarea espec√≠fica. Normalmente reciben alg√∫n tipo de estructura de datos (valor, vector, data frame, etc.), la procesan y devuelven un resultado.

El uso general de una funci√≥n consiste en escribir el nombre de la funci√≥n seguido de par√©ntesis.

```{r ejemplo funcion}
library(tidyverse)

```

**Los valores de entrada se llaman argumentos, y pueden incluir:**

-   **El objeto f√≠sico** (cualquier estructura de datos) sobre el cual la funci√≥n realiza una tarea.

-    **Especificaciones** que modifican el modo en que la funci√≥n opera (por ejemplo, opciones o par√°metros).

```{r}
recetas<-read_delim(file="data/cuisines.csv", # argumento "file" 
                    sep=",")                  # argumento "delim"

```

Cuando consultamos la ayuda de R lo que consultamos es cuales son los argumentos de la funcion.

#### üß© Ejercicio: 

Consulta la ayuda de la funci√≥n matrix. ¬øCuantos argumentos tiene?. Genera una matriz con esta funcion usando todos los argumentos.

Adem√°s de las funciones que nos ofrece R en los diferentes paquetes, tambi√©n podeos realizar nuestras propias funciones:

```{r ejemplo funcion}

# Estandarizar (media 0 y desv tipica 1) las calorias, grasas carbohidratos y prote√≠nas

recetas_Z <- recetas |> 
  mutate(calories_Z = (calories - mean(calories, na.rm=T))/sd(calories, na.rm=T),
         fat_Z = (fat - mean(fat, na.rm=T))/sd(fat, na.rm=T),
         carbs_Z = (carbs - mean(carbs, na.rm=T))/sd(carbs, na.rm=T),
         protein_z = (protein - mean(protein, na.rm=T))/sd(protein, na.rm=T))

# funci√≥n que estandariza
estandarizar_variable <- function(x) {
  (x - mean(x, na.rm = TRUE)) / sd(x, na.rm = TRUE)
}

recetas_Z <- recetas |> 
  mutate(calories_Z = estandarizar_variable(calories),
         fat_Z = estandarizar_variable(fat),
         carbs_Z = estandarizar_variable(carbs),
         protein_z = estandarizar_variable(protein))

```

### ¬øPor que usar funciones?

-   **Reutilizaci√≥n de c√≥digo:** Las funciones permiten encapsular pasos repetidos en una √∫nica unidad que puedes llamar muchas veces, reduciendo duplicaci√≥n y errores.

-   **Abstracci√≥n y claridad:** Al ocultar detalles de implementaci√≥n dentro de una funci√≥n, el flujo principal del script queda m√°s limpio y f√°cil de entender.

-   **Modularidad y mantenimiento:** Dividir el trabajo en funciones peque√±as facilita probar, depurar y actualizar partes concretas sin afectar el resto del c√≥digo.

-   **Par√°metros y flexibilidad:** Los **argumentos** permiten adaptar el comportamiento de una funci√≥n sin cambiar su c√≥digo interno, lo que favorece la generalizaci√≥n y la experimentaci√≥n.

-   **Composici√≥n y reutilizaci√≥n avanzada:** Las funciones pueden combinarse (una funci√≥n llama a otra), lo que facilita construir pipelines y procesos complejos a partir de bloques simples.

-   **Compatibilidad con ecosistema R:** Muchas librer√≠as y herramientas en R esperan o devuelven funciones; escribir funciones propias facilita integrarlas con `apply`, `purrr`, `dplyr`, `knitr` y otras herramientas del ecosistema.

### ¬øCuando hay que usar funciones?

Se recomienda seguir el principio "do not repeat yourself" ([DRY principle](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself#:~:text=%22Don't%20repeat%20yourself%22,redundancy%20in%20the%20first%20place.)): cada unidad de conocimiento o informaci√≥n debe tener una representaci√≥n √∫nica, inequ√≠voca y autoritativa en un sistema.

Escribir una funci√≥n ya merece la pena cuando has copiado y pegado m√°s de dos veces lo mismo (don't be WET! - Write Everything Twice). Cuantas m√°s veces est√© repetido un c√≥digo, en m√°s sitios necesitar√°s actualizarlo si hay algun cambio y m√°s aumenta la probabilidad de error.

### Tipos de funciones

## C√≥mo escribir una funci√≥n

### Componentes de una funcion

## Iteraciones (for, while)

## Purr

### 

------------------------------------------------------------------------

<details>

<summary>Session Info</summary>

```{r session_info}
Sys.time()
sessionInfo()
```

</details>
