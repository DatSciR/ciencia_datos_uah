<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marina Rodes Blanco, JuliÃ¡n Tijerin TriviÃ±o, Paloma Ruiz Benito y VerÃ³nica Cruz Alonso,">

<title>DÃ­a 2 - Manejo y visualizaciÃ³n de datos en R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="dia_2_manejo_datos_funciones_files/libs/clipboard/clipboard.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/popper.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/anchor.min.js"></script>
<link href="dia_2_manejo_datos_funciones_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dia_2_manejo_datos_funciones_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Ãndice</h2>
   
  <ul>
  <li><a href="#sÃ­ntesis-del-dÃ­a-1-introducciÃ³n-a-r-y-a-r-studio" id="toc-sÃ­ntesis-del-dÃ­a-1-introducciÃ³n-a-r-y-a-r-studio" class="nav-link active" data-scroll-target="#sÃ­ntesis-del-dÃ­a-1-introducciÃ³n-a-r-y-a-r-studio"><span class="header-section-number">1</span> SÃ­ntesis del dÃ­a 1: IntroducciÃ³n a R y a R studio</a>
  <ul>
  <li><a href="#modelo-de-ciencia-de-datos" id="toc-modelo-de-ciencia-de-datos" class="nav-link" data-scroll-target="#modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</a></li>
  <li><a href="#concepto-bÃ¡sicos" id="toc-concepto-bÃ¡sicos" class="nav-link" data-scroll-target="#concepto-bÃ¡sicos"><span class="header-section-number">1.2</span> Concepto bÃ¡sicos</a></li>
  <li><a href="#buenas-prÃ¡cticas-en-la-gestiÃ³n-de-datos" id="toc-buenas-prÃ¡cticas-en-la-gestiÃ³n-de-datos" class="nav-link" data-scroll-target="#buenas-prÃ¡cticas-en-la-gestiÃ³n-de-datos"><span class="header-section-number">1.3</span> Buenas prÃ¡cticas en la gestiÃ³n de datos</a></li>
  <li><a href="#tipos-de-objetos-y-operaciones-bÃ¡sicas-en-r" id="toc-tipos-de-objetos-y-operaciones-bÃ¡sicas-en-r" class="nav-link" data-scroll-target="#tipos-de-objetos-y-operaciones-bÃ¡sicas-en-r"><span class="header-section-number">1.4</span> Tipos de objetos y operaciones bÃ¡sicas en R</a></li>
  <li><a href="#quÃ©-son-los-datos-ordenados" id="toc-quÃ©-son-los-datos-ordenados" class="nav-link" data-scroll-target="#quÃ©-son-los-datos-ordenados"><span class="header-section-number">1.5</span> Â¿QuÃ© son los datos ordenados?</a></li>
  <li><a href="#quÃ©-es-tidyverse" id="toc-quÃ©-es-tidyverse" class="nav-link" data-scroll-target="#quÃ©-es-tidyverse"><span class="header-section-number">1.6</span> Â¿QuÃ© es tidyverse?</a>
  <ul>
  <li><a href="#ejercicio-repaso-del-dÃ­a-anterior" id="toc-ejercicio-repaso-del-dÃ­a-anterior" class="nav-link" data-scroll-target="#ejercicio-repaso-del-dÃ­a-anterior"><span class="header-section-number">1.6.1</span> ğŸ§© Ejercicio: <em>repaso</em> <em>del dÃ­a anterior</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#introducciÃ³n" id="toc-introducciÃ³n" class="nav-link" data-scroll-target="#introducciÃ³n"><span class="header-section-number">2</span> IntroducciÃ³n</a>
  <ul>
  <li><a href="#objetivos-de-la-sesiÃ³n" id="toc-objetivos-de-la-sesiÃ³n" class="nav-link" data-scroll-target="#objetivos-de-la-sesiÃ³n"><span class="header-section-number">2.1</span> Objetivos de la sesiÃ³n</a></li>
  <li><a href="#set-de-datos-con-los-que-vamos-a-trabajar" id="toc-set-de-datos-con-los-que-vamos-a-trabajar" class="nav-link" data-scroll-target="#set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.2</span> Set de datos con los que vamos a trabajar</a></li>
  </ul></li>
  <li><a href="#manejo-y-gestiÃ³n-de-datos" id="toc-manejo-y-gestiÃ³n-de-datos" class="nav-link" data-scroll-target="#manejo-y-gestiÃ³n-de-datos"><span class="header-section-number">3</span> Manejo y gestiÃ³n de datos</a>
  <ul>
  <li><a href="#resumen-de-funciones" id="toc-resumen-de-funciones" class="nav-link" data-scroll-target="#resumen-de-funciones"><span class="header-section-number">3.1</span> Resumen de funciones</a></li>
  <li><a href="#importar-y-renombrar-datos" id="toc-importar-y-renombrar-datos" class="nav-link" data-scroll-target="#importar-y-renombrar-datos"><span class="header-section-number">3.2</span> Importar y renombrar datos</a>
  <ul>
  <li><a href="#read_delim-leer-datos-desde-fuera-de-r" id="toc-read_delim-leer-datos-desde-fuera-de-r" class="nav-link" data-scroll-target="#read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.2.1</span> Read_delim: leer datos desde fuera de R</a></li>
  <li><a href="#rename-cambiar-nombres-de-variables-columnas" id="toc-rename-cambiar-nombres-de-variables-columnas" class="nav-link" data-scroll-target="#rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2.2</span> Rename: cambiar nombres de variables (columnas)</a></li>
  </ul></li>
  <li><a href="#funciones-bÃ¡sicas-de-filtrado-y-selecciÃ³n" id="toc-funciones-bÃ¡sicas-de-filtrado-y-selecciÃ³n" class="nav-link" data-scroll-target="#funciones-bÃ¡sicas-de-filtrado-y-selecciÃ³n"><span class="header-section-number">3.3</span> Funciones bÃ¡sicas de filtrado y selecciÃ³n</a>
  <ul>
  <li><a href="#slice-filtrar-filas-segÃºn-el-Ã­ndice-numÃ©rico" id="toc-slice-filtrar-filas-segÃºn-el-Ã­ndice-numÃ©rico" class="nav-link" data-scroll-target="#slice-filtrar-filas-segÃºn-el-Ã­ndice-numÃ©rico"><span class="header-section-number">3.3.1</span> Slice: filtrar filas segÃºn el Ã­ndice numÃ©rico</a></li>
  <li><a href="#filter-filtrar-filas-utilizando-condiciones" id="toc-filter-filtrar-filas-utilizando-condiciones" class="nav-link" data-scroll-target="#filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">3.3.2</span> Filter: filtrar filas utilizando condiciones</a>
  <ul class="collapse">
  <li><a href="#ejercicio-slice-filter-arrange" id="toc-ejercicio-slice-filter-arrange" class="nav-link" data-scroll-target="#ejercicio-slice-filter-arrange"><span class="header-section-number">3.3.2.1</span> ğŸ§© <em>Ejercicio: slice(), filter(), arrange()</em></a></li>
  </ul></li>
  <li><a href="#select-sirve-para-seleccionar-columnas-utilizando-condiciones" id="toc-select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="nav-link" data-scroll-target="#select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">3.3.3</span> Select: sirve para seleccionar columnas utilizando condiciones</a>
  <ul class="collapse">
  <li><a href="#ejercicio-select" id="toc-ejercicio-select" class="nav-link" data-scroll-target="#ejercicio-select"><span class="header-section-number">3.3.3.1</span> ğŸ§© <em>Ejercicio: select()</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#transformar-los-datos-y-calcular-nuevas-variables" id="toc-transformar-los-datos-y-calcular-nuevas-variables" class="nav-link" data-scroll-target="#transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">3.4</span> Transformar los datos y calcular nuevas variables</a>
  <ul>
  <li><a href="#mutate-crear-modificar-o-eliminar-columnas" id="toc-mutate-crear-modificar-o-eliminar-columnas" class="nav-link" data-scroll-target="#mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">3.4.1</span> Mutate: crear, modificar o eliminar columnas</a>
  <ul class="collapse">
  <li><a href="#ejercicio-mutate" id="toc-ejercicio-mutate" class="nav-link" data-scroll-target="#ejercicio-mutate"><span class="header-section-number">3.4.1.1</span> ğŸ§© <em>Ejercicio: mutate()</em></a></li>
  </ul></li>
  <li><a href="#summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" id="toc-summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" class="nav-link" data-scroll-target="#summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila"><span class="header-section-number">3.4.2</span> Summarise y group by: generar un nuevo <code>data.frame</code> resumiendo cada grupo a una fila</a>
  <ul class="collapse">
  <li><a href="#ejercicio-group_by-summrise" id="toc-ejercicio-group_by-summrise" class="nav-link" data-scroll-target="#ejercicio-group_by-summrise"><span class="header-section-number">3.4.2.1</span> ğŸ§© <em>Ejercicio: group_by(), summrise()</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#pivot-transformar-datos-a-formato-largo-o-ancho" id="toc-pivot-transformar-datos-a-formato-largo-o-ancho" class="nav-link" data-scroll-target="#pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">3.5</span> Pivot: transformar datos a formato largo o ancho</a>
  <ul>
  <li><a href="#ejercicio-transformar-datos-largo-ancho" id="toc-ejercicio-transformar-datos-largo-ancho" class="nav-link" data-scroll-target="#ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">3.5.1</span> ğŸ§© <em>Ejercicio: transformar datos largo ancho</em></a></li>
  </ul></li>
  <li><a href="#unir-data.frames-joins" id="toc-unir-data.frames-joins" class="nav-link" data-scroll-target="#unir-data.frames-joins"><span class="header-section-number">3.6</span> Unir data.frames: joins</a></li>
  <li><a href="#guardar-datos-con-write_delim" id="toc-guardar-datos-con-write_delim" class="nav-link" data-scroll-target="#guardar-datos-con-write_delim"><span class="header-section-number">3.7</span> Guardar datos con Write_delim:</a>
  <ul>
  <li><a href="#ejercicio-_join-y-exportar-datos" id="toc-ejercicio-_join-y-exportar-datos" class="nav-link" data-scroll-target="#ejercicio-_join-y-exportar-datos"><span class="header-section-number">3.7.1</span> ğŸ§© <em>Ejercicio: *_join() y exportar datos</em></a></li>
  </ul></li>
  <li><a href="#ejercicio-final-manejo-de-datos" id="toc-ejercicio-final-manejo-de-datos" class="nav-link" data-scroll-target="#ejercicio-final-manejo-de-datos"><span class="header-section-number">3.8</span> ğŸ§© <em>Ejercicio final manejo de datos</em></a></li>
  </ul></li>
  <li><a href="#introducciÃ³n-a-la-programaciÃ³n-con-funciones" id="toc-introducciÃ³n-a-la-programaciÃ³n-con-funciones" class="nav-link" data-scroll-target="#introducciÃ³n-a-la-programaciÃ³n-con-funciones"><span class="header-section-number">4</span> IntroducciÃ³n a la programaciÃ³n con funciones</a>
  <ul>
  <li><a href="#quÃ©-es-una-funcion" id="toc-quÃ©-es-una-funcion" class="nav-link" data-scroll-target="#quÃ©-es-una-funcion"><span class="header-section-number">4.1</span> Â¿QuÃ© es una funcion?</a>
  <ul>
  <li><a href="#ejercicio-consultar-la-funciÃ³n-matrix" id="toc-ejercicio-consultar-la-funciÃ³n-matrix" class="nav-link" data-scroll-target="#ejercicio-consultar-la-funciÃ³n-matrix"><span class="header-section-number">4.1.1</span> ğŸ§© Ejercicio: consultar la funciÃ³n matrix()</a></li>
  </ul></li>
  <li><a href="#funciones-definidas-por-el-usuario-para-quÃ©" id="toc-funciones-definidas-por-el-usuario-para-quÃ©" class="nav-link" data-scroll-target="#funciones-definidas-por-el-usuario-para-quÃ©"><span class="header-section-number">4.2</span> Funciones definidas por el usuario Â¿Para quÃ©?</a></li>
  <li><a href="#cuando-hay-que-usar-funciones" id="toc-cuando-hay-que-usar-funciones" class="nav-link" data-scroll-target="#cuando-hay-que-usar-funciones"><span class="header-section-number">4.3</span> Â¿Cuando hay que usar funciones?</a></li>
  <li><a href="#tipos-de-funciones" id="toc-tipos-de-funciones" class="nav-link" data-scroll-target="#tipos-de-funciones"><span class="header-section-number">4.4</span> Tipos de funciones</a></li>
  <li><a href="#cÃ³mo-escribir-una-funciÃ³n" id="toc-cÃ³mo-escribir-una-funciÃ³n" class="nav-link" data-scroll-target="#cÃ³mo-escribir-una-funciÃ³n"><span class="header-section-number">4.5</span> CÃ³mo escribir una funciÃ³n</a>
  <ul>
  <li><a href="#ejercicio-consultar-la-funciÃ³n-sort" id="toc-ejercicio-consultar-la-funciÃ³n-sort" class="nav-link" data-scroll-target="#ejercicio-consultar-la-funciÃ³n-sort"><span class="header-section-number">4.5.1</span> ğŸ§© Ejercicio: consultar la funciÃ³n sort()</a></li>
  <li><a href="#ejercicio-primera-funciÃ³n" id="toc-ejercicio-primera-funciÃ³n" class="nav-link" data-scroll-target="#ejercicio-primera-funciÃ³n"><span class="header-section-number">4.5.2</span> ğŸ§© Ejercicio: primera funciÃ³n</a></li>
  <li><a href="#ejercicio-funcion-de-media-aritmÃ©tica" id="toc-ejercicio-funcion-de-media-aritmÃ©tica" class="nav-link" data-scroll-target="#ejercicio-funcion-de-media-aritmÃ©tica"><span class="header-section-number">4.5.3</span> ğŸ§© Ejercicio: funcion de media aritmÃ©tica</a></li>
  </ul></li>
  <li><a href="#iteraciones-con-bucles-for" id="toc-iteraciones-con-bucles-for" class="nav-link" data-scroll-target="#iteraciones-con-bucles-for"><span class="header-section-number">4.6</span> Iteraciones con bucles for</a>
  <ul>
  <li><a href="#ejercicio-creando-bucles-for" id="toc-ejercicio-creando-bucles-for" class="nav-link" data-scroll-target="#ejercicio-creando-bucles-for"><span class="header-section-number">4.6.1</span> ğŸ§© Ejercicio: creando bucles for</a></li>
  </ul></li>
  <li><a href="#iteraciones-con-funcionales" id="toc-iteraciones-con-funcionales" class="nav-link" data-scroll-target="#iteraciones-con-funcionales"><span class="header-section-number">4.7</span> Iteraciones con funcionales</a>
  <ul>
  <li><a href="#ejercicio-map" id="toc-ejercicio-map" class="nav-link" data-scroll-target="#ejercicio-map"><span class="header-section-number">4.7.1</span> ğŸ§© Ejercicio: map()</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#para-seguir-practicando" id="toc-para-seguir-practicando" class="nav-link" data-scroll-target="#para-seguir-practicando"><span class="header-section-number">5</span> ğŸ§© <em>Para seguir practicandoâ€¦</em></a></li>
  <li><a href="#enlaces-de-interÃ©s" id="toc-enlaces-de-interÃ©s" class="nav-link" data-scroll-target="#enlaces-de-interÃ©s"><span class="header-section-number">6</span> Enlaces de interÃ©s</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="dia_2_manejo_datos_funciones.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DÃ­a 2 - Manejo y visualizaciÃ³n de datos en R</h1>
<p class="subtitle lead">GestiÃ³n de datos y funciones en R</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marina Rodes Blanco, JuliÃ¡n Tijerin TriviÃ±o, Paloma Ruiz Benito y VerÃ³nica Cruz Alonso, </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">14/01/2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/01_logo-vA_pant293.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:40.0%"></p>
</figure>
</div>
<section id="sÃ­ntesis-del-dÃ­a-1-introducciÃ³n-a-r-y-a-r-studio" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="sÃ­ntesis-del-dÃ­a-1-introducciÃ³n-a-r-y-a-r-studio"><span class="header-section-number">1</span> SÃ­ntesis del dÃ­a 1: IntroducciÃ³n a R y a R studio</h2>
<section id="modelo-de-ciencia-de-datos" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</h3>
<div id="fig-datascience" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/datascience.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Modelo de ciencia de datos de Hadley Wickham, Mine Ã‡etinkaya-Rundel y Garrett Grolemund. Traducido de https://r4ds.hadley.nz/intro#fig-ds-diagram
</figcaption>
</figure>
</div>
</section>
<section id="concepto-bÃ¡sicos" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="concepto-bÃ¡sicos"><span class="header-section-number">1.2</span> Concepto bÃ¡sicos</h3>
<ul>
<li><p>R es un lenguaje de programaciÃ³n dinÃ¡mico</p>
<ul>
<li><p>Objetos: â€œcualquier cosaâ€ que almacenamos en R</p></li>
<li><p>Funciones: las acciones (reciben informaciÃ³n -argumentos- y devuelven un resultado)</p></li>
<li><p>Paquetes: conjunto de funciones ya diseÃ±adas. La primera vez los instalamos con install.packages() las siguientes veces sÃ³lo hace falta cargarlos library().</p></li>
</ul></li>
<li><p><strong>RStudio</strong>: entorno de desarrollo integrado para programar en R (<em>IDE: Integrated Development Environemnt</em>). Tiene cuatro zonas diferenciadas:</p>
<ul>
<li><p>el editor de cÃ³digo (scripts abiertos y ventana de cÃ³digo),</p></li>
<li><p>el navegador del espacio de trabajo (con el entorno â€“<em>environment-</em> y el historial de comandos)</p></li>
<li><p>la consola (donde se ejecuta el cÃ³digo)</p></li>
<li><p>el mix de abajo a la derecha (Archivos, GrÃ¡ficos, Paquetes, Ayuda).</p></li>
</ul></li>
</ul>
</section>
<section id="buenas-prÃ¡cticas-en-la-gestiÃ³n-de-datos" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="buenas-prÃ¡cticas-en-la-gestiÃ³n-de-datos"><span class="header-section-number">1.3</span> Buenas prÃ¡cticas en la gestiÃ³n de datos</h3>
<ol type="1">
<li>Trabajar por proyectos</li>
<li>Usar teclas rÃ¡pidas</li>
<li>Consultar documentacion / pedir ayuda</li>
<li>CÃ³digo reproducible</li>
<li>Nombrar adecuadamente: seguir estilo (guia de estilo)</li>
</ol>
</section>
<section id="tipos-de-objetos-y-operaciones-bÃ¡sicas-en-r" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="tipos-de-objetos-y-operaciones-bÃ¡sicas-en-r"><span class="header-section-number">1.4</span> Tipos de objetos y operaciones bÃ¡sicas en R</h3>
<ul>
<li>Vectores</li>
<li>Matrices</li>
<li>Data frames</li>
<li>Listas</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Tipo</th>
<th>Dimensiones</th>
<th>Tipos de datos</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Vector</td>
<td>1</td>
<td>un tipo</td>
</tr>
<tr class="even">
<td>Matriz</td>
<td>2</td>
<td>un tipo</td>
</tr>
<tr class="odd">
<td>Array</td>
<td>&gt;2</td>
<td>un tipo</td>
</tr>
<tr class="even">
<td>Data frame</td>
<td>2</td>
<td>varios tipos (uno por columna)</td>
</tr>
<tr class="odd">
<td>Listas</td>
<td>1</td>
<td>varios tipos</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
âœ” dplyr     1.1.4     âœ” readr     2.1.6
âœ” forcats   1.0.1     âœ” stringr   1.6.0
âœ” ggplot2   4.0.1     âœ” tibble    3.3.0
âœ” lubridate 1.9.4     âœ” tidyr     1.3.1
âœ” purrr     1.2.0     
â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
âœ– dplyr::filter() masks stats::filter()
âœ– dplyr::lag()    masks stats::lag()
â„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear vectores</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="co">#veo el vector que he creado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>v2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  3  5  7  9 11 13 15 17 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">times =</span> <span class="dv">5</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>v3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 1 2 1 2 1 2 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Crar matrices</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="at">nrow =</span> <span class="dv">5</span>, <span class="at">ncol =</span> <span class="dv">5</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>m1 <span class="co">#veo la matriz</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]    1    6   11   16   21
[2,]    2    7   12   17   22
[3,]    3    8   13   18   23
[4,]    4    9   14   19   24
[5,]    5   10   15   20   25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Crear data frames</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">letra =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">col1 =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">col2 =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">64</span>, <span class="dv">23</span>, <span class="dv">9</span>))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  letra id  col1 col2
1     a  1  TRUE   13
2     b  2 FALSE   64
3     c  3 FALSE   23
4     d  4  TRUE    9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    letra                 id          col1              col2      
 Length:4           Min.   :1.00   Mode :logical   Min.   : 9.00  
 Class :character   1st Qu.:1.75   FALSE:2         1st Qu.:12.00  
 Mode  :character   Median :2.50   TRUE :2         Median :18.00  
                    Mean   :2.50                   Mean   :27.25  
                    3rd Qu.:3.25                   3rd Qu.:33.25  
                    Max.   :4.00                   Max.   :64.00  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4
Columns: 4
$ letra &lt;chr&gt; "a", "b", "c", "d"
$ id    &lt;int&gt; 1, 2, 3, 4
$ col1  &lt;lgl&gt; TRUE, FALSE, FALSE, TRUE
$ col2  &lt;dbl&gt; 13, 64, 23, 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#crear una lista</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(v1, v2, m1, df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="quÃ©-son-los-datos-ordenados" class="level3" data-number="1.5">
<h3 data-number="1.5" class="anchored" data-anchor-id="quÃ©-son-los-datos-ordenados"><span class="header-section-number">1.5</span> Â¿QuÃ© son los datos ordenados?</h3>
<p><img src="images/tidydata_1.png" class="img-fluid"></p>
<p><img src="images/tidydata_3.png" class="img-fluid"></p>
</section>
<section id="quÃ©-es-tidyverse" class="level3" data-number="1.6">
<h3 data-number="1.6" class="anchored" data-anchor-id="quÃ©-es-tidyverse"><span class="header-section-number">1.6</span> Â¿QuÃ© es tidyverse?</h3>
<p><img src="images/tidyverse_packages.png" class="img-fluid"></p>
<section id="ejercicio-repaso-del-dÃ­a-anterior" class="level4" data-number="1.6.1">
<h4 data-number="1.6.1" class="anchored" data-anchor-id="ejercicio-repaso-del-dÃ­a-anterior"><span class="header-section-number">1.6.1</span> ğŸ§© Ejercicio: <em>repaso</em> <em>del dÃ­a anterior</em></h4>
<ul>
<li>Crea un vector (mes) con los meses del aÃ±o (en nÃºmero)</li>
<li>Crea otro vector con el nÃºmero de dÃ­as de cada mes y calcula la media y la desviaciÃ³n tÃ­pica</li>
<li>Junta los dos vectores en un data frame</li>
</ul>
</section>
</section>
</section>
<section id="introducciÃ³n" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introducciÃ³n"><span class="header-section-number">2</span> IntroducciÃ³n</h2>
<section id="objetivos-de-la-sesiÃ³n" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="objetivos-de-la-sesiÃ³n"><span class="header-section-number">2.1</span> Objetivos de la sesiÃ³n</h3>
<ul>
<li><p>Entender la sintaxis y las principales funciones de los paquetes dplyr y tidyr de tidyverse.</p></li>
<li><p>Utilizar estas librerÃ­as para manipular, reordenar y operar con un set de datos.</p></li>
<li><p>Comprender la estructura de las funciones y aprender a escribir funciones en R.</p></li>
<li><p>Aplicar funciones en programaciÃ³n iterativa por medio de bucles y la funciÃ³n map() del paquete purr.</p></li>
</ul>
</section>
<section id="set-de-datos-con-los-que-vamos-a-trabajar" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.2</span> Set de datos con los que vamos a trabajar</h3>
<p>Vamos a trabajar con datos de Tidytuesday y de las librerias de tidyverse principalmente. En todos los casos son datos reales.</p>
<p>Tidytuesday es un proyecto comunitario de ciencia de datos impulsado por la comunidad de R, especialmente por usuarios de tidyverse. Cada martes se publica un dataset limpio y listo para analizar, junto con una breve descripciÃ³n y enlaces a la fuente original.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidyTuesday_logo.png" class="img-fluid figure-img"></p>
<figcaption>TidyTuesday</figcaption>
</figure>
</div>
<p>De este proyecto vamos a trabajar principalmente con el set de datos cuisine:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/recetas1_copilot.png" class="img-fluid"></td>
<td><p><strong>CUISINE</strong></p>
<p>El dataset de **Cuisine** de TidyTuesday recopila informaciÃ³n sobre recetas y tipos de cocina (origen, valor nutricional, tiempo de preparaciÃ³n etc.)</p></td>
</tr>
</tbody>
</table>
<p>Tidyverse tambien tiene sus propios set de datos con los que podemos practicar. Puedes consultarlo con la funciÃ³n data(). De los sets de datos de tidyverse vamos a trabajar con msleep</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 80%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid"></td>
<td><p><strong>MSLEEP</strong></p>
<p>El dataset **msleep** contiene informaciÃ³n sobre **el sueÃ±o de distintos** mamÃ­feros. Incluye variables biolÃ³gicas, ecolÃ³gicas y taxonÃ³micas, asÃ­ como medidas relacionadas con sus patrones de sueÃ±o</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="manejo-y-gestiÃ³n-de-datos" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="manejo-y-gestiÃ³n-de-datos"><span class="header-section-number">3</span> Manejo y gestiÃ³n de datos</h2>
<section id="resumen-de-funciones" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="resumen-de-funciones"><span class="header-section-number">3.1</span> Resumen de funciones</h3>
<p><img src="images/resumen_funciones.png" class="img-fluid"></p>
</section>
<section id="importar-y-renombrar-datos" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="importar-y-renombrar-datos"><span class="header-section-number">3.2</span> Importar y renombrar datos</h3>
<section id="read_delim-leer-datos-desde-fuera-de-r" class="level4" data-number="3.2.1">
<h4 data-number="3.2.1" class="anchored" data-anchor-id="read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.2.1</span> <a href="https://readr.tidyverse.org/reference/read_delim.html">Read_delim</a>: leer datos desde fuera de R</h4>
<p>Leer datos que tenemos almacenados, como por ejemplo, una tabla en formato csv.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 2218 Columns: 17
â”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Delimiter: ","
chr   (5): name, country, url, author, ingredients
dbl  (11): calories, fat, carbs, protein, avg_rating, total_ratings, reviews...
date  (1): date_published

â„¹ Use `spec()` to retrieve the full column specification for this data.
â„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># con el argumento col_type puedo especificar el tipo de dato (en este caso country como factor)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_type =</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"f"</span>, <span class="at">servings =</span> <span class="st">"f"</span>))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>recetas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganakâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
 2 Coney Iâ€¦ Jewish  httpâ€¦ John â€¦ 2024-11-26     2 Â¾ cups aâ€¦      301    17    31
 3 Diana'sâ€¦ Austraâ€¦ httpâ€¦ CHIPPâ€¦ 2022-07-14     1 Â½ cups wâ€¦       64     3     9
 4 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 5 Tex-Mexâ€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
 6 Newfounâ€¦ Canadiâ€¦ httpâ€¦ MomWhâ€¦ 2022-08-12     1 (3 poundâ€¦      958    24   144
 7 Pasta eâ€¦ Italian httpâ€¦ Buckwâ€¦ 2023-12-12     1 cup dry â€¦      378    10    59
 8 Danish â€¦ Danish  httpâ€¦ TheOtâ€¦ 2020-06-19     4 cups allâ€¦       90     5    10
 9 Lemon Pâ€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
10 Pan conâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02     1 large toâ€¦      322    16    39
# â„¹ 2,208 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(recetas)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name                                   country         url           
 Length:2218        Canadian                    :  67   Length:2218       
 Class :character   Brazilian                   :  67   Class :character  
 Mode  :character   Filipino                    :  66   Mode  :character  
                    Australian and New Zealander:  65                     
                    Cuban                       :  65                     
                    Chinese                     :  65                     
                    (Other)                     :1823                     
    author          date_published       ingredients           calories     
 Length:2218        Min.   :2009-02-09   Length:2218        Min.   :   3.0  
 Class :character   1st Qu.:2022-11-02   Class :character   1st Qu.: 190.0  
 Mode  :character   Median :2024-07-14   Mode  :character   Median : 319.5  
                    Mean   :2023-10-27                      Mean   : 358.4  
                    3rd Qu.:2025-01-06                      3rd Qu.: 477.0  
                    Max.   :2025-07-29                      Max.   :2266.0  
                                                            NA's   :32      
      fat             carbs           protein         avg_rating   
 Min.   :  0.00   Min.   :  1.00   Min.   :  0.00   Min.   :1.000  
 1st Qu.:  7.00   1st Qu.: 13.00   1st Qu.:  4.00   1st Qu.:4.300  
 Median : 15.00   Median : 26.00   Median : 11.00   Median :4.600  
 Mean   : 18.76   Mean   : 31.96   Mean   : 16.61   Mean   :4.509  
 3rd Qu.: 26.00   3rd Qu.: 45.00   3rd Qu.: 25.00   3rd Qu.:4.800  
 Max.   :225.00   Max.   :264.00   Max.   :159.00   Max.   :5.000  
 NA's   :55       NA's   :35       NA's   :39       NA's   :97     
 total_ratings       reviews         prep_time        cook_time     
 Min.   :  1.00   Min.   :  1.00   Min.   :   0.0   Min.   :  0.00  
 1st Qu.:  6.00   1st Qu.:  6.00   1st Qu.:  10.0   1st Qu.: 10.00  
 Median : 24.00   Median : 21.00   Median :  15.0   Median : 25.00  
 Mean   : 85.25   Mean   : 76.93   Mean   :  21.5   Mean   : 41.75  
 3rd Qu.: 87.00   3rd Qu.: 74.00   3rd Qu.:  25.0   3rd Qu.: 45.00  
 Max.   :997.00   Max.   :975.00   Max.   :1800.0   Max.   :600.00  
 NA's   :97       NA's   :108                                       
   total_time       servings  
 Min.   :    0   4      :487  
 1st Qu.:   35   6      :419  
 Median :   60   8      :396  
 Mean   :  171   12     :238  
 3rd Qu.:  120   10     :104  
 Max.   :14440   (Other):572  
                 NA's   :  2  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,218
Columns: 17
$ name           &lt;chr&gt; "Saganaki (Flaming Greek Cheese)", "Coney Island Knisheâ€¦
$ country        &lt;fct&gt; Greek, Jewish, Australian and New Zealander, Chilean, Tâ€¦
$ url            &lt;chr&gt; "https://www.allrecipes.com/recipe/263750/flaming-greekâ€¦
$ author         &lt;chr&gt; "John Mitzewich", "John Mitzewich", "CHIPPENDALE", "Heiâ€¦
$ date_published &lt;date&gt; 2024-02-07, 2024-11-26, 2022-07-14, 2025-01-31, 2025-0â€¦
$ ingredients    &lt;chr&gt; "1 (4 ounce) package kasseri cheese, 1 tablespoon waterâ€¦
$ calories       &lt;dbl&gt; 391, 301, 64, 106, 449, 958, 378, 90, 157, 322, 4, NA, â€¦
$ fat            &lt;dbl&gt; 25, 17, 3, 9, 23, 24, 10, 5, 6, 16, 0, NA, 21, 2, 66, 8â€¦
$ carbs          &lt;dbl&gt; 15, 31, 9, 7, 58, 144, 59, 10, 25, 39, 1, NA, 16, 63, 7â€¦
$ protein        &lt;dbl&gt; 16, 7, 1, 1, 7, 46, 14, 1, 2, 7, 0, NA, 28, 6, 54, 17, â€¦
$ avg_rating     &lt;dbl&gt; 4.8, 4.6, 4.3, 5.0, 3.8, 4.4, 4.3, NA, 4.6, 5.0, 4.7, 4â€¦
$ total_ratings  &lt;dbl&gt; 25, 10, 126, 1, 13, 40, 3, NA, 65, 2, 182, 2, 19, 16, 9â€¦
$ reviews        &lt;dbl&gt; 22, 9, 104, 1, 11, 32, 3, NA, 55, 2, 138, 2, 15, 16, 84â€¦
$ prep_time      &lt;dbl&gt; 10, 30, 20, 10, 30, 30, 30, 40, 0, 5, 5, 5, 10, 10, 20,â€¦
$ cook_time      &lt;dbl&gt; 5, 75, 15, 0, 15, 165, 75, 30, 0, 5, 0, 25, 10, 50, 16,â€¦
$ total_time     &lt;dbl&gt; 15, 180, 180, 10, 45, 675, 585, 155, 0, 10, 5, 30, 50, â€¦
$ servings       &lt;fct&gt; 2, 16, 12, 6, 15, 6, 6, 84, 24, 1, 21, 8, 4, 10, 4, 8, â€¦</code></pre>
</div>
</div>
</section>
<section id="rename-cambiar-nombres-de-variables-columnas" class="level4" data-number="3.2.2">
<h4 data-number="3.2.2" class="anchored" data-anchor-id="rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2.2</span> <a href="https://dplyr.tidyverse.org/reference/rename.html">Rename</a>: cambiar nombres de variables (columnas)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Consulto el nombre de las columnas</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio el nombre y aÃ±ado la unidad de medida (gramos)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>recetas_g <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fat_g =</span> fat,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">carbs_g =</span> carbs,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nombre nuevo = nombre viejo</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">protein_g =</span> protein</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ğŸ“ Ajustar sangrÃ­a de cÃ³digo: Ctrl + i; Reformatear cÃ³digo: Ctrl + Shift + a</p>
</section>
</section>
<section id="funciones-bÃ¡sicas-de-filtrado-y-selecciÃ³n" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="funciones-bÃ¡sicas-de-filtrado-y-selecciÃ³n"><span class="header-section-number">3.3</span> Funciones bÃ¡sicas de filtrado y selecciÃ³n</h3>
<section id="slice-filtrar-filas-segÃºn-el-Ã­ndice-numÃ©rico" class="level4" data-number="3.3.1">
<h4 data-number="3.3.1" class="anchored" data-anchor-id="slice-filtrar-filas-segÃºn-el-Ã­ndice-numÃ©rico"><span class="header-section-number">3.3.1</span> <a href="https://dplyr.tidyverse.org/reference/slice.html">Slice</a>: filtrar filas segÃºn el Ã­ndice numÃ©rico</h4>
<p>Seleccionar filas concretas del set de datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># warning: false</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> <span class="co"># shortcut para el pipe: CTRL + SHIFT + M</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="co"># la primera fila</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 Ã— 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganakiâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># la fila 1 y la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 Ã— 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganakiâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
2 Tex-Mex â€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="co"># de la fila 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 Ã— 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganakiâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
2 Coney Isâ€¦ Jewish  httpâ€¦ John â€¦ 2024-11-26     2 Â¾ cups aâ€¦      301    17    31
3 Diana's â€¦ Austraâ€¦ httpâ€¦ CHIPPâ€¦ 2022-07-14     1 Â½ cups wâ€¦       64     3     9
4 Chilean â€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
5 Tex-Mex â€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) <span class="co"># todas las filas excepto de la 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,213 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Newfounâ€¦ Canadiâ€¦ httpâ€¦ MomWhâ€¦ 2022-08-12     1 (3 poundâ€¦      958    24   144
 2 Pasta eâ€¦ Italian httpâ€¦ Buckwâ€¦ 2023-12-12     1 cup dry â€¦      378    10    59
 3 Danish â€¦ Danish  httpâ€¦ TheOtâ€¦ 2020-06-19     4 cups allâ€¦       90     5    10
 4 Lemon Pâ€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
 5 Pan conâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02     1 large toâ€¦      322    16    39
 6 Traci'sâ€¦ Filipiâ€¦ httpâ€¦ Traciâ€¦ 2022-08-28     2 tablespoâ€¦        4     0     1
 7 Braziliâ€¦ Brazilâ€¦ httpâ€¦ JESSYâ€¦ 2022-09-25     1 cup whitâ€¦       NA    NA    NA
 8 Lomo deâ€¦ Cuban   httpâ€¦ lilloâ€¦ 2024-12-19     1 tablespoâ€¦      389    21    16
 9 Peruviaâ€¦ Peruviâ€¦ httpâ€¦ Kat Nâ€¦ 2022-09-15     1 gallon wâ€¦      253     2    63
10 Chef Joâ€¦ Southeâ€¦ httpâ€¦ John â€¦ 2023-12-08     1  whole câ€¦     1115    66    75
# â„¹ 2,203 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="filter-filtrar-filas-utilizando-condiciones" class="level4" data-number="3.3.2">
<h4 data-number="3.3.2" class="anchored" data-anchor-id="filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">3.3.2</span> <a href="https://dplyr.tidyverse.org/reference/filter.html">Filter</a>: filtrar filas utilizando condiciones</h4>
<p>Se necesita un vector de filtrado que contenga valores lÃ³gicos (TRUE/FALSE).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span>) <span class="co"># filtrar por filas que cumplen un patrÃ³n </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 2 Pebre    Chilean httpâ€¦ Buckwâ€¦ 2025-04-09     1  dried aâ€¦      164    14    10
 3 Porotosâ€¦ Chilean httpâ€¦ Stefaâ€¦ 2021-12-29     1 tablespoâ€¦      285     4    53
 4 Ajiaco â€¦ Chilean httpâ€¦ damasâ€¦ 2025-02-16     2 tablespoâ€¦      579    24    34
 5 Chileanâ€¦ Chilean httpâ€¦ Aliciâ€¦ 2022-10-18     1 tablespoâ€¦      530    28    54
 6 Empanadâ€¦ Chilean httpâ€¦ damasâ€¦ 2019-04-02     3 cups allâ€¦      343    14    39
 7 Pastel â€¦ Chilean httpâ€¦ Epicuâ€¦ 2025-04-08     2  eggs, 1â€¦      435    21    38
 8 Pastel â€¦ Chilean httpâ€¦ Cucinâ€¦ 2024-11-22     5 cups potâ€¦      366    25    22
 9 Leche Aâ€¦ Chilean httpâ€¦ damasâ€¦ 2020-06-18     1 quart whâ€¦      258     9    25
10 Chileanâ€¦ Chilean httpâ€¦ Barbaâ€¦ 2025-06-04     4 cups allâ€¦      477    28    49
# â„¹ 12 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todass las recetas chilenas</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">&amp;</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: AND</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 Ã— 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Chilean â€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
2 Pebre     Chilean httpâ€¦ Buckwâ€¦ 2025-04-09     1  dried aâ€¦      164    14    10
3 Empanadaâ€¦ Chilean httpâ€¦ damasâ€¦ 2019-04-02     3 cups allâ€¦      343    14    39
4 Chilean â€¦ Chilean httpâ€¦ Barbaâ€¦ 2025-06-04     4 cups allâ€¦      477    28    49
5 Lemon Piâ€¦ Chilean httpâ€¦ Ruperâ€¦ 2025-02-01     1 tablespoâ€¦       NA    NA    NA
6 Isa's Coâ€¦ Chilean httpâ€¦ Wondeâ€¦ 2022-09-26     20  whole â€¦       NA    NA    NA
7 Pisco Soâ€¦ Chilean httpâ€¦ DORITA 2022-10-03     4 cups iceâ€¦       NA    NA    NA
8 Gambas Pâ€¦ Chilean httpâ€¦ damasâ€¦ 2025-02-14     10 cloves â€¦      278    19     4
9 Pisco Soâ€¦ Chilean httpâ€¦ PattyQ 2025-01-31     2 cups pisâ€¦       NA    NA    NA
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas que se preparan en menos de 60 minutos</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">|</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: OR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,019 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganakâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
 2 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 3 Tex-Mexâ€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
 4 Lemon Pâ€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
 5 Pan conâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02     1 large toâ€¦      322    16    39
 6 Traci'sâ€¦ Filipiâ€¦ httpâ€¦ Traciâ€¦ 2022-08-28     2 tablespoâ€¦        4     0     1
 7 Braziliâ€¦ Brazilâ€¦ httpâ€¦ JESSYâ€¦ 2022-09-25     1 cup whitâ€¦       NA    NA    NA
 8 Lomo deâ€¦ Cuban   httpâ€¦ lilloâ€¦ 2024-12-19     1 tablespoâ€¦      389    21    16
 9 Eggnog â€¦ Puertoâ€¦ httpâ€¦ Childâ€¦ 2024-12-13     5 cups cubâ€¦      389    19    49
10 Chickenâ€¦ Malaysâ€¦ httpâ€¦ Siah   2023-02-14     1 tablespoâ€¦      231     7    13
# â„¹ 1,009 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas (independientemente del tiempo de preparaciÃ³n) o bien aquellas recetas que se preparen en menos de 60mins (independientemente del paÃ­s)</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chilean"</span>, <span class="st">"Brazilian"</span>, <span class="st">"Peruvian"</span>)) <span class="co"># combinar criterios: %in% </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 2 Braziliâ€¦ Brazilâ€¦ httpâ€¦ JESSYâ€¦ 2022-09-25     1 cup whitâ€¦       NA    NA    NA
 3 Peruviaâ€¦ Peruviâ€¦ httpâ€¦ Kat Nâ€¦ 2022-09-15     1 gallon wâ€¦      253     2    63
 4 Pebre    Chilean httpâ€¦ Buckwâ€¦ 2025-04-09     1  dried aâ€¦      164    14    10
 5 Porotosâ€¦ Chilean httpâ€¦ Stefaâ€¦ 2021-12-29     1 tablespoâ€¦      285     4    53
 6 Braziliâ€¦ Brazilâ€¦ httpâ€¦ Socceâ€¦ 2023-02-13     1 cup browâ€¦      255     0    66
 7 Pollo Sâ€¦ Peruviâ€¦ httpâ€¦ Laureâ€¦ 2025-02-03     2 large skâ€¦      351    11    37
 8 Citrus â€¦ Peruviâ€¦ httpâ€¦ Lorna  2025-01-28     Â½ cup fresâ€¦      440    29    17
 9 Ajiaco â€¦ Chilean httpâ€¦ damasâ€¦ 2025-02-16     2 tablespoâ€¦      579    24    34
10 Braziliâ€¦ Brazilâ€¦ httpâ€¦ Cacau  2020-03-05     3 tablespoâ€¦      451    11    83
# â„¹ 117 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas de paÃ­ses del cono sur. Es equivalente a:</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Brazilian"</span><span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Peruvian"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 2 Braziliâ€¦ Brazilâ€¦ httpâ€¦ JESSYâ€¦ 2022-09-25     1 cup whitâ€¦       NA    NA    NA
 3 Peruviaâ€¦ Peruviâ€¦ httpâ€¦ Kat Nâ€¦ 2022-09-15     1 gallon wâ€¦      253     2    63
 4 Pebre    Chilean httpâ€¦ Buckwâ€¦ 2025-04-09     1  dried aâ€¦      164    14    10
 5 Porotosâ€¦ Chilean httpâ€¦ Stefaâ€¦ 2021-12-29     1 tablespoâ€¦      285     4    53
 6 Braziliâ€¦ Brazilâ€¦ httpâ€¦ Socceâ€¦ 2023-02-13     1 cup browâ€¦      255     0    66
 7 Pollo Sâ€¦ Peruviâ€¦ httpâ€¦ Laureâ€¦ 2025-02-03     2 large skâ€¦      351    11    37
 8 Citrus â€¦ Peruviâ€¦ httpâ€¦ Lorna  2025-01-28     Â½ cup fresâ€¦      440    29    17
 9 Ajiaco â€¦ Chilean httpâ€¦ damasâ€¦ 2025-02-16     2 tablespoâ€¦      579    24    34
10 Braziliâ€¦ Brazilâ€¦ httpâ€¦ Cacau  2020-03-05     3 tablespoâ€¦      451    11    83
# â„¹ 117 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
<section id="ejercicio-slice-filter-arrange" class="level5" data-number="3.3.2.1">
<h5 data-number="3.3.2.1" class="anchored" data-anchor-id="ejercicio-slice-filter-arrange"><span class="header-section-number">3.3.2.1</span> ğŸ§© <em>Ejercicio: slice(), filter(), arrange()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 79%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Lee el data.frame â€œmsleep.csvâ€. Pista: el delimitador entre datos es la coma (â€œ,â€).</p></li>
<li><p>Crea un subset que NO contenga los animales domÃ©sticos (campo conservation). Â¿Cuantas son?</p></li>
<li><p>Crea un subset de datos que contenga las filas de la 1 a la 5 y de la 18 a la 20, sobre esos datos obten los animales carnÃ­voros. Ordena segÃºn las horas de sueÃ±o Â¿QuÃ© animal duerme mÃ¡s horas?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="level4" data-number="3.3.3">
<h4 data-number="3.3.3" class="anchored" data-anchor-id="select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">3.3.3</span> <a href="https://dplyr.tidyverse.org/reference/select.html">Select</a>: sirve para seleccionar columnas utilizando condiciones</h4>
<p>Permite seleccionar columnas. Las podemos seleccionar por nombre, posiciÃ³n o usando alguna de las condiciones que puedes ver si consultas la ayuda de la funciÃ³n (?select).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ?select</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein) <span class="co">#solo nos interesan las columnas con informacion nutricional de cada receta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# â„¹ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# â„¹ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede usar un patron de texto pra seleccionar colmnas</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"time"</span>)) <span class="co"># solo nos interesan las columnas relacionadas con el tiempo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 3
   prep_time cook_time total_time
       &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1        10         5         15
 2        30        75        180
 3        20        15        180
 4        10         0         10
 5        30        15         45
 6        30       165        675
 7        30        75        585
 8        40        30        155
 9         0         0          0
10         5         5         10
# â„¹ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># se pueden utilizar todo tipo de patrones de texto: https://rstudio.github.io/cheatsheets/strings.pdf</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name,author, <span class="fu">everything</span>()) <span class="co"># se puede usar para reordenar variables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 17
   name     author country url   date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt;   &lt;chr&gt; &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganakâ€¦ John â€¦ Greek   httpâ€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
 2 Coney Iâ€¦ John â€¦ Jewish  httpâ€¦ 2024-11-26     2 Â¾ cups aâ€¦      301    17    31
 3 Diana'sâ€¦ CHIPPâ€¦ Austraâ€¦ httpâ€¦ 2022-07-14     1 Â½ cups wâ€¦       64     3     9
 4 Chileanâ€¦ Heidi  Chilean httpâ€¦ 2025-01-31     Â½ cup chopâ€¦      106     9     7
 5 Tex-Mexâ€¦ Ann    Tex-Mex httpâ€¦ 2025-02-18     2 cups allâ€¦      449    23    58
 6 Newfounâ€¦ MomWhâ€¦ Canadiâ€¦ httpâ€¦ 2022-08-12     1 (3 poundâ€¦      958    24   144
 7 Pasta eâ€¦ Buckwâ€¦ Italian httpâ€¦ 2023-12-12     1 cup dry â€¦      378    10    59
 8 Danish â€¦ TheOtâ€¦ Danish  httpâ€¦ 2020-06-19     4 cups allâ€¦       90     5    10
 9 Lemon Pâ€¦ Lauraâ€¦ Amish â€¦ httpâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
10 Pan conâ€¦ Luis â€¦ Spanish httpâ€¦ 2025-06-02     1 large toâ€¦      322    16    39
# â„¹ 2,208 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">recipes_name=</span>name, country, author, reviews) <span class="co"># y para renombrarlas a la vez que hacemos la seleccion</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 4
   recipes_name                                   country         author reviews
   &lt;chr&gt;                                          &lt;fct&gt;           &lt;chr&gt;    &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                Greek           John â€¦      22
 2 Coney Island Knishes                           Jewish          John â€¦       9
 3 Diana's Hawaiian Bread Rolls                   Australian andâ€¦ CHIPPâ€¦     104
 4 Chilean Pebre                                  Chilean         Heidi        1
 5 Tex-Mex Sheet Cake                             Tex-Mex         Ann         11
 6 Newfoundland Jigg's Dinner                     Canadian        MomWhâ€¦      32
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew) Italian         Buckwâ€¦       3
 8 Danish Butter Cookies                          Danish          TheOtâ€¦      NA
 9 Lemon Poppy Seed Amish Friendship Bread        Amish and Mennâ€¦ Lauraâ€¦      55
10 Pan con Tomate (Spanish Tomato Bread)          Spanish         Luis â€¦       2
# â„¹ 2,208 more rows</code></pre>
</div>
</div>
<section id="ejercicio-select" class="level5" data-number="3.3.3.1">
<h5 data-number="3.3.3.1" class="anchored" data-anchor-id="ejercicio-select"><span class="header-section-number">3.3.3.1</span> ğŸ§© <em>Ejercicio: select()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture2_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, crea un nuevo data.frame que contenga las variables relacionadas con el sueÃ±o.</p></li>
<li><p>Con el data set de msleep, crea un nuevo data.frame que contenga todas las variables excepto el estado de conservacion.</p></li>
<li><p>(extra) Crea un nuevo objeto (data frame) con el orden, gÃ©nero y nombre al principio y que incluya todas las demÃ¡s columnas excepto el tiempo despierto.</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="transformar-los-datos-y-calcular-nuevas-variables" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">3.4</span> Transformar los datos y calcular nuevas variables</h3>
<section id="mutate-crear-modificar-o-eliminar-columnas" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">3.4.1</span> <a href="https://dplyr.tidyverse.org/reference/mutate.html">Mutate</a>: crear, modificar o eliminar columnas</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir una variable </span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># desde cero</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># utilizando una variable para calcular otra (ej.- el numero de personas que       han dejado una puntuaciÃ³n pero no han escrito un review)</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews) <span class="sc">|&gt;</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    ID, </span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    name<span class="sc">:</span>date_published, </span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    total_ratings,</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    reviews,</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    num_ratings_no_review,</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">everything</span>()</span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 19
      ID name          country url   author date_published total_ratings reviews
   &lt;int&gt; &lt;chr&gt;         &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;                 &lt;dbl&gt;   &lt;dbl&gt;
 1     1 Saganaki (Flâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07                25      22
 2     2 Coney Islandâ€¦ Jewish  httpâ€¦ John â€¦ 2024-11-26                10       9
 3     3 Diana's Hawaâ€¦ Austraâ€¦ httpâ€¦ CHIPPâ€¦ 2022-07-14               126     104
 4     4 Chilean Pebre Chilean httpâ€¦ Heidi  2025-01-31                 1       1
 5     5 Tex-Mex Sheeâ€¦ Tex-Mex httpâ€¦ Ann    2025-02-18                13      11
 6     6 Newfoundlandâ€¦ Canadiâ€¦ httpâ€¦ MomWhâ€¦ 2022-08-12                40      32
 7     7 Pasta e Ceciâ€¦ Italian httpâ€¦ Buckwâ€¦ 2023-12-12                 3       3
 8     8 Danish Butteâ€¦ Danish  httpâ€¦ TheOtâ€¦ 2020-06-19                NA      NA
 9     9 Lemon Poppy â€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21                65      55
10    10 Pan con Tomaâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02                 2       2
# â„¹ 2,208 more rows
# â„¹ 11 more variables: num_ratings_no_review &lt;dbl&gt;, ingredients &lt;chr&gt;,
#   calories &lt;dbl&gt;, fat &lt;dbl&gt;, carbs &lt;dbl&gt;, protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;,
#   prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;, servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sobreescribir una variable.</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fct_recode sirve para redefinir los niveles de un factor (ojo sintaxis:          new_name="old_name")</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span> </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>      ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganakâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
 2 Coney Iâ€¦ Jewish  httpâ€¦ John â€¦ 2024-11-26     2 Â¾ cups aâ€¦      301    17    31
 3 Diana'sâ€¦ Austraâ€¦ httpâ€¦ CHIPPâ€¦ 2022-07-14     1 Â½ cups wâ€¦       64     3     9
 4 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 5 Tex-Mexâ€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
 6 Newfounâ€¦ Canadiâ€¦ httpâ€¦ MomWhâ€¦ 2022-08-12     1 (3 poundâ€¦      958    24   144
 7 Pasta eâ€¦ Italian httpâ€¦ Buckwâ€¦ 2023-12-12     1 cup dry â€¦      378    10    59
 8 Danish â€¦ Danish  httpâ€¦ TheOtâ€¦ 2020-06-19     4 cups allâ€¦       90     5    10
 9 Lemon Pâ€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
10 Pan conâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02     1 large toâ€¦      322    16    39
# â„¹ 2,208 more rows
# â„¹ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#utilizar mas de una variable para generar otra</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"highestâ€‘rated_Latin_cuisine"</span>,</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"lowestâ€‘rated_Latin_cuisine"</span>,</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 Ã— 18
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganakâ€¦ Greek   httpâ€¦ John â€¦ 2024-02-07     1 (4 ounceâ€¦      391    25    15
 2 Coney Iâ€¦ Jewish  httpâ€¦ John â€¦ 2024-11-26     2 Â¾ cups aâ€¦      301    17    31
 3 Diana'sâ€¦ Austraâ€¦ httpâ€¦ CHIPPâ€¦ 2022-07-14     1 Â½ cups wâ€¦       64     3     9
 4 Chileanâ€¦ Chilean httpâ€¦ Heidi  2025-01-31     Â½ cup chopâ€¦      106     9     7
 5 Tex-Mexâ€¦ Tex-Mex httpâ€¦ Ann    2025-02-18     2 cups allâ€¦      449    23    58
 6 Newfounâ€¦ Canadiâ€¦ httpâ€¦ MomWhâ€¦ 2022-08-12     1 (3 poundâ€¦      958    24   144
 7 Pasta eâ€¦ Italian httpâ€¦ Buckwâ€¦ 2023-12-12     1 cup dry â€¦      378    10    59
 8 Danish â€¦ Danish  httpâ€¦ TheOtâ€¦ 2020-06-19     4 cups allâ€¦       90     5    10
 9 Lemon Pâ€¦ Amish â€¦ httpâ€¦ Lauraâ€¦ 2025-01-21     2 cups allâ€¦      157     6    25
10 Pan conâ€¦ Spanish httpâ€¦ Luis â€¦ 2025-06-02     1 large toâ€¦      322    16    39
# â„¹ 2,208 more rows
# â„¹ 9 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;, classification &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer todo lo anterior concatenando todo el proceso y guardar el set de datos:</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>recetas_modif <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span>),</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"highestâ€‘rated_Latin_cuisine"</span>,</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"lowestâ€‘rated_Latin_cuisine"</span>,</span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-mutate" class="level5" data-number="3.4.1.1">
<h5 data-number="3.4.1.1" class="anchored" data-anchor-id="ejercicio-mutate"><span class="header-section-number">3.4.1.1</span> ğŸ§© <em>Ejercicio: mutate()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture3_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, incluye una nueva columna con el porcentaje de horas que duerme cada animal al dÃ­a.</p></li>
<li><p>Haz una clasificaciÃ³n que incluya tres categorÃ­as: carnivoros amenazados, herviboros amenazados y otros. Para ello tienes que basarte en las columnas â€œvoreâ€ y â€œconservationâ€. Segun la UICN se considera amenazado cuando estÃ¡ en las categorÃ­as vulnerable (vu), endangered (en) o critically endangered (cr).</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" class="level4" data-number="3.4.2">
<h4 data-number="3.4.2" class="anchored" data-anchor-id="summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila"><span class="header-section-number">3.4.2</span> <a href="https://dplyr.tidyverse.org/reference/summarise.html">Summarise</a> y <a href="https://dplyr.tidyverse.org/reference/group_by.html">group by</a>: generar un nuevo <code>data.frame</code> resumiendo cada grupo a una fila</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mÃ­nimo y mÃ¡ximo tiempo de preparaciÃ³n</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prep_time_max =</span> <span class="fu">max</span>(prep_time),</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">prep_time_total_min =</span> <span class="fu">min</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 Ã— 2
  prep_time_max prep_time_total_min
          &lt;dbl&gt;               &lt;dbl&gt;
1          1800                   0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># minimo, mÃ¡ximo y media de proteÃ­nas de todas las recetas</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein),</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 Ã— 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1          NA           NA          NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a> <span class="do">## Ojo! si no queremos que tenga en cuenta los NA hay que aÃ±adir argumento na.rm=T</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(protein, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 Ã— 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1         159         16.6           0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lo mismo que antes, pero por paÃ­s</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 Ã— 4
   country                      protein_max protein_mean protein_min
   &lt;fct&gt;                              &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
 1 Greek                                 65        15.9            5
 2 Jewish                                62        11.7            0
 3 Australian and New Zealander          27         4.61           0
 4 Chilean                               54        12.3            0
 5 Tex-Mex                               56        23.2            0
 6 Canadian                              58        15.3            0
 7 Italian                               91        25.4            5
 8 Danish                                35         7.61           5
 9 Amish and Mennonite                   69         8.92           0
10 Spanish                               95        19.9            0
# â„¹ 39 more rows</code></pre>
</div>
</div>
<section id="ejercicio-group_by-summrise" class="level5" data-number="3.4.2.1">
<h5 data-number="3.4.2.1" class="anchored" data-anchor-id="ejercicio-group_by-summrise"><span class="header-section-number">3.4.2.1</span> ğŸ§© <em>Ejercicio: group_by(), summrise()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture4_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, cuenta el nÃºmero de especies estudiadas por orden (order)</p></li>
<li><p>Calcula el promedio de horas de sueÃ±o segÃºn el tipo de alimentaciÃ³n Â¿duemen mas los carnivoros, los herbÃ­voros o los insectÃ­voros estudiados en este dataset?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="pivot-transformar-datos-a-formato-largo-o-ancho" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">3.5</span> <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">Pivot</a>: transformar datos a formato largo o ancho</h3>
<p>Nos permite transformar datos de formato largo a ancho y viceversa. Nos puede convenir una forma u otra segÃºn lo que queramos hacer con lo datos: presentarlos en una tabla, hacer transformaciones o anÃ¡lisis, hacer un grÃ¡fico etc.</p>
<p>En la siguiente imagen, extraÃ­da de <a href="https://www.epirhandbook.com/en/">The Epidemiologist R Handbook</a> se puede ver en quÃ© consiste esta transformaciÃ³n.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer_epirhandbook.png" class="img-fluid figure-img" width="555"></p>
<figcaption>Pivot data transformation</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam<span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span>  <span class="fu">select</span>(name, country, fat, carbs,protein) <span class="sc">|&gt;</span>  <span class="fu">filter</span>(country<span class="sc">==</span><span class="st">"Vietnamese"</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co"># transformamos a formato largo, incluyendo los valores de grasas, carbohidratos y proteinas en una columna llamada "nutritional_value</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_long <span class="ot">&lt;-</span> recetas_Vietnam <span class="sc">|&gt;</span> </span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>fat<span class="sc">:</span>protein, <span class="at">names_to=</span><span class="st">"nutritional_value"</span>)</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="co">#volvemos al set original</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_wide<span class="ot">&lt;-</span> recetas_Vietnam_long <span class="sc">|&gt;</span> </span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>nutritional_value, <span class="at">values_from=</span>value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-transformar-datos-largo-ancho" class="level4" data-number="3.5.1">
<h4 data-number="3.5.1" class="anchored" data-anchor-id="ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">3.5.1</span> ğŸ§© <em>Ejercicio: transformar datos largo ancho</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image3_flickr.jpg" class="img-fluid"></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response y pixar_films</p></li>
<li><p>Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()</p></li>
<li><p>Une ambos datasets en uno solo para tener en un mismo data frame toda la informaciÃ³n. Elige el campo mÃ¡s apropiado de uniÃ³n</p></li>
<li><p>Guarda el nuevo set de datos como pixar_joint</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente imagen: <a href="https://www.flickr.com/photos/harshlight/17294952412" class="uri">https://www.flickr.com/photos/harshlight/17294952412</a> (CC BY 2.0)</p>
</section>
</section>
<section id="unir-data.frames-joins" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="unir-data.frames-joins"><span class="header-section-number">3.6</span> Unir data.frames: <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">joins</a></h3>
<p><code>*_join()</code> aÃ±ade columnas de <code>y</code> (segundo data.frame) a <code>x</code> (primer data.frame), haciendo coincidir las observaciones en funciÃ³n de la variable comÃºn.</p>
<p><img src="images/joins_from_dataWrangling_RStudio_cheatsheet.png" class="img-fluid" width="559"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join: left, right, full, inner</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">#datos de pais - capital- continente</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>paises <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"EspaÃ±a"</span>, <span class="st">"Francia"</span>, <span class="st">"JapÃ³n"</span>, <span class="st">"Brasil"</span>, <span class="st">"SudÃ¡frica"</span>),</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">capital =</span> <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"ParÃ­s"</span>, <span class="st">"Tokio"</span>, <span class="st">"Brasilia"</span>, <span class="st">"Pretoria"</span>),</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">continente =</span> <span class="fu">c</span>(<span class="st">"Europa"</span>, <span class="st">"Europa"</span>, <span class="st">"Asia"</span>, <span class="st">"AmÃ©rica"</span>, <span class="st">"Ãfrica"</span>)</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="co">#datos demogrÃ¡ficos</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>demografia <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"EspaÃ±a"</span>, <span class="st">"JapÃ³n"</span>, <span class="st">"Brasil"</span>, <span class="st">"CanadÃ¡"</span>, <span class="st">"SudÃ¡frica"</span>),</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">poblacion_millones =</span> <span class="fu">c</span>(<span class="fl">47.4</span>, <span class="fl">125.7</span>, <span class="fl">203.1</span>, <span class="fl">39.6</span>, <span class="fl">60.0</span>),</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">extension_km2 =</span> <span class="fu">c</span>(<span class="dv">505990</span>, <span class="dv">377975</span>, <span class="dv">8515767</span>, <span class="dv">9984670</span>, <span class="dv">1221037</span>)</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="co">#left join: se une al set de datos de pais los datos de demografia (si los hay)</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 Ã— 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 EspaÃ±a    Madrid   Europa                   47.4        505990
2 Francia   ParÃ­s    Europa                   NA              NA
3 JapÃ³n     Tokio    Asia                    126.         377975
4 Brasil    Brasilia AmÃ©rica                 203.        8515767
5 SudÃ¡frica Pretoria Ãfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">#right join: se une al set de datos de demografa los datos de pais (si los hay)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 Ã— 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 EspaÃ±a    Madrid   Europa                   47.4        505990
2 JapÃ³n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia AmÃ©rica                 203.        8515767
4 SudÃ¡frica Pretoria Ãfrica                   60         1221037
5 CanadÃ¡    &lt;NA&gt;     &lt;NA&gt;                     39.6       9984670</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#inner join: une los paises presentes en los dos set de datos</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 Ã— 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 EspaÃ±a    Madrid   Europa                   47.4        505990
2 JapÃ³n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia AmÃ©rica                 203.        8515767
4 SudÃ¡frica Pretoria Ãfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">#full join: une todos los paises presentes en uno u otro.</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>paises_demo_full_join<span class="ot">&lt;-</span><span class="fu">full_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="guardar-datos-con-write_delim" class="level3" data-number="3.7">
<h3 data-number="3.7" class="anchored" data-anchor-id="guardar-datos-con-write_delim"><span class="header-section-number">3.7</span> Guardar datos con <a href="https://readr.tidyverse.org/reference/write_delim.html">Write_delim</a>:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>(paises_demo_full_join, </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">"paises_demo_full_join.csv"</span>,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">delim =</span> <span class="st">";"</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co"># en file hay que especificar el directorio donde queremos que se guarde. Si no, se guardarÃ¡ en el directorio de trabajo (getwd())</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-_join-y-exportar-datos" class="level4" data-number="3.7.1">
<h4 data-number="3.7.1" class="anchored" data-anchor-id="ejercicio-_join-y-exportar-datos"><span class="header-section-number">3.7.1</span> ğŸ§© <em>Ejercicio: *_join() y exportar datos</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image3_flickr.jpg" class="img-fluid"></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response y pixar_films</p></li>
<li><p>Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()</p></li>
<li><p>Une ambos datasets en uno solo para tener en un mismo data frame toda la informaciÃ³n. Elige el campo mÃ¡s apropiado de uniÃ³n</p></li>
<li><p>Guarda el nuevo set de datos como pixar_joint</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente imagen: <a href="https://www.flickr.com/photos/harshlight/6988729286" class="uri">https://www.flickr.com/photos/harshlight/6988729286</a> (CC BY 2.0)</p>
</section>
</section>
<section id="ejercicio-final-manejo-de-datos" class="level3" data-number="3.8">
<h3 data-number="3.8" class="anchored" data-anchor-id="ejercicio-final-manejo-de-datos"><span class="header-section-number">3.8</span> ğŸ§© <em>Ejercicio final manejo de datos</em></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/palmer_penguins.png" class="img-fluid"></td>
<td>Queremos estudiar caracterÃ­sticas fÃ­sicas de los pingÃ¼inos y relacionarlas con el tipo de isla donde viven. Para ello, realiza las siguientes tareas utilizando exclusivamente funciones del tidyverse:</td>
</tr>
</tbody>
</table>
<p>ğŸ§ Instala el paquete palmerpenguins y cÃ¡rgalo</p>
<p>ğŸ§ Crea un data frame con dos columnas, la primera denominada â€œislands_infoâ€ con los valores â€œTorgersenâ€, â€œBiscoeâ€, â€œDreamâ€ y otra llamada â€œprotected_areaâ€ con los valores â€œSiâ€, â€œNoâ€, â€œSiâ€</p>
<p>ğŸ§Selecciona los pinguinos que tengan picos de mÃ¡s de 40mm (bill_length_mm) y que pesen menos de 4.5kg (recuerda que puedes ver mÃ¡s informaciÃ³n de tu dataset en ?penguins)</p>
<p>ğŸ§De los datos filtrados conserva Ãºnicamente las columnas species, island, bill_length_mm, bill_depth_mm y body_mass_g</p>
<p>ğŸ§AÃ±ade una columna llamada bill_ratio que calcule la relaciÃ³n entre longitud y profundidad del pico</p>
<p>ğŸ§Une el resultado con el dataset islands_info, de forma que cada pingÃ¼ino quede asociado a si su isla es un Ã¡rea protegida.</p>
<p>ğŸ§Crea una columna categoria_peso con valores â€œligeroâ€, â€œmedioâ€, â€œpesadoâ€segÃºn los umbrales que quieras o, mÃ¡s dificil, con terciles de body_mass.</p>
<p>ğŸ§Si no lo has hecho, organiza todos los pasos anteriores (excepto cargar el paquete y crear el data frame) en un solo flujo de trabajo</p>
<p>ğŸ§Cuenta cuantos individuos hay ligeros, medios y pesados en zonas protegidas vs zonas no protegidas</p>
<p>ğŸ§(EXTRA) Responde a las siguientes preguntas: Â¿Cual es la mÃ¡xima relaciÃ³n entre longitud y profundidad del pico de los individuos en zonas protegidas? Â¿y no protegidas?</p>
</section>
</section>
<section id="introducciÃ³n-a-la-programaciÃ³n-con-funciones" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="introducciÃ³n-a-la-programaciÃ³n-con-funciones"><span class="header-section-number">4</span> IntroducciÃ³n a la programaciÃ³n con funciones</h2>
<section id="quÃ©-es-una-funcion" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="quÃ©-es-una-funcion"><span class="header-section-number">4.1</span> Â¿QuÃ© es una funcion?</h3>
<p>Una caracterÃ­stica clave de R son las funciones. Las funciones son una serie de intruccciones agrupadas para lograr un resultado especÃ­fico. MÃ¡s concretamente, son mÃ³dulos de cÃ³digo â€˜autocontenidosâ€™ que realizan una tarea especÃ­fica. Normalmente reciben algÃºn tipo de estructura de datos (valor, vector, data frame, etc.), la procesan y devuelven un resultado.</p>
<p><img src="images/funcion.png" class="img-fluid"></p>
<p>El uso general de una funciÃ³n consiste en escribir el nombre de la funciÃ³n seguido de parÃ©ntesis. Por ejemplo, la funcion head() en R nos permite ver las primeras filas de un data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(msleep, <span class="at">n=</span><span class="dv">10</span>L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 Ã— 11
   name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Cheetâ€¦ Acinâ€¦ carni Carnâ€¦ lc                  12.1      NA        NA      11.9
 2 Owl mâ€¦ Aotus omni  Primâ€¦ &lt;NA&gt;                17         1.8      NA       7  
 3 Mountâ€¦ Aploâ€¦ herbi Rodeâ€¦ nt                  14.4       2.4      NA       9.6
 4 Greatâ€¦ Blarâ€¦ omni  Soriâ€¦ lc                  14.9       2.3       0.133   9.1
 5 Cow    Bos   herbi Artiâ€¦ domesticated         4         0.7       0.667  20  
 6 Threeâ€¦ Bradâ€¦ herbi Piloâ€¦ &lt;NA&gt;                14.4       2.2       0.767   9.6
 7 Northâ€¦ Callâ€¦ carni Carnâ€¦ vu                   8.7       1.4       0.383  15.3
 8 Vespeâ€¦ Caloâ€¦ &lt;NA&gt;  Rodeâ€¦ &lt;NA&gt;                 7        NA        NA      17  
 9 Dog    Canis carni Carnâ€¦ domesticated        10.1       2.9       0.333  13.9
10 Roe dâ€¦ Caprâ€¦ herbi Artiâ€¦ lc                   3        NA        NA      21  
# â„¹ 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Los valores de entrada se llaman argumentos y pueden incluir tanto el objeto (estructura de datos) como especificaciones que modifican el modo en el que la funciÃ³n opera (por ejemplo, opciones o parÃ¡metros).</p>
<p>En el ejemplo de la funciÃ³n head() el objeto serÃ­a un data frame (en este caso el data frame msleep) y el argumento â€œnâ€ indicarÃ­a el nÃºmero de filas a mostrar.</p>
<p>Otro ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>recetas<span class="ot">&lt;-</span><span class="fu">read_delim</span>(<span class="at">file=</span><span class="st">"data/cuisines.csv"</span>, <span class="co"># argumento "file" </span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">delim=</span><span class="st">","</span>)                  <span class="co"># argumento "delim"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 2218 Columns: 17
â”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Delimiter: ","
chr   (5): name, country, url, author, ingredients
dbl  (11): calories, fat, carbs, protein, avg_rating, total_ratings, reviews...
date  (1): date_published

â„¹ Use `spec()` to retrieve the full column specification for this data.
â„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Cuando consultamos la ayuda de R lo que consultamos es cuales son los argumentos de la funcion.</p>
<section id="ejercicio-consultar-la-funciÃ³n-matrix" class="level4" data-number="4.1.1">
<h4 data-number="4.1.1" class="anchored" data-anchor-id="ejercicio-consultar-la-funciÃ³n-matrix"><span class="header-section-number">4.1.1</span> ğŸ§© Ejercicio: consultar la funciÃ³n matrix()</h4>
<p>Consulta la ayuda de la funciÃ³n matrix. Â¿Cuantos argumentos tiene?. Genera una matriz con esta funcion usando todos los argumentos.</p>
</section>
</section>
<section id="funciones-definidas-por-el-usuario-para-quÃ©" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="funciones-definidas-por-el-usuario-para-quÃ©"><span class="header-section-number">4.2</span> Funciones definidas por el usuario Â¿Para quÃ©?</h3>
<p>AdemÃ¡s de las funciones que nos ofrece R en los diferentes paquetes, tambiÃ©n podemos crear nuestras propias funciones. Esto resulta muy Ãºtil cuando necesiutamos realizar una tarea para la cual no existe una funcion especÃ­fica en R. Un ejemplo de creaciÃ³n de una funciÃ³n:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estandarizar (media 0 y desv tipica 1) las calorias, grasas carbohidratos y proteÃ­nas</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>recetas_Z <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span> </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">calories_Z =</span> (calories <span class="sc">-</span> <span class="fu">mean</span>(calories, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(calories, <span class="at">na.rm=</span>T),</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fat_Z =</span> (fat <span class="sc">-</span> <span class="fu">mean</span>(fat, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(fat, <span class="at">na.rm=</span>T),</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">carbs_Z =</span> (carbs <span class="sc">-</span> <span class="fu">mean</span>(carbs, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(carbs, <span class="at">na.rm=</span>T),</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">protein_z =</span> (protein <span class="sc">-</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(protein, <span class="at">na.rm=</span>T))</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="co"># funciÃ³n que estandariza</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>estandarizar_variable <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>recetas_Z <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span> </span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">calories_Z =</span> <span class="fu">estandarizar_variable</span>(calories),</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">fat_Z =</span> <span class="fu">estandarizar_variable</span>(fat),</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">carbs_Z =</span> <span class="fu">estandarizar_variable</span>(carbs),</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">protein_z =</span> <span class="fu">estandarizar_variable</span>(protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La ventajas de usar funciones son:</p>
<ul>
<li><p><strong>ReutilizaciÃ³n de cÃ³digo:</strong> Las funciones permiten encapsular pasos repetidos en una Ãºnica unidad que puedes llamar muchas veces, reduciendo duplicaciÃ³n y errores.</p></li>
<li><p><strong>AbstracciÃ³n y claridad:</strong> Al ocultar detalles de implementaciÃ³n dentro de una funciÃ³n, el flujo principal del script queda mÃ¡s limpio y fÃ¡cil de entender.</p></li>
<li><p><strong>Modularidad y mantenimiento:</strong> Dividir el trabajo en funciones pequeÃ±as facilita probar, depurar y actualizar partes concretas sin afectar el resto del cÃ³digo.</p></li>
<li><p><strong>ParÃ¡metros y flexibilidad:</strong> Los <strong>argumentos</strong> permiten adaptar el comportamiento de una funciÃ³n sin cambiar su cÃ³digo interno, lo que favorece la generalizaciÃ³n y la experimentaciÃ³n.</p></li>
<li><p><strong>ComposiciÃ³n y reutilizaciÃ³n avanzada:</strong> Las funciones pueden combinarse (una funciÃ³n llama a otra), lo que facilita construir pipelines y procesos complejos a partir de bloques simples.</p></li>
<li><p><strong>Compatibilidad con ecosistema R:</strong> Muchas librerÃ­as y herramientas en R esperan o devuelven funciones; escribir funciones propias facilita integrarlas con <code>apply</code>, <code>purrr</code>, <code>dplyr</code>, <code>knitr</code> y otras herramientas del ecosistema.</p></li>
</ul>
<p><img src="images/funcion_reutilizacion.png" class="img-fluid"></p>
</section>
<section id="cuando-hay-que-usar-funciones" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="cuando-hay-que-usar-funciones"><span class="header-section-number">4.3</span> Â¿Cuando hay que usar funciones?</h3>
<p>Se recomienda seguir el principio â€œdo not repeat yourselfâ€ (<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself#:~:text=%22Don't%20repeat%20yourself%22,redundancy%20in%20the%20first%20place.">DRY principle</a>): cada unidad de conocimiento o informaciÃ³n debe tener una representaciÃ³n Ãºnica, inequÃ­voca y autoritativa en un sistema.</p>
<p>Escribir una funciÃ³n ya merece la pena cuando has copiado y pegado mÃ¡s de dos veces lo mismo (donâ€™t be WET! - Write Everything Twice). Cuantas mÃ¡s veces estÃ© repetido un cÃ³digo, en mÃ¡s sitios necesitarÃ¡s actualizarlo si hay algun cambio y mÃ¡s aumenta la probabilidad de error.</p>
</section>
<section id="tipos-de-funciones" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="tipos-de-funciones"><span class="header-section-number">4.4</span> Tipos de funciones</h3>
<p>SegÃºn el tipo de output generado hay dos tipos de funciones:</p>
<ul>
<li><p>Las <strong>funciones de transformaciÃ³n</strong> (<em>pure functions</em>): transforman el objeto que entra en la funciÃ³n (primer argumento) y devuelven otro objeto o el anterior modificado.</p></li>
<li><p>Las <strong>funciones secundarias</strong> (<em>side-effect functions</em>): tienen efectos colaterales y ejecutan una acciÃ³n, como guardar un archivo, una variable o dibujar un plot. Algunos ejemplos de funciones secundarias que se usan comunmente son: <code>library()</code>, <code>setwd()</code>, <code>plot()</code>, <code>write_delim()</code>â€¦</p></li>
</ul>
</section>
<section id="cÃ³mo-escribir-una-funciÃ³n" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="cÃ³mo-escribir-una-funciÃ³n"><span class="header-section-number">4.5</span> CÃ³mo escribir una funciÃ³n</h3>
<p>En general, sintÃ¡cticamente, las funciones tienen tres componentes:</p>
<ul>
<li>FunciÃ³n para crear la funcion <code>function().</code> Se le asigna un nombre para poder reutilizarla</li>
<li>Argumentos: lista de entradas.
<ul>
<li>Argumentos que especifican los datos de entrada</li>
<li>Argumentos que especifican detalles de la ejecuciÃ³n de la funciÃ³n (se suelen colocar despues y tienen valores por defecto, si no los especificamos la funciÃ³n se ejecuta con los valores por defecto)</li>
</ul></li>
<li>Cuerpo: trozo de cÃ³digo que sigue a <code>function()</code>, tradicionalmente entre llaves.
<ul>
<li>La Ãºltima expresiÃ³n ejecutada en una funciÃ³n es el valor de retorno.</li>
</ul></li>
</ul>
<p><img src="images/funcion_componentes.png" class="img-fluid"></p>
<section id="ejercicio-consultar-la-funciÃ³n-sort" class="level4" data-number="4.5.1">
<h4 data-number="4.5.1" class="anchored" data-anchor-id="ejercicio-consultar-la-funciÃ³n-sort"><span class="header-section-number">4.5.1</span> ğŸ§© Ejercicio: consultar la funciÃ³n sort()</h4>
<ul>
<li><p>Ordena el vector c(5, 8, 6, 2, 4, 5, NA) usando la funcion sort()</p></li>
<li><p>Utiliza el argumento â€œdecreasingâ€ para ordenarlo de mayor a menor (consulta la ayuda para ver como se usa este argumento). Â¿QuÃ© valor tiene por defecto?</p></li>
<li><p>Â¿Que otro argumento tiene la funcion que especifica detalles de la ejecuciÃ³n? CÃ¡mbialo a otro valor que no sea su valor por defecto.</p></li>
<li><p>Â¿Cual es el valor de retorno de la funciÃ³n?</p></li>
</ul>
<p>Cuando escribimos una funcion tenemos que especificar estos componentes. Ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>escribe_suma <span class="ot">&lt;-</span> <span class="cf">function</span>(n1,n2) { <span class="co">#argumentos de entrada n1 y n2</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  suma<span class="ot">&lt;-</span>n1<span class="sc">+</span>n2 <span class="co">#cuerpo de la funcion: paso intermedio</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"La suma de "</span>,n1,<span class="st">" mas "</span>, n2, <span class="st">" es: "</span>, suma) <span class="co"># cuerpo de la funcion: valor de retorno</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="fu">escribe_suma</span>(<span class="dv">10</span>,<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La suma de 10 mas 100 es: 110"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">escribe_suma</span>(<span class="dv">33</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La suma de 33 mas 2 es: 35"</code></pre>
</div>
</div>
<p>ğŸ’¡Atajo para escribir funciones: escribir la palabra fun + tabulador</p>
<p>ğŸ“ Es conveniente usar comentarios (#) para explicar el razonamiento detrÃ¡s de tus funciones.</p>
</section>
<section id="ejercicio-primera-funciÃ³n" class="level4" data-number="4.5.2">
<h4 data-number="4.5.2" class="anchored" data-anchor-id="ejercicio-primera-funciÃ³n"><span class="header-section-number">4.5.2</span> ğŸ§© Ejercicio: primera funciÃ³n</h4>
<ol type="1">
<li><p>Crea una funciÃ³n que sirva para calcular el Ã¡rea de habitaciones cuadradas o rectangulares. Para ello crea una funciÃ³n de dos argumentos (el ancho de la habitaciÃ³n y el largo) y que devuelva el Ã¡rea.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>mi_funcion <span class="ot">&lt;-</span> <span class="cf">function</span>(largo, ancho) {</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Escribe el cÃ³digo aquÃ­</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Queremos saber el precio de enlosar la habitaciÃ³n. Para ello aÃ±ade un tercer argumento con el precio por metro cuadrado.</p></li>
<li><p>Â¿Cuanto cuesta enlosar una habitaciÃ³n de 10x16m con un tipo de losa que cuesta 5â‚¬ el metro cuadrado? Â¿Y una de 32x4m con una que cuesta 16â‚¬ por metro cuadrado?</p></li>
</ol>
</section>
<section id="ejercicio-funcion-de-media-aritmÃ©tica" class="level4" data-number="4.5.3">
<h4 data-number="4.5.3" class="anchored" data-anchor-id="ejercicio-funcion-de-media-aritmÃ©tica"><span class="header-section-number">4.5.3</span> ğŸ§© Ejercicio: funcion de media aritmÃ©tica</h4>
<p>Crea una funciÃ³n que calcule la media aritmÃ©tica de los valores de un vector (sin usar la funciÃ³n mean()). De tal manera que si introducimos, por ejemplo, el vector c(1, 8, 18) nos devuelva el valor 9</p>
<ul>
<li><p>Pista1: sum() nos da el valor de la suma de los elementos de un vector # prueba sum(c(1, 2, 3)) para comprobarlo</p></li>
<li><p>Pista 2: length() nos da la longitud (numero de elementos) del vector.</p></li>
</ul>
</section>
</section>
<section id="iteraciones-con-bucles-for" class="level3" data-number="4.6">
<h3 data-number="4.6" class="anchored" data-anchor-id="iteraciones-con-bucles-for"><span class="header-section-number">4.6</span> Iteraciones con bucles for</h3>
<p>Una <strong>iteraciÃ³n</strong> en programaciÃ³n es la <strong>repeticiÃ³n controlada</strong> de un bloque de instrucciones hasta que se cumple una condiciÃ³n o se alcanza un nÃºmero de repeticiones; cada vez que se ejecuta ese bloque se llama <strong>una iteraciÃ³n.</strong></p>
<p><img src="images/funcion_iteracion.png" class="img-fluid"></p>
<p>En R, el <code>for</code> itera sobre los elementos de una <strong>secuencia</strong> (por ejemplo <code>1:10</code>, un vector o una lista) y ejecuta el cuerpo del bucle una vez por cada elemento. La variable de control (i) toma el valor de cada elemento en cada iteraciÃ³n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">+</span><span class="dv">10</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11
[1] 12
[1] 13
[1] 14
[1] 15</code></pre>
</div>
</div>
<p>Para programar un bucle es necesario definir tres partes diferentes: la salida, la secuencia y el cuerpo</p>
<ol type="1">
<li><p>Salida: el espacio de la salida, es decir, primero tenemos que crear un espacio donde se va a ir almacenando el resultado del bucle. Puede ser un vector, una listaâ€¦</p></li>
<li><p>Secuencia: sobre lo que queremos iterar. Cada ejecuciÃ³n del bucle <em>for</em> asignarÃ¡ un valor diferente a <code>i</code>, la variable control. La variable control puede ser una secuencia de nÃºmeros o tambiÃ©n una secuencia de elementos de un vector o de una lista.</p></li>
<li><p>Cuerpo del bucle: aquÃ­ determinamos lo que queremos que haga cada iteraciÃ³n. Se ejecuta repetidamente, cada vez con un valor diferente para <code>i</code>.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Ejemplo bucle 1:</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Salida</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>salida<span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"integer"</span>,<span class="dv">5</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>salida <span class="co"># veo que es un vector de 0 (vacio)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){ <span class="co"># 1:5 es la secuencia</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  salida[[i]] <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">10</span> <span class="co">#cuerpo del bucle</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>salida <span class="co"># ahora tiene el resultado del bucle</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11 12 13 14 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo bucle 2:</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>salida<span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"character"</span>,<span class="dv">5</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>salida</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "" "" "" "" ""</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>semana5<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"lunes"</span>, <span class="st">"martes"</span>,<span class="st">"miercoles"</span>,<span class="st">"jueves"</span>,<span class="st">"viernes"</span>)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(semana5)){</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  salida[[j]]<span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"hoy es "</span>, semana5[[j]])</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-creando-bucles-for" class="level4" data-number="4.6.1">
<h4 data-number="4.6.1" class="anchored" data-anchor-id="ejercicio-creando-bucles-for"><span class="header-section-number">4.6.1</span> ğŸ§© Ejercicio: creando bucles for</h4>
<p>Elige al menos una de las siguientes opciones y crea un bucle:</p>
<ul>
<li><p>A partir del vector v&lt;- c(1,2,3,4), crea un vector w donde el pimer elemento de w sea el primer de v al cuadrado mÃ¡s uno y asÃ­ sucesivamente.</p></li>
<li><p>A partir de una lista con los dataframes de tidyverse msleep, diamonds y mpg, crea una nueva lista pero seleccionado solo las columnas que empiecen por â€œcâ€ y las filas de la 10 a la 20.</p></li>
<li><p>Genera un bucle para leer los archivos df1 a df5 de la carpeta data y almacenarlos en una lista. Pista: consulta la funcion list.files() y mira cuidadosamente todos los argumentos.</p></li>
</ul>
</section>
</section>
<section id="iteraciones-con-funcionales" class="level3" data-number="4.7">
<h3 data-number="4.7" class="anchored" data-anchor-id="iteraciones-con-funcionales"><span class="header-section-number">4.7</span> Iteraciones con funcionales</h3>
<p>Un funcional es una funciÃ³n que toma una funciÃ³n como entrada y devuelve un vector u otro tipo de objeto como salida. Un uso comun de los funcionales es como sustitutos de los bucles for. En R base los funcionales que sustituyen a los bucles for son las funciones de la familia apply (apply(), lapply(), tapply(), etc). En la colecciÃ³n de paquetes de tidyverse, el equivalente a estos funcionales son los provistos por el paquete purr:: map().</p>
<p>Para programar un funcional, primero, solucionamos el problema para un elemento. DespuÃ©s, generamos una funciÃ³n que nos permita tener la soluciÃ³n en una funciÃ³n . Por Ãºltimo, aplicamos la funciÃ³n a todos los elementos que estamos interesados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>x10<span class="ot">&lt;-</span> <span class="cf">function</span>(x) x<span class="sc">*</span><span class="dv">10</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, x10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 10

[[2]]
[1] 20

[[3]]
[1] 30</code></pre>
</div>
</div>
<p>Usando map funciÃ³n operarÃ¡ en todos los elementos de <code>x</code>, es decir, cada valor si <code>x</code> es un vector, cada columna si <code>x</code> es un <code>data.frame</code>, o cada elemento si <code>x</code> es una lista. Toma un vector y una funciÃ³n, llama a la funciÃ³n una vez por cada elemento del vector y devuelve los resultados en una lista. <code>map(1:3, f)</code> es equivalente a <code>list(f(1), f(2), f(3))</code>. Es el equivalente de <code>lapply()</code> de R base.</p>
<p><img src="images/map.png" class="img-fluid"></p>
<p><code>map()</code> devuelve una lista, lo que la convierte en la mÃ¡s general de la familia <code>map</code> porque puedes poner cualquier cosa en una lista. Pero es incÃ³modo devolver una lista cuando una estructura de datos mÃ¡s simple bastarÃ­a, por eso existen cuatro variantes mÃ¡s especÃ­ficas: <code>map_lgl()</code>, <code>map_int()</code>, <code>map_dbl()</code> y <code>map_chr()</code>. Cada una devuelve un vector atÃ³mico del tipo especificado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>mi_lista<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="st">"hola"</span>, <span class="dv">2</span>, <span class="fl">25.1</span>, <span class="cn">TRUE</span>)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada componente de la lista dime el tipo de dato y devuelve un vector tipo character</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(mi_lista, typeof)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character" "double"    "double"    "logical"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada componente de la lista devuelve un vector lÃ³gico indicando TRUE si es de tipo doble y FALSE si no lo es</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_lgl</span>(mi_lista, is.double)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada columna del dataframe devuelve un vector numÃ©rico con la media (NA cuando en esa columna no hay nÃºmeros)</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(msleep, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>        name        genus         vore        order conservation  sleep_total 
          NA           NA           NA           NA           NA     10.43373 
   sleep_rem  sleep_cycle        awake      brainwt       bodywt 
          NA           NA     13.56747           NA    166.13635 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada columna del dataframe devuelve el nÃºmero de casos Ãºnicos</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_int</span>(msleep, n_distinct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        name        genus         vore        order conservation  sleep_total 
          83           77            5           19            7           65 
   sleep_rem  sleep_cycle        awake      brainwt       bodywt 
          33           23           65           54           82 </code></pre>
</div>
</div>
<section id="ejercicio-map" class="level4" data-number="4.7.1">
<h4 data-number="4.7.1" class="anchored" data-anchor-id="ejercicio-map"><span class="header-section-number">4.7.1</span> ğŸ§© Ejercicio: map()</h4>
<ul>
<li><p>Genera un vector, una funciÃ³n y aplica la funciÃ³n a cada uno de los elementos del vector utilizando <code>map()</code>.</p></li>
<li><p>para la lista list(a = 1:3, b = letters[1:5], c = c(TRUE, FALSE)) utiliza map() para generar una salida que sea una lista con las longitudes de cada elemento. Â¿Que funcion tendrÃ­as que utilizar si quieres que la salida sea un vector de nÃºmeros enteros en lugar de una lista?</p></li>
<li><p>para la lista_num &lt;- list(a = c(1,2,3), b = c(4,5), c = 6) aplica la funcion de la familia map para obtener la media de cada elemento a, b, c en un vector numÃ©rico.</p></li>
</ul>
</section>
</section>
</section>
<section id="para-seguir-practicando" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="para-seguir-practicando"><span class="header-section-number">5</span> ğŸ§© <em>Para seguir practicandoâ€¦</em></h2>
<p>El paquete swirl es un paquete de R que transforma la consola de R en un tutor interactivo que presenta lecciones, plantea preguntas (texto, numÃ©ricas, opciones) y evalÃºa tus respuestas en tiempo real. A parte de los mÃ³dulos de aprendizaje que vienenen el propio paquete permite crear mÃ³dulos nuevos.</p>
<p><img src="images/swirl_R.png" class="img-fluid"></p>
<p>Paquete <a href="https://swirlstats.com/">swirl</a>: aprendiendo R en R</p>
<p>Si quieres seguir practicando con el paquete tidyverse puedes seguir el siguiente curso obtenido de <a href="https://github.com/sysilviakim/swirl-tidy" class="uri">https://github.com/sysilviakim/swirl-tidy</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"swirl"</span>)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(swirl)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install_course_github</span>(<span class="st">"sysilviakim"</span>, <span class="st">"swirl-tidy"</span>)</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="fu">swirl</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="enlaces-de-interÃ©s" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="enlaces-de-interÃ©s"><span class="header-section-number">6</span> Enlaces de interÃ©s</h2>
<ul>
<li><p><a href="https://rstudio-education.github.io/hopr/">Hands-On Programming with R</a></p></li>
<li><p><a href="https://r4ds.had.co.nz/transform.html">R for data Science (Data transformation)</a></p></li>
<li><p><a href="http://adv-r.had.co.nz/Style.html">Style guide</a></p></li>
<li><p><a href="https://www.tidyverse.org">PÃ¡gina web de <em>tidyverse</em></a></p></li>
<li><p><a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">Cheat sheet the dplyr</a></p></li>
<li><p><a href="https://www.revistaecosistemas.net/index.php/ecosistemas/article/view/2129">Quince consejos para mejorar nuestro cÃ³digo y flujo de trabajo con R</a></p></li>
</ul>
<hr>
<details>
<summary>
Session Info
</summary>
</details>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>