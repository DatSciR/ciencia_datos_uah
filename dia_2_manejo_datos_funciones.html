<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marina Rodes Blanco, Juli√°n Tijerin Trivi√±o, Paloma Ruiz Benito y Ver√≥nica Cruz Alonso,">
<meta name="dcterms.date" content="2026-12-01">

<title>D√≠a 2 - Manejo y visualizaci√≥n de datos en R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="dia_2_manejo_datos_funciones_files/libs/clipboard/clipboard.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/popper.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dia_2_manejo_datos_funciones_files/libs/quarto-html/anchor.min.js"></script>
<link href="dia_2_manejo_datos_funciones_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dia_2_manejo_datos_funciones_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dia_2_manejo_datos_funciones_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">√çndice</h2>
   
  <ul>
  <li><a href="#s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio" id="toc-s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio" class="nav-link active" data-scroll-target="#s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio"><span class="header-section-number">1</span> S√≠ntesis del d√≠a 1: Introducci√≥n a R y a R studio</a>
  <ul>
  <li><a href="#modelo-de-ciencia-de-datos" id="toc-modelo-de-ciencia-de-datos" class="nav-link" data-scroll-target="#modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</a></li>
  <li><a href="#concepto-b√°sicos" id="toc-concepto-b√°sicos" class="nav-link" data-scroll-target="#concepto-b√°sicos"><span class="header-section-number">1.2</span> Concepto b√°sicos</a></li>
  <li><a href="#buenas-pr√°cticas-en-la-gesti√≥n-de-datos" id="toc-buenas-pr√°cticas-en-la-gesti√≥n-de-datos" class="nav-link" data-scroll-target="#buenas-pr√°cticas-en-la-gesti√≥n-de-datos"><span class="header-section-number">1.3</span> Buenas pr√°cticas en la gesti√≥n de datos</a></li>
  <li><a href="#tipos-de-objetos-y-operaciones-b√°sicas-en-r" id="toc-tipos-de-objetos-y-operaciones-b√°sicas-en-r" class="nav-link" data-scroll-target="#tipos-de-objetos-y-operaciones-b√°sicas-en-r"><span class="header-section-number">1.4</span> Tipos de objetos y operaciones b√°sicas en R</a></li>
  <li><a href="#qu√©-son-los-datos-ordenados" id="toc-qu√©-son-los-datos-ordenados" class="nav-link" data-scroll-target="#qu√©-son-los-datos-ordenados"><span class="header-section-number">1.5</span> ¬øQu√© son los datos ordenados?</a></li>
  <li><a href="#qu√©-es-tidyverse" id="toc-qu√©-es-tidyverse" class="nav-link" data-scroll-target="#qu√©-es-tidyverse"><span class="header-section-number">1.6</span> ¬øQu√© es tidyverse?</a>
  <ul>
  <li><a href="#ejercicio-repaso-del-d√≠a-anterior" id="toc-ejercicio-repaso-del-d√≠a-anterior" class="nav-link" data-scroll-target="#ejercicio-repaso-del-d√≠a-anterior"><span class="header-section-number">1.6.1</span> üß© Ejercicio: <em>repaso</em> <em>del d√≠a anterior</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#introducci√≥n" id="toc-introducci√≥n" class="nav-link" data-scroll-target="#introducci√≥n"><span class="header-section-number">2</span> Introducci√≥n</a>
  <ul>
  <li><a href="#objetivos-de-la-sesi√≥n" id="toc-objetivos-de-la-sesi√≥n" class="nav-link" data-scroll-target="#objetivos-de-la-sesi√≥n"><span class="header-section-number">2.1</span> Objetivos de la sesi√≥n</a></li>
  <li><a href="#set-de-datos-con-los-que-vamos-a-trabajar" id="toc-set-de-datos-con-los-que-vamos-a-trabajar" class="nav-link" data-scroll-target="#set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.2</span> Set de datos con los que vamos a trabajar</a></li>
  </ul></li>
  <li><a href="#manejo-y-gesti√≥n-de-datos" id="toc-manejo-y-gesti√≥n-de-datos" class="nav-link" data-scroll-target="#manejo-y-gesti√≥n-de-datos"><span class="header-section-number">3</span> Manejo y gesti√≥n de datos</a>
  <ul>
  <li><a href="#resumen-de-funciones" id="toc-resumen-de-funciones" class="nav-link" data-scroll-target="#resumen-de-funciones"><span class="header-section-number">3.1</span> Resumen de funciones</a></li>
  <li><a href="#importar-y-renombrar-datos" id="toc-importar-y-renombrar-datos" class="nav-link" data-scroll-target="#importar-y-renombrar-datos"><span class="header-section-number">3.2</span> Importar y renombrar datos</a>
  <ul>
  <li><a href="#read_delim-leer-datos-desde-fuera-de-r" id="toc-read_delim-leer-datos-desde-fuera-de-r" class="nav-link" data-scroll-target="#read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.2.1</span> Read_delim: leer datos desde fuera de R</a></li>
  <li><a href="#rename-cambiar-nombres-de-variables-columnas" id="toc-rename-cambiar-nombres-de-variables-columnas" class="nav-link" data-scroll-target="#rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2.2</span> Rename: cambiar nombres de variables (columnas)</a></li>
  </ul></li>
  <li><a href="#funciones-b√°sicas-de-filtrado-y-selecci√≥n" id="toc-funciones-b√°sicas-de-filtrado-y-selecci√≥n" class="nav-link" data-scroll-target="#funciones-b√°sicas-de-filtrado-y-selecci√≥n"><span class="header-section-number">3.3</span> Funciones b√°sicas de filtrado y selecci√≥n</a>
  <ul>
  <li><a href="#slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" id="toc-slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" class="nav-link" data-scroll-target="#slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico"><span class="header-section-number">3.3.1</span> Slice: filtrar filas seg√∫n el √≠ndice num√©rico</a></li>
  <li><a href="#filter-filtrar-filas-utilizando-condiciones" id="toc-filter-filtrar-filas-utilizando-condiciones" class="nav-link" data-scroll-target="#filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">3.3.2</span> Filter: filtrar filas utilizando condiciones</a>
  <ul class="collapse">
  <li><a href="#ejercicio-slice-filter-arrange" id="toc-ejercicio-slice-filter-arrange" class="nav-link" data-scroll-target="#ejercicio-slice-filter-arrange"><span class="header-section-number">3.3.2.1</span> üß© <em>Ejercicio: slice(), filter(), arrange()</em></a></li>
  </ul></li>
  <li><a href="#select-sirve-para-seleccionar-columnas-utilizando-condiciones" id="toc-select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="nav-link" data-scroll-target="#select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">3.3.3</span> Select: sirve para seleccionar columnas utilizando condiciones</a>
  <ul class="collapse">
  <li><a href="#ejercicio-select" id="toc-ejercicio-select" class="nav-link" data-scroll-target="#ejercicio-select"><span class="header-section-number">3.3.3.1</span> üß© <em>Ejercicio: select()</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#transformar-los-datos-y-calcular-nuevas-variables" id="toc-transformar-los-datos-y-calcular-nuevas-variables" class="nav-link" data-scroll-target="#transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">3.4</span> Transformar los datos y calcular nuevas variables</a>
  <ul>
  <li><a href="#mutate-crear-modificar-o-eliminar-columnas" id="toc-mutate-crear-modificar-o-eliminar-columnas" class="nav-link" data-scroll-target="#mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">3.4.1</span> Mutate: crear, modificar o eliminar columnas</a>
  <ul class="collapse">
  <li><a href="#ejercicio-mutate" id="toc-ejercicio-mutate" class="nav-link" data-scroll-target="#ejercicio-mutate"><span class="header-section-number">3.4.1.1</span> üß© <em>Ejercicio: mutate()</em></a></li>
  </ul></li>
  <li><a href="#summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" id="toc-summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" class="nav-link" data-scroll-target="#summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila"><span class="header-section-number">3.4.2</span> Summarise y group by: generar un nuevo <code>data.frame</code> resumiendo cada grupo a una fila</a></li>
  <li><a href="#ejercicio-group_by-summrise" id="toc-ejercicio-group_by-summrise" class="nav-link" data-scroll-target="#ejercicio-group_by-summrise"><span class="header-section-number">3.4.3</span> üß© <em>Ejercicio: group_by(), summrise()</em></a></li>
  </ul></li>
  <li><a href="#pivot-transformar-datos-a-formato-largo-o-ancho" id="toc-pivot-transformar-datos-a-formato-largo-o-ancho" class="nav-link" data-scroll-target="#pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">3.5</span> Pivot: transformar datos a formato largo o ancho</a>
  <ul>
  <li><a href="#ejercicio-transformar-datos-largo-ancho" id="toc-ejercicio-transformar-datos-largo-ancho" class="nav-link" data-scroll-target="#ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">3.5.1</span> üß© <em>Ejercicio: transformar datos largo ancho</em></a></li>
  </ul></li>
  <li><a href="#unir-data.frames-joins" id="toc-unir-data.frames-joins" class="nav-link" data-scroll-target="#unir-data.frames-joins"><span class="header-section-number">3.6</span> Unir data.frames: joins</a></li>
  <li><a href="#guardar-datos-con-write_delim" id="toc-guardar-datos-con-write_delim" class="nav-link" data-scroll-target="#guardar-datos-con-write_delim"><span class="header-section-number">3.7</span> Guardar datos con Write_delim:</a>
  <ul>
  <li><a href="#ejercicio-_join-y-exportar-datos" id="toc-ejercicio-_join-y-exportar-datos" class="nav-link" data-scroll-target="#ejercicio-_join-y-exportar-datos"><span class="header-section-number">3.7.1</span> üß© <em>Ejercicio: *_join() y exportar datos</em></a></li>
  </ul></li>
  <li><a href="#ejercicio-final-manejo-de-datos" id="toc-ejercicio-final-manejo-de-datos" class="nav-link" data-scroll-target="#ejercicio-final-manejo-de-datos"><span class="header-section-number">3.8</span> üß© <em>Ejercicio final manejo de datos</em></a></li>
  </ul></li>
  <li><a href="#introducci√≥n-a-la-programaci√≥n-con-funciones" id="toc-introducci√≥n-a-la-programaci√≥n-con-funciones" class="nav-link" data-scroll-target="#introducci√≥n-a-la-programaci√≥n-con-funciones"><span class="header-section-number">4</span> Introducci√≥n a la programaci√≥n con funciones</a>
  <ul>
  <li><a href="#qu√©-es-una-funcion" id="toc-qu√©-es-una-funcion" class="nav-link" data-scroll-target="#qu√©-es-una-funcion"><span class="header-section-number">4.1</span> ¬øQu√© es una funcion?</a>
  <ul>
  <li><a href="#ejercicio-consultar-la-funci√≥n-matrix" id="toc-ejercicio-consultar-la-funci√≥n-matrix" class="nav-link" data-scroll-target="#ejercicio-consultar-la-funci√≥n-matrix"><span class="header-section-number">4.1.1</span> üß© Ejercicio: consultar la funci√≥n matrix()</a></li>
  </ul></li>
  <li><a href="#funciones-definidas-por-el-usuario-para-qu√©" id="toc-funciones-definidas-por-el-usuario-para-qu√©" class="nav-link" data-scroll-target="#funciones-definidas-por-el-usuario-para-qu√©"><span class="header-section-number">4.2</span> Funciones definidas por el usuario ¬øPara qu√©?</a></li>
  <li><a href="#cuando-hay-que-usar-funciones" id="toc-cuando-hay-que-usar-funciones" class="nav-link" data-scroll-target="#cuando-hay-que-usar-funciones"><span class="header-section-number">4.3</span> ¬øCuando hay que usar funciones?</a></li>
  <li><a href="#tipos-de-funciones" id="toc-tipos-de-funciones" class="nav-link" data-scroll-target="#tipos-de-funciones"><span class="header-section-number">4.4</span> Tipos de funciones</a></li>
  <li><a href="#c√≥mo-escribir-una-funci√≥n" id="toc-c√≥mo-escribir-una-funci√≥n" class="nav-link" data-scroll-target="#c√≥mo-escribir-una-funci√≥n"><span class="header-section-number">4.5</span> C√≥mo escribir una funci√≥n</a>
  <ul>
  <li><a href="#ejercicio-consultar-la-funci√≥n-sort" id="toc-ejercicio-consultar-la-funci√≥n-sort" class="nav-link" data-scroll-target="#ejercicio-consultar-la-funci√≥n-sort"><span class="header-section-number">4.5.1</span> üß© Ejercicio: consultar la funci√≥n sort()</a></li>
  <li><a href="#ejercicio-primera-funci√≥n" id="toc-ejercicio-primera-funci√≥n" class="nav-link" data-scroll-target="#ejercicio-primera-funci√≥n"><span class="header-section-number">4.5.2</span> üß© Ejercicio: primera funci√≥n</a></li>
  <li><a href="#ejercicio-funcion-de-media-aritm√©tica" id="toc-ejercicio-funcion-de-media-aritm√©tica" class="nav-link" data-scroll-target="#ejercicio-funcion-de-media-aritm√©tica"><span class="header-section-number">4.5.3</span> üß© Ejercicio: funcion de media aritm√©tica</a></li>
  </ul></li>
  <li><a href="#iteraciones-con-bucles-for" id="toc-iteraciones-con-bucles-for" class="nav-link" data-scroll-target="#iteraciones-con-bucles-for"><span class="header-section-number">4.6</span> Iteraciones con bucles for</a>
  <ul>
  <li><a href="#ejercicio-creando-bucles-for" id="toc-ejercicio-creando-bucles-for" class="nav-link" data-scroll-target="#ejercicio-creando-bucles-for"><span class="header-section-number">4.6.1</span> üß© Ejercicio: creando bucles for</a></li>
  </ul></li>
  <li><a href="#iteraciones-con-funcionales" id="toc-iteraciones-con-funcionales" class="nav-link" data-scroll-target="#iteraciones-con-funcionales"><span class="header-section-number">4.7</span> Iteraciones con funcionales</a>
  <ul>
  <li><a href="#ejercicio-map" id="toc-ejercicio-map" class="nav-link" data-scroll-target="#ejercicio-map"><span class="header-section-number">4.7.1</span> üß© Ejercicio: map()</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#para-seguir-practicando" id="toc-para-seguir-practicando" class="nav-link" data-scroll-target="#para-seguir-practicando"><span class="header-section-number">5</span> üß© <em>Para seguir practicando‚Ä¶</em></a></li>
  <li><a href="#enlaces-de-inter√©s" id="toc-enlaces-de-inter√©s" class="nav-link" data-scroll-target="#enlaces-de-inter√©s"><span class="header-section-number">6</span> Enlaces de inter√©s</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="dia_2_manejo_datos_funciones.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">D√≠a 2 - Manejo y visualizaci√≥n de datos en R</h1>
<p class="subtitle lead">Gesti√≥n de datos y funciones en R</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marina Rodes Blanco, Juli√°n Tijerin Trivi√±o, Paloma Ruiz Benito y Ver√≥nica Cruz Alonso, </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">12/01/2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/01_logo-vA_pant293.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:40.0%"></p>
</figure>
</div>
<section id="s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio"><span class="header-section-number">1</span> S√≠ntesis del d√≠a 1: Introducci√≥n a R y a R studio</h2>
<section id="modelo-de-ciencia-de-datos" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</h3>
<div id="fig-datascience" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/datascience.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Modelo de ciencia de datos de Hadley Wickham, Mine √áetinkaya-Rundel y Garrett Grolemund. Traducido de https://r4ds.hadley.nz/intro#fig-ds-diagram
</figcaption>
</figure>
</div>
</section>
<section id="concepto-b√°sicos" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="concepto-b√°sicos"><span class="header-section-number">1.2</span> Concepto b√°sicos</h3>
<ul>
<li><p>R es un lenguaje de programaci√≥n din√°mico</p>
<ul>
<li><p>Objetos: ‚Äúcualquier cosa‚Äù que almacenamos en R</p></li>
<li><p>Funciones: las acciones (reciben informaci√≥n -argumentos- y devuelven un resultado)</p></li>
<li><p>Paquetes: conjunto de funciones ya dise√±adas. La primera vez los instalamos con install.packages() las siguientes veces s√≥lo hace falta cargarlos.</p></li>
</ul></li>
<li><p><strong>RStudio</strong>: entorno de desarrollo integrado para programar en R (<em>IDE: Integrated Development Environemnt</em>). Tiene cuatro zonas diferenciadas:</p></li>
</ul>
<pre><code>-   el editor de c√≥digo (scripts abiertos y ventana de c√≥digo),

-   el navegador del espacio de trabajo (con el entorno ‚Äì*environment-* y el historial de comandos)

-   la consola (donde se ejecuta el c√≥digo),

-   el mix de abajo a la derecha (Archivos, Gr√°ficos, Paquetes, Ayuda).</code></pre>
</section>
<section id="buenas-pr√°cticas-en-la-gesti√≥n-de-datos" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="buenas-pr√°cticas-en-la-gesti√≥n-de-datos"><span class="header-section-number">1.3</span> Buenas pr√°cticas en la gesti√≥n de datos</h3>
<ul>
<li>Trabajar por proyectos</li>
<li>Usar teclas r√°pidas</li>
<li>Consultar documentacion / pedir ayuda</li>
<li>C√≥digo reproducible</li>
<li>Nombrar adecuadamente: seguir estilo (guia de estilo)</li>
</ul>
</section>
<section id="tipos-de-objetos-y-operaciones-b√°sicas-en-r" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="tipos-de-objetos-y-operaciones-b√°sicas-en-r"><span class="header-section-number">1.4</span> Tipos de objetos y operaciones b√°sicas en R</h3>
<ul>
<li>Vectores</li>
<li>Matrices</li>
<li>Data frames</li>
<li>Listas</li>
</ul>
</section>
<section id="qu√©-son-los-datos-ordenados" class="level3" data-number="1.5">
<h3 data-number="1.5" class="anchored" data-anchor-id="qu√©-son-los-datos-ordenados"><span class="header-section-number">1.5</span> ¬øQu√© son los datos ordenados?</h3>
<p><img src="images/tidydata_1.png" class="img-fluid"></p>
<p><img src="images/tidydata_3.png" class="img-fluid"></p>
</section>
<section id="qu√©-es-tidyverse" class="level3" data-number="1.6">
<h3 data-number="1.6" class="anchored" data-anchor-id="qu√©-es-tidyverse"><span class="header-section-number">1.6</span> ¬øQu√© es tidyverse?</h3>
<p><img src="images/tidyverse_packages.png" class="img-fluid"></p>
<section id="ejercicio-repaso-del-d√≠a-anterior" class="level4" data-number="1.6.1">
<h4 data-number="1.6.1" class="anchored" data-anchor-id="ejercicio-repaso-del-d√≠a-anterior"><span class="header-section-number">1.6.1</span> üß© Ejercicio: <em>repaso</em> <em>del d√≠a anterior</em></h4>
<ul>
<li>Crea un vector (mes) con los meses del a√±o (en n√∫mero)</li>
<li>Crea otro vector con el n√∫mero de d√≠as de cada mes y calcula la media y la desviaci√≥n t√≠pica</li>
<li>Junta los dos vectores en un data frame</li>
</ul>
</section>
</section>
</section>
<section id="introducci√≥n" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introducci√≥n"><span class="header-section-number">2</span> Introducci√≥n</h2>
<section id="objetivos-de-la-sesi√≥n" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="objetivos-de-la-sesi√≥n"><span class="header-section-number">2.1</span> Objetivos de la sesi√≥n</h3>
<ul>
<li><p>Entender la sintaxis y las principales funciones de los paquetes dplyr y tidyr de tidyverse.</p></li>
<li><p>Utilizar estas librer√≠as para manipular, reordenar y operar con un set de datos.</p></li>
<li><p>Comprender la estructura de las funciones y aprender a escribir funciones en R.</p></li>
<li><p>Aplicar funciones en programaci√≥n iterativa por medio de bucles y la funci√≥n map() del paquete purr.</p></li>
</ul>
</section>
<section id="set-de-datos-con-los-que-vamos-a-trabajar" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.2</span> Set de datos con los que vamos a trabajar</h3>
<p>Vamos a trabajar con datos de Tidytuesday y de las librerias de tidyverse principalmente. En todos los casos son datos reales.</p>
<p>Tidytuesday es un proyecto comunitario de ciencia de datos impulsado por la comunidad de R, especialmente por usuarios de tidyverse. Cada martes se publica un dataset limpio y listo para analizar, junto con una breve descripci√≥n y enlaces a la fuente original.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidyTuesday_logo.png" class="img-fluid figure-img"></p>
<figcaption>TidyTuesday</figcaption>
</figure>
</div>
<p>De este proyecto vamos a trabajar principalmente con el set de datos cuisine:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/recetas1_copilot.png" class="img-fluid"></td>
<td><p><strong>CUISINE</strong></p>
<p>El dataset de **Cuisine** de TidyTuesday recopila informaci√≥n sobre recetas y tipos de cocina (origen, valor nutricional, tiempo de preparaci√≥n etc.)</p></td>
</tr>
</tbody>
</table>
<p>Tidyverse tambien tiene sus propios set de datos con los que podemos practicar. Puedes consultarlo con la funci√≥n data(). De los sets de datos de tidyverse vamos a trabajar con msleep</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 80%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid"></td>
<td><p><strong>MSLEEP</strong></p>
<p>El dataset **msleep** contiene informaci√≥n sobre **el sue√±o de distintos** mam√≠feros. Incluye variables biol√≥gicas, ecol√≥gicas y taxon√≥micas, as√≠ como medidas relacionadas con sus patrones de sue√±o</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="manejo-y-gesti√≥n-de-datos" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="manejo-y-gesti√≥n-de-datos"><span class="header-section-number">3</span> Manejo y gesti√≥n de datos</h2>
<section id="resumen-de-funciones" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="resumen-de-funciones"><span class="header-section-number">3.1</span> Resumen de funciones</h3>
<p><img src="images/resumen_funciones.png" class="img-fluid"></p>
</section>
<section id="importar-y-renombrar-datos" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="importar-y-renombrar-datos"><span class="header-section-number">3.2</span> Importar y renombrar datos</h3>
<section id="read_delim-leer-datos-desde-fuera-de-r" class="level4" data-number="3.2.1">
<h4 data-number="3.2.1" class="anchored" data-anchor-id="read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.2.1</span> <a href="https://readr.tidyverse.org/reference/read_delim.html">Read_delim</a>: leer datos desde fuera de R</h4>
<p>Leer datos que tenemos almacenados, como por ejemplo, una tabla en formato csv.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_type =</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"f"</span>, <span class="at">servings=</span><span class="st">"f"</span>),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># puedo especificar el tipo de dato (country como factor)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>recetas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(recetas)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name                                   country         url           
 Length:2218        Canadian                    :  67   Length:2218       
 Class :character   Brazilian                   :  67   Class :character  
 Mode  :character   Filipino                    :  66   Mode  :character  
                    Australian and New Zealander:  65                     
                    Cuban                       :  65                     
                    Chinese                     :  65                     
                    (Other)                     :1823                     
    author          date_published       ingredients           calories     
 Length:2218        Min.   :2009-02-09   Length:2218        Min.   :   3.0  
 Class :character   1st Qu.:2022-11-02   Class :character   1st Qu.: 190.0  
 Mode  :character   Median :2024-07-14   Mode  :character   Median : 319.5  
                    Mean   :2023-10-27                      Mean   : 358.4  
                    3rd Qu.:2025-01-06                      3rd Qu.: 477.0  
                    Max.   :2025-07-29                      Max.   :2266.0  
                                                            NA's   :32      
      fat             carbs           protein         avg_rating   
 Min.   :  0.00   Min.   :  1.00   Min.   :  0.00   Min.   :1.000  
 1st Qu.:  7.00   1st Qu.: 13.00   1st Qu.:  4.00   1st Qu.:4.300  
 Median : 15.00   Median : 26.00   Median : 11.00   Median :4.600  
 Mean   : 18.76   Mean   : 31.96   Mean   : 16.61   Mean   :4.509  
 3rd Qu.: 26.00   3rd Qu.: 45.00   3rd Qu.: 25.00   3rd Qu.:4.800  
 Max.   :225.00   Max.   :264.00   Max.   :159.00   Max.   :5.000  
 NA's   :55       NA's   :35       NA's   :39       NA's   :97     
 total_ratings       reviews         prep_time        cook_time     
 Min.   :  1.00   Min.   :  1.00   Min.   :   0.0   Min.   :  0.00  
 1st Qu.:  6.00   1st Qu.:  6.00   1st Qu.:  10.0   1st Qu.: 10.00  
 Median : 24.00   Median : 21.00   Median :  15.0   Median : 25.00  
 Mean   : 85.25   Mean   : 76.93   Mean   :  21.5   Mean   : 41.75  
 3rd Qu.: 87.00   3rd Qu.: 74.00   3rd Qu.:  25.0   3rd Qu.: 45.00  
 Max.   :997.00   Max.   :975.00   Max.   :1800.0   Max.   :600.00  
 NA's   :97       NA's   :108                                       
   total_time       servings  
 Min.   :    0   4      :487  
 1st Qu.:   35   6      :419  
 Median :   60   8      :396  
 Mean   :  171   12     :238  
 3rd Qu.:  120   10     :104  
 Max.   :14440   (Other):572  
                 NA's   :  2  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,218
Columns: 17
$ name           &lt;chr&gt; "Saganaki (Flaming Greek Cheese)", "Coney Island Knishe‚Ä¶
$ country        &lt;fct&gt; Greek, Jewish, Australian and New Zealander, Chilean, T‚Ä¶
$ url            &lt;chr&gt; "https://www.allrecipes.com/recipe/263750/flaming-greek‚Ä¶
$ author         &lt;chr&gt; "John Mitzewich", "John Mitzewich", "CHIPPENDALE", "Hei‚Ä¶
$ date_published &lt;date&gt; 2024-02-07, 2024-11-26, 2022-07-14, 2025-01-31, 2025-0‚Ä¶
$ ingredients    &lt;chr&gt; "1 (4 ounce) package kasseri cheese, 1 tablespoon water‚Ä¶
$ calories       &lt;dbl&gt; 391, 301, 64, 106, 449, 958, 378, 90, 157, 322, 4, NA, ‚Ä¶
$ fat            &lt;dbl&gt; 25, 17, 3, 9, 23, 24, 10, 5, 6, 16, 0, NA, 21, 2, 66, 8‚Ä¶
$ carbs          &lt;dbl&gt; 15, 31, 9, 7, 58, 144, 59, 10, 25, 39, 1, NA, 16, 63, 7‚Ä¶
$ protein        &lt;dbl&gt; 16, 7, 1, 1, 7, 46, 14, 1, 2, 7, 0, NA, 28, 6, 54, 17, ‚Ä¶
$ avg_rating     &lt;dbl&gt; 4.8, 4.6, 4.3, 5.0, 3.8, 4.4, 4.3, NA, 4.6, 5.0, 4.7, 4‚Ä¶
$ total_ratings  &lt;dbl&gt; 25, 10, 126, 1, 13, 40, 3, NA, 65, 2, 182, 2, 19, 16, 9‚Ä¶
$ reviews        &lt;dbl&gt; 22, 9, 104, 1, 11, 32, 3, NA, 55, 2, 138, 2, 15, 16, 84‚Ä¶
$ prep_time      &lt;dbl&gt; 10, 30, 20, 10, 30, 30, 30, 40, 0, 5, 5, 5, 10, 10, 20,‚Ä¶
$ cook_time      &lt;dbl&gt; 5, 75, 15, 0, 15, 165, 75, 30, 0, 5, 0, 25, 10, 50, 16,‚Ä¶
$ total_time     &lt;dbl&gt; 15, 180, 180, 10, 45, 675, 585, 155, 0, 10, 5, 30, 50, ‚Ä¶
$ servings       &lt;fct&gt; 2, 16, 12, 6, 15, 6, 6, 84, 24, 1, 21, 8, 4, 10, 4, 8, ‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="rename-cambiar-nombres-de-variables-columnas" class="level4" data-number="3.2.2">
<h4 data-number="3.2.2" class="anchored" data-anchor-id="rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2.2</span> <a href="https://dplyr.tidyverse.org/reference/rename.html">Rename</a>: cambiar nombres de variables (columnas)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio el nombre y a√±ado la unidad de medida (gramos)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>recetas_g <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fat_g =</span> fat,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">carbs_g =</span> carbs,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nombre nuevo = nombre viejo</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">protein_g =</span> protein</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>üìù Ajustar sangr√≠a de c√≥digo: Ctrl + i; Reformatear c√≥digo: Ctrl + Shift + a</p>
</section>
</section>
<section id="funciones-b√°sicas-de-filtrado-y-selecci√≥n" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="funciones-b√°sicas-de-filtrado-y-selecci√≥n"><span class="header-section-number">3.3</span> Funciones b√°sicas de filtrado y selecci√≥n</h3>
<section id="slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" class="level4" data-number="3.3.1">
<h4 data-number="3.3.1" class="anchored" data-anchor-id="slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico"><span class="header-section-number">3.3.1</span> <a href="https://dplyr.tidyverse.org/reference/slice.html">Slice</a>: filtrar filas seg√∫n el √≠ndice num√©rico</h4>
<p>Seleccionar filas concretas del set de datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># warning: false</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> <span class="co"># shortcut para el pipe: CTRL + SHIFT + M</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="co"># la primera fila</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># la fila 1 y la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
2 Tex-Mex ‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># de la fila 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
2 Coney Is‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
3 Diana's ‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
5 Tex-Mex ‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
6 Newfound‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) <span class="co"># todas las filas excepto de la 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,213 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 2 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 3 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 4 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
 5 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
 6 Traci's‚Ä¶ Filipi‚Ä¶ http‚Ä¶ Traci‚Ä¶ 2022-08-28     2 tablespo‚Ä¶        4     0     1
 7 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 8 Lomo de‚Ä¶ Cuban   http‚Ä¶ lillo‚Ä¶ 2024-12-19     1 tablespo‚Ä¶      389    21    16
 9 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
10 Chef Jo‚Ä¶ Southe‚Ä¶ http‚Ä¶ John ‚Ä¶ 2023-12-08     1  whole c‚Ä¶     1115    66    75
# ‚Ñπ 2,203 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="filter-filtrar-filas-utilizando-condiciones" class="level4" data-number="3.3.2">
<h4 data-number="3.3.2" class="anchored" data-anchor-id="filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">3.3.2</span> <a href="https://dplyr.tidyverse.org/reference/filter.html">Filter</a>: filtrar filas utilizando condiciones</h4>
<p>Se necesita un vector de filtrado que contenga valores l√≥gicos (TRUE/FALSE).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span>) <span class="co"># filtrar por filas que cumplen un patr√≥n </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 3 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 4 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
 5 Chilean‚Ä¶ Chilean http‚Ä¶ Alici‚Ä¶ 2022-10-18     1 tablespo‚Ä¶      530    28    54
 6 Empanad‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
 7 Pastel ‚Ä¶ Chilean http‚Ä¶ Epicu‚Ä¶ 2025-04-08     2  eggs, 1‚Ä¶      435    21    38
 8 Pastel ‚Ä¶ Chilean http‚Ä¶ Cucin‚Ä¶ 2024-11-22     5 cups pot‚Ä¶      366    25    22
 9 Leche A‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2020-06-18     1 quart wh‚Ä¶      258     9    25
10 Chilean‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
# ‚Ñπ 12 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todass las recetas chilenas</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">&amp;</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: AND</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
2 Pebre     Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
3 Empanada‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
5 Lemon Pi‚Ä¶ Chilean http‚Ä¶ Ruper‚Ä¶ 2025-02-01     1 tablespo‚Ä¶       NA    NA    NA
6 Isa's Co‚Ä¶ Chilean http‚Ä¶ Wonde‚Ä¶ 2022-09-26     20  whole ‚Ä¶       NA    NA    NA
7 Pisco So‚Ä¶ Chilean http‚Ä¶ DORITA 2022-10-03     4 cups ice‚Ä¶       NA    NA    NA
8 Gambas P‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-14     10 cloves ‚Ä¶      278    19     4
9 Pisco So‚Ä¶ Chilean http‚Ä¶ PattyQ 2025-01-31     2 cups pis‚Ä¶       NA    NA    NA
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas que se preparan en menos de 60 minutos</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">&amp;</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: OR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
2 Pebre     Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
3 Empanada‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
5 Lemon Pi‚Ä¶ Chilean http‚Ä¶ Ruper‚Ä¶ 2025-02-01     1 tablespo‚Ä¶       NA    NA    NA
6 Isa's Co‚Ä¶ Chilean http‚Ä¶ Wonde‚Ä¶ 2022-09-26     20  whole ‚Ä¶       NA    NA    NA
7 Pisco So‚Ä¶ Chilean http‚Ä¶ DORITA 2022-10-03     4 cups ice‚Ä¶       NA    NA    NA
8 Gambas P‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-14     10 cloves ‚Ä¶      278    19     4
9 Pisco So‚Ä¶ Chilean http‚Ä¶ PattyQ 2025-01-31     2 cups pis‚Ä¶       NA    NA    NA
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas (independientemente del tiempo de preparaci√≥n) o bien aquellas recetas que se preparen en menos de 60mins (independientemente del pa√≠s)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chilean"</span>, <span class="st">"Brazilian"</span>, <span class="st">"Peruvian"</span>)) <span class="co"># combinar criterios: %in% </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 3 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
 4 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 5 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 6 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Socce‚Ä¶ 2023-02-13     1 cup brow‚Ä¶      255     0    66
 7 Pollo S‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Laure‚Ä¶ 2025-02-03     2 large sk‚Ä¶      351    11    37
 8 Citrus ‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Lorna  2025-01-28     ¬Ω cup fres‚Ä¶      440    29    17
 9 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
10 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Cacau  2020-03-05     3 tablespo‚Ä¶      451    11    83
# ‚Ñπ 117 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas de pa√≠ses del cono sur. Es equivalente a:</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Brazilian"</span><span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Peruvian"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 3 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
 4 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 5 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 6 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Socce‚Ä¶ 2023-02-13     1 cup brow‚Ä¶      255     0    66
 7 Pollo S‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Laure‚Ä¶ 2025-02-03     2 large sk‚Ä¶      351    11    37
 8 Citrus ‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Lorna  2025-01-28     ¬Ω cup fres‚Ä¶      440    29    17
 9 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
10 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Cacau  2020-03-05     3 tablespo‚Ä¶      451    11    83
# ‚Ñπ 117 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
<section id="ejercicio-slice-filter-arrange" class="level5" data-number="3.3.2.1">
<h5 data-number="3.3.2.1" class="anchored" data-anchor-id="ejercicio-slice-filter-arrange"><span class="header-section-number">3.3.2.1</span> üß© <em>Ejercicio: slice(), filter(), arrange()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 79%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Lee el data.frame ‚Äúmsleep.csv‚Äù. Pista: el delimitador entre datos es la coma (‚Äú,‚Äù).</p></li>
<li><p>Crea un subset que NO contenga los animales dom√©sticos (campo conservation). ¬øCuantas son?</p></li>
<li><p>Crea un subset de datos que contenga las filas de la 1 a la 5 y de la 18 a la 20, sobre esos datos obten los animales carn√≠voros. Ordena seg√∫n las horas de sue√±o ¬øQu√© animal duerme m√°s horas?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="level4" data-number="3.3.3">
<h4 data-number="3.3.3" class="anchored" data-anchor-id="select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">3.3.3</span> <a href="https://dplyr.tidyverse.org/reference/select.html">Select</a>: sirve para seleccionar columnas utilizando condiciones</h4>
<p>Para ver como funciona esta funci√≥n vamos a usar un set de datos sobre el sue√±o de los mam√≠feros. Se llama ‚Äúmsleep‚Äù y viene en librer√≠a de tidyverse. Puedes encontrar mas informaci√≥n sobre este set de datos en ?msleep</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ?select</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein) <span class="co">#solo nos interesan las columnas con informacion nutricional de cada receta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede usar un patron de texto pra seleccionar colmnas</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"time"</span>)) <span class="co"># solo nos interesan las columnas relacionadas con el tiempo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 3
   prep_time cook_time total_time
       &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1        10         5         15
 2        30        75        180
 3        20        15        180
 4        10         0         10
 5        30        15         45
 6        30       165        675
 7        30        75        585
 8        40        30        155
 9         0         0          0
10         5         5         10
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># se pueden utilizar todo tipo de patrones de texto: https://rstudio.github.io/cheatsheets/strings.pdf</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name,author, <span class="fu">everything</span>()) <span class="co"># se puede usar para reordenar variables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     author country url   date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt;   &lt;chr&gt; &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ John ‚Ä¶ Greek   http‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ John ‚Ä¶ Jewish  http‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ CHIPP‚Ä¶ Austra‚Ä¶ http‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Heidi  Chilean http‚Ä¶ 2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Ann    Tex-Mex http‚Ä¶ 2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ MomWh‚Ä¶ Canadi‚Ä¶ http‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Buckw‚Ä¶ Italian http‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ TheOt‚Ä¶ Danish  http‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Laura‚Ä¶ Amish ‚Ä¶ http‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Luis ‚Ä¶ Spanish http‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">recipes_name=</span>name, country, author, reviews) <span class="co"># y para renombrarlas a la vez que hacemos la seleccion</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 4
   recipes_name                                   country         author reviews
   &lt;chr&gt;                                          &lt;fct&gt;           &lt;chr&gt;    &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                Greek           John ‚Ä¶      22
 2 Coney Island Knishes                           Jewish          John ‚Ä¶       9
 3 Diana's Hawaiian Bread Rolls                   Australian and‚Ä¶ CHIPP‚Ä¶     104
 4 Chilean Pebre                                  Chilean         Heidi        1
 5 Tex-Mex Sheet Cake                             Tex-Mex         Ann         11
 6 Newfoundland Jigg's Dinner                     Canadian        MomWh‚Ä¶      32
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew) Italian         Buckw‚Ä¶       3
 8 Danish Butter Cookies                          Danish          TheOt‚Ä¶      NA
 9 Lemon Poppy Seed Amish Friendship Bread        Amish and Menn‚Ä¶ Laura‚Ä¶      55
10 Pan con Tomate (Spanish Tomato Bread)          Spanish         Luis ‚Ä¶       2
# ‚Ñπ 2,208 more rows</code></pre>
</div>
</div>
<section id="ejercicio-select" class="level5" data-number="3.3.3.1">
<h5 data-number="3.3.3.1" class="anchored" data-anchor-id="ejercicio-select"><span class="header-section-number">3.3.3.1</span> üß© <em>Ejercicio: select()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture2_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, crea un nuevo data.frame que contenga las variables relacionadas con el sue√±o.</p></li>
<li><p>Con el data set de msleep, crea un nuevo data.frame que contenga todas las variables excepto el estado de conservacion.</p></li>
<li><p>(extra) Crea un nuevo objeto (data frame) con el orden, g√©nero y nombre al principio y que incluya todas las dem√°s columnas excepto el tiempo despierto.</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="transformar-los-datos-y-calcular-nuevas-variables" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">3.4</span> Transformar los datos y calcular nuevas variables</h3>
<section id="mutate-crear-modificar-o-eliminar-columnas" class="level4" data-number="3.4.1">
<h4 data-number="3.4.1" class="anchored" data-anchor-id="mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">3.4.1</span> <a href="https://dplyr.tidyverse.org/reference/mutate.html">Mutate</a>: crear, modificar o eliminar columnas</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir una variable </span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># desde cero</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># utilizando una variable para calcular otra (ej.- el numero de personas que       han dejado una puntuaci√≥n pero no han escrito un review)</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews) <span class="sc">|&gt;</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    ID, </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    name<span class="sc">:</span>date_published, </span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    total_ratings,</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    reviews,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    num_ratings_no_review,</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">everything</span>()</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 19
      ID name          country url   author date_published total_ratings reviews
   &lt;int&gt; &lt;chr&gt;         &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;                 &lt;dbl&gt;   &lt;dbl&gt;
 1     1 Saganaki (Fl‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07                25      22
 2     2 Coney Island‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26                10       9
 3     3 Diana's Hawa‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14               126     104
 4     4 Chilean Pebre Chilean http‚Ä¶ Heidi  2025-01-31                 1       1
 5     5 Tex-Mex Shee‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18                13      11
 6     6 Newfoundland‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12                40      32
 7     7 Pasta e Ceci‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12                 3       3
 8     8 Danish Butte‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19                NA      NA
 9     9 Lemon Poppy ‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21                65      55
10    10 Pan con Toma‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02                 2       2
# ‚Ñπ 2,208 more rows
# ‚Ñπ 11 more variables: num_ratings_no_review &lt;dbl&gt;, ingredients &lt;chr&gt;,
#   calories &lt;dbl&gt;, fat &lt;dbl&gt;, carbs &lt;dbl&gt;, protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;,
#   prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;, servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sobreescribir una variable.</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fct_recode sirve para redefinir los niveles de un factor (ojo sintaxis:          new_name="old_name")</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span> </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>      ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#utilizar mas de una variable para generar otra</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"highest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"lowest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 18
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 9 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;, classification &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer todo lo anterior concatenando todo el proceso y guardar el set de datos:</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>recetas_modif <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span>),</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"highest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"lowest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-mutate" class="level5" data-number="3.4.1.1">
<h5 data-number="3.4.1.1" class="anchored" data-anchor-id="ejercicio-mutate"><span class="header-section-number">3.4.1.1</span> üß© <em>Ejercicio: mutate()</em></h5>
<table class="caption-top table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture3_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, incluye una nueva columna con el porcentaje de horas que duerme cada animal al d√≠a.</p></li>
<li><p>Haz una clasificaci√≥n que incluya tres categor√≠as: carnivoros amenazados, herviboros amenazados y otros. Para ello tienes que basarte en las columnas ‚Äúvore‚Äù y ‚Äúconservation‚Äù. Segun la UICN se considera amenazado cuando est√° en las categor√≠as vulnerable (vu), endangered (en) o critically endangered (cr).</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila" class="level4" data-number="3.4.2">
<h4 data-number="3.4.2" class="anchored" data-anchor-id="summarise-y-group-by-generar-un-nuevo-data.frame-resumiendo-cada-grupo-a-una-fila"><span class="header-section-number">3.4.2</span> <a href="https://dplyr.tidyverse.org/reference/summarise.html">Summarise</a> y <a href="https://dplyr.tidyverse.org/reference/group_by.html">group by</a>: generar un nuevo <code>data.frame</code> resumiendo cada grupo a una fila</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># m√≠nimo y m√°ximo tiempo de preparaci√≥n</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prep_time_max =</span> <span class="fu">max</span>(prep_time),</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">prep_time_total_min =</span> <span class="fu">min</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 2
  prep_time_max prep_time_total_min
          &lt;dbl&gt;               &lt;dbl&gt;
1          1800                   0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># minimo, m√°ximo y media de prote√≠nas de todas las recetas</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein),</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1          NA           NA           0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a> <span class="do">## Ojo! si no queremos que tenga en cuenta los NA hay que a√±adir argumento na.rm=T</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1         159         16.6           0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lo mismo que antes, pero por pa√≠s</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 √ó 4
   country                      protein_max protein_mean protein_min
   &lt;fct&gt;                              &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
 1 Greek                                 65        15.9            5
 2 Jewish                                62        11.7            0
 3 Australian and New Zealander          27         4.61           0
 4 Chilean                               54        12.3            0
 5 Tex-Mex                               56        23.2            0
 6 Canadian                              58        15.3            0
 7 Italian                               91        25.4            5
 8 Danish                                35         7.61           5
 9 Amish and Mennonite                   69         8.92           0
10 Spanish                               95        19.9            0
# ‚Ñπ 39 more rows</code></pre>
</div>
</div>
</section>
<section id="ejercicio-group_by-summrise" class="level4" data-number="3.4.3">
<h4 data-number="3.4.3" class="anchored" data-anchor-id="ejercicio-group_by-summrise"><span class="header-section-number">3.4.3</span> üß© <em>Ejercicio: group_by(), summrise()</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture4_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, cuenta el n√∫mero de especies estudiadas por orden (order)</p></li>
<li><p>Calcula el promedio de horas de sue√±o seg√∫n el tipo de alimentaci√≥n ¬øduemen mas los carnivoros, los herb√≠voros o los insect√≠voros estudiados en este dataset?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="pivot-transformar-datos-a-formato-largo-o-ancho" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">3.5</span> <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">Pivot</a>: transformar datos a formato largo o ancho</h3>
<p>Nos permite transformar datos de formato largo a ancho y viceversa. Nos puede convenir una forma u otra seg√∫n lo que queramos hacer con lo datos: presentarlos en una tabla, hacer transformaciones o an√°lisis, hacer un gr√°fico etc.</p>
<p>En la siguiente imagen, extra√≠da de <a href="https://www.epirhandbook.com/en/">The Epidemiologist R Handbook</a> se puede ver en qu√© consiste esta transformaci√≥n.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer_epirhandbook.png" class="img-fluid figure-img" width="555"></p>
<figcaption>Pivot data transformation</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam<span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span>  <span class="fu">select</span>(name, country, fat, carbs,protein) <span class="sc">|&gt;</span>  <span class="fu">filter</span>(country<span class="sc">==</span><span class="st">"Vietnamese"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># transformamos a formato largo, incluyendo los valores de grasas, carbohidratos y proteinas en una columna llamada "nutritional_value</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_long <span class="ot">&lt;-</span> recetas_Vietnam <span class="sc">|&gt;</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>fat<span class="sc">:</span>protein, <span class="at">names_to=</span><span class="st">"nutritional_value"</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#volvemos al set original</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_wide<span class="ot">&lt;-</span> recetas_Vietnam_long <span class="sc">|&gt;</span> </span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>nutritional_value, <span class="at">values_from=</span>value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-transformar-datos-largo-ancho" class="level4" data-number="3.5.1">
<h4 data-number="3.5.1" class="anchored" data-anchor-id="ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">3.5.1</span> üß© <em>Ejercicio: transformar datos largo ancho</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image3_flickr.jpg" class="img-fluid"></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response y pixar_films</p></li>
<li><p>Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()</p></li>
<li><p>Une ambos datasets en uno solo para tener en un mismo data frame toda la informaci√≥n. Elige el campo m√°s apropiado de uni√≥n</p></li>
<li><p>Guarda el nuevo set de datos como pixar_joint</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente imagen: <a href="https://www.flickr.com/photos/harshlight/17294952412" class="uri">https://www.flickr.com/photos/harshlight/17294952412</a> (CC BY 2.0)</p>
</section>
</section>
<section id="unir-data.frames-joins" class="level3" data-number="3.6">
<h3 data-number="3.6" class="anchored" data-anchor-id="unir-data.frames-joins"><span class="header-section-number">3.6</span> Unir data.frames: <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">joins</a></h3>
<p><code>*_join()</code> a√±ade columnas de <code>y</code> (segundo data.frame) a <code>x</code> (primer data.frame), haciendo coincidir las observaciones en funci√≥n de la variable com√∫n.</p>
<p><img src="images/joins_from_dataWrangling_RStudio_cheatsheet.png" class="img-fluid" width="559"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join: left, right, full, inner</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#datos de pais - capital- continente</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>paises <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"Espa√±a"</span>, <span class="st">"Francia"</span>, <span class="st">"Jap√≥n"</span>, <span class="st">"Brasil"</span>, <span class="st">"Sud√°frica"</span>),</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">capital =</span> <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Par√≠s"</span>, <span class="st">"Tokio"</span>, <span class="st">"Brasilia"</span>, <span class="st">"Pretoria"</span>),</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">continente =</span> <span class="fu">c</span>(<span class="st">"Europa"</span>, <span class="st">"Europa"</span>, <span class="st">"Asia"</span>, <span class="st">"Am√©rica"</span>, <span class="st">"√Åfrica"</span>)</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">#datos demogr√°ficos</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>demografia <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"Espa√±a"</span>, <span class="st">"Jap√≥n"</span>, <span class="st">"Brasil"</span>, <span class="st">"Canad√°"</span>, <span class="st">"Sud√°frica"</span>),</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">poblacion_millones =</span> <span class="fu">c</span>(<span class="fl">47.4</span>, <span class="fl">125.7</span>, <span class="fl">203.1</span>, <span class="fl">39.6</span>, <span class="fl">60.0</span>),</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">extension_km2 =</span> <span class="fu">c</span>(<span class="dv">505990</span>, <span class="dv">377975</span>, <span class="dv">8515767</span>, <span class="dv">9984670</span>, <span class="dv">1221037</span>)</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="co">#left join: se une al set de datos de pais los datos de demografia (si los hay)</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Francia   Par√≠s    Europa                   NA              NA
3 Jap√≥n     Tokio    Asia                    126.         377975
4 Brasil    Brasilia Am√©rica                 203.        8515767
5 Sud√°frica Pretoria √Åfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#right join: se une al set de datos de demografa los datos de pais (si los hay)</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Jap√≥n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia Am√©rica                 203.        8515767
4 Sud√°frica Pretoria √Åfrica                   60         1221037
5 Canad√°    &lt;NA&gt;     &lt;NA&gt;                     39.6       9984670</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">#inner join: une los paises presentes en los dos set de datos</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Jap√≥n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia Am√©rica                 203.        8515767
4 Sud√°frica Pretoria √Åfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#full join: une todos los paises presentes en uno u otro.</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>paises_demo_full_join<span class="ot">&lt;-</span><span class="fu">full_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="guardar-datos-con-write_delim" class="level3" data-number="3.7">
<h3 data-number="3.7" class="anchored" data-anchor-id="guardar-datos-con-write_delim"><span class="header-section-number">3.7</span> Guardar datos con <a href="https://readr.tidyverse.org/reference/write_delim.html">Write_delim</a>:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>(paises_demo_full_join, <span class="at">file =</span> <span class="st">"paises_demo_full_join.csv"</span>, <span class="at">delim =</span> <span class="st">";"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># en file hay que especificar el directorio donde queremos que se guarde. Si no, se guardar√° en el directorio de trabajo (getwd())</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-_join-y-exportar-datos" class="level4" data-number="3.7.1">
<h4 data-number="3.7.1" class="anchored" data-anchor-id="ejercicio-_join-y-exportar-datos"><span class="header-section-number">3.7.1</span> üß© <em>Ejercicio: *_join() y exportar datos</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image3_flickr.jpg" class="img-fluid"></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response y pixar_films</p></li>
<li><p>Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()</p></li>
<li><p>Une ambos datasets en uno solo para tener en un mismo data frame toda la informaci√≥n. Elige el campo m√°s apropiado de uni√≥n</p></li>
<li><p>Guarda el nuevo set de datos como pixar_joint</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente imagen: <a href="https://www.flickr.com/photos/harshlight/6988729286" class="uri">https://www.flickr.com/photos/harshlight/6988729286</a> (CC BY 2.0)</p>
</section>
</section>
<section id="ejercicio-final-manejo-de-datos" class="level3" data-number="3.8">
<h3 data-number="3.8" class="anchored" data-anchor-id="ejercicio-final-manejo-de-datos"><span class="header-section-number">3.8</span> üß© <em>Ejercicio final manejo de datos</em></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/palmer_penguins.png" class="img-fluid"></td>
<td>Queremos estudiar caracter√≠sticas f√≠sicas de los ping√ºinos y relacionarlas con el tipo de isla donde viven. Para ello, realiza las siguientes tareas utilizando exclusivamente funciones del tidyverse:</td>
</tr>
</tbody>
</table>
<p>üêß Instala el paquete palmerpenguins y c√°rgalo</p>
<p>üêß Crea un data frame con dos columnas, la primera denominada ‚Äúislands_info‚Äù con los valores ‚ÄúTorgersen‚Äù, ‚ÄúBiscoe‚Äù, ‚ÄúDream‚Äù y otra llamada ‚Äúprotected_area‚Äù con los valores ‚ÄúSi‚Äù, ‚ÄúNo‚Äù, ‚ÄúSi‚Äù</p>
<p>üêßSelecciona los pinguinos que tengan picos de m√°s de 40mm (bill_length_mm) y que pesen menos de 4.5kg (recuerda que puedes ver m√°s informaci√≥n de tu dataset en ?penguins)</p>
<p>üêßDe los datos filtrados conserva √∫nicamente las columnas species, island, bill_length_mm, bill_depth_mm y body_mass_g</p>
<p>üêßA√±ade una columna llamada bill_ratio que calcule la relaci√≥n entre longitud y profundidad del pico</p>
<p>üêßUne el resultado con el dataset islands_info, de forma que cada ping√ºino quede asociado a si su isla es un √°rea protegida.</p>
<p>üêßCrea una columna categoria_peso con valores ‚Äúligero‚Äù, ‚Äúmedio‚Äù, ‚Äúpesado‚Äùseg√∫n los umbrales que quieras o, m√°s dificil, con terciles de body_mass.</p>
<p>üêßSi no lo has hecho, organiza todos los pasos anteriores (excepto cargar el paquete y crear el data frame) en un solo flujo de trabajo</p>
<p>üêßCuenta cuantos individuos hay ligeros, medios y pesados en zonas protegidas vs zonas no protegidas</p>
<p>üêß(EXTRA) Responde a las siguientes preguntas: ¬øCual es la m√°xima relaci√≥n entre longitud y profundidad del pico de los individuos en zonas protegidas? ¬øy no protegidas?</p>
</section>
</section>
<section id="introducci√≥n-a-la-programaci√≥n-con-funciones" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="introducci√≥n-a-la-programaci√≥n-con-funciones"><span class="header-section-number">4</span> Introducci√≥n a la programaci√≥n con funciones</h2>
<section id="qu√©-es-una-funcion" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="qu√©-es-una-funcion"><span class="header-section-number">4.1</span> ¬øQu√© es una funcion?</h3>
<p>Una caracter√≠stica clave de R son las funciones. Las funciones son una serie de intruccciones agrupadas para lograr un resultado espec√≠fico. M√°s concretamente, son m√≥dulos de c√≥digo ‚Äòautocontenidos‚Äô que realizan una tarea espec√≠fica. Normalmente reciben alg√∫n tipo de estructura de datos (valor, vector, data frame, etc.), la procesan y devuelven un resultado.</p>
<p><img src="images/funcion.png" class="img-fluid"></p>
<p>El uso general de una funci√≥n consiste en escribir el nombre de la funci√≥n seguido de par√©ntesis. Por ejemplo, la funcion head() en R nos permite ver las primeras filas de un data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(msleep, <span class="at">n=</span><span class="dv">10</span>L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 11
   name   genus vore  order conservation sleep_total sleep_rem sleep_cycle awake
   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
 1 Cheet‚Ä¶ Acin‚Ä¶ carni Carn‚Ä¶ lc                  12.1      NA        NA      11.9
 2 Owl m‚Ä¶ Aotus omni  Prim‚Ä¶ &lt;NA&gt;                17         1.8      NA       7  
 3 Mount‚Ä¶ Aplo‚Ä¶ herbi Rode‚Ä¶ nt                  14.4       2.4      NA       9.6
 4 Great‚Ä¶ Blar‚Ä¶ omni  Sori‚Ä¶ lc                  14.9       2.3       0.133   9.1
 5 Cow    Bos   herbi Arti‚Ä¶ domesticated         4         0.7       0.667  20  
 6 Three‚Ä¶ Brad‚Ä¶ herbi Pilo‚Ä¶ &lt;NA&gt;                14.4       2.2       0.767   9.6
 7 North‚Ä¶ Call‚Ä¶ carni Carn‚Ä¶ vu                   8.7       1.4       0.383  15.3
 8 Vespe‚Ä¶ Calo‚Ä¶ &lt;NA&gt;  Rode‚Ä¶ &lt;NA&gt;                 7        NA        NA      17  
 9 Dog    Canis carni Carn‚Ä¶ domesticated        10.1       2.9       0.333  13.9
10 Roe d‚Ä¶ Capr‚Ä¶ herbi Arti‚Ä¶ lc                   3        NA        NA      21  
# ‚Ñπ 2 more variables: brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Los valores de entrada se llaman argumentos y pueden incluir tanto el objeto (estructura de datos) como especificaciones que modifican el modo en el que la funci√≥n opera (por ejemplo, opciones o par√°metros).</p>
<p>En el ejemplo de la funci√≥n head() el objeto ser√≠a un data frame (en este caso el data frame msleep) y el argumento ‚Äún‚Äù indicar√≠a el n√∫mero de filas a mostrar.</p>
<p>Otro ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>recetas<span class="ot">&lt;-</span><span class="fu">read_delim</span>(<span class="at">file=</span><span class="st">"data/cuisines.csv"</span>, <span class="co"># argumento "file" </span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">delim=</span><span class="st">","</span>)                  <span class="co"># argumento "delim"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 2218 Columns: 17
‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Delimiter: ","
chr   (5): name, country, url, author, ingredients
dbl  (11): calories, fat, carbs, protein, avg_rating, total_ratings, reviews...
date  (1): date_published

‚Ñπ Use `spec()` to retrieve the full column specification for this data.
‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Cuando consultamos la ayuda de R lo que consultamos es cuales son los argumentos de la funcion.</p>
<section id="ejercicio-consultar-la-funci√≥n-matrix" class="level4" data-number="4.1.1">
<h4 data-number="4.1.1" class="anchored" data-anchor-id="ejercicio-consultar-la-funci√≥n-matrix"><span class="header-section-number">4.1.1</span> üß© Ejercicio: consultar la funci√≥n matrix()</h4>
<p>Consulta la ayuda de la funci√≥n matrix. ¬øCuantos argumentos tiene?. Genera una matriz con esta funcion usando todos los argumentos.</p>
</section>
</section>
<section id="funciones-definidas-por-el-usuario-para-qu√©" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="funciones-definidas-por-el-usuario-para-qu√©"><span class="header-section-number">4.2</span> Funciones definidas por el usuario ¬øPara qu√©?</h3>
<p>Adem√°s de las funciones que nos ofrece R en los diferentes paquetes, tambi√©n podemos crear nuestras propias funciones. Esto resulta muy √∫til cuando necesiutamos realizar una tarea para la cual no existe una funcion espec√≠fica en R. Un ejemplo de creaci√≥n de una funci√≥n:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estandarizar (media 0 y desv tipica 1) las calorias, grasas carbohidratos y prote√≠nas</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>recetas_Z <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">calories_Z =</span> (calories <span class="sc">-</span> <span class="fu">mean</span>(calories, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(calories, <span class="at">na.rm=</span>T),</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">fat_Z =</span> (fat <span class="sc">-</span> <span class="fu">mean</span>(fat, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(fat, <span class="at">na.rm=</span>T),</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">carbs_Z =</span> (carbs <span class="sc">-</span> <span class="fu">mean</span>(carbs, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(carbs, <span class="at">na.rm=</span>T),</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">protein_z =</span> (protein <span class="sc">-</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T))<span class="sc">/</span><span class="fu">sd</span>(protein, <span class="at">na.rm=</span>T))</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co"># funci√≥n que estandariza</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>estandarizar_variable <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">/</span> <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>recetas_Z <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span> </span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">calories_Z =</span> <span class="fu">estandarizar_variable</span>(calories),</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">fat_Z =</span> <span class="fu">estandarizar_variable</span>(fat),</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">carbs_Z =</span> <span class="fu">estandarizar_variable</span>(carbs),</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">protein_z =</span> <span class="fu">estandarizar_variable</span>(protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La ventajas de usar funciones son:</p>
<ul>
<li><p><strong>Reutilizaci√≥n de c√≥digo:</strong> Las funciones permiten encapsular pasos repetidos en una √∫nica unidad que puedes llamar muchas veces, reduciendo duplicaci√≥n y errores.</p></li>
<li><p><strong>Abstracci√≥n y claridad:</strong> Al ocultar detalles de implementaci√≥n dentro de una funci√≥n, el flujo principal del script queda m√°s limpio y f√°cil de entender.</p></li>
<li><p><strong>Modularidad y mantenimiento:</strong> Dividir el trabajo en funciones peque√±as facilita probar, depurar y actualizar partes concretas sin afectar el resto del c√≥digo.</p></li>
<li><p><strong>Par√°metros y flexibilidad:</strong> Los <strong>argumentos</strong> permiten adaptar el comportamiento de una funci√≥n sin cambiar su c√≥digo interno, lo que favorece la generalizaci√≥n y la experimentaci√≥n.</p></li>
<li><p><strong>Composici√≥n y reutilizaci√≥n avanzada:</strong> Las funciones pueden combinarse (una funci√≥n llama a otra), lo que facilita construir pipelines y procesos complejos a partir de bloques simples.</p></li>
<li><p><strong>Compatibilidad con ecosistema R:</strong> Muchas librer√≠as y herramientas en R esperan o devuelven funciones; escribir funciones propias facilita integrarlas con <code>apply</code>, <code>purrr</code>, <code>dplyr</code>, <code>knitr</code> y otras herramientas del ecosistema.</p></li>
</ul>
<p><img src="images/funcion_reutilizacion.png" class="img-fluid"></p>
</section>
<section id="cuando-hay-que-usar-funciones" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="cuando-hay-que-usar-funciones"><span class="header-section-number">4.3</span> ¬øCuando hay que usar funciones?</h3>
<p>Se recomienda seguir el principio ‚Äúdo not repeat yourself‚Äù (<a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself#:~:text=%22Don't%20repeat%20yourself%22,redundancy%20in%20the%20first%20place.">DRY principle</a>): cada unidad de conocimiento o informaci√≥n debe tener una representaci√≥n √∫nica, inequ√≠voca y autoritativa en un sistema.</p>
<p>Escribir una funci√≥n ya merece la pena cuando has copiado y pegado m√°s de dos veces lo mismo (don‚Äôt be WET! - Write Everything Twice). Cuantas m√°s veces est√© repetido un c√≥digo, en m√°s sitios necesitar√°s actualizarlo si hay algun cambio y m√°s aumenta la probabilidad de error.</p>
</section>
<section id="tipos-de-funciones" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="tipos-de-funciones"><span class="header-section-number">4.4</span> Tipos de funciones</h3>
<p>Seg√∫n el tipo de output generado hay dos tipos de funciones:</p>
<ul>
<li><p>Las <strong>funciones de transformaci√≥n</strong> (<em>pure functions</em>): transforman el objeto que entra en la funci√≥n (primer argumento) y devuelven otro objeto o el anterior modificado.</p></li>
<li><p>Las <strong>funciones secundarias</strong> (<em>side-effect functions</em>): tienen efectos colaterales y ejecutan una acci√≥n, como guardar un archivo, una variable o dibujar un plot. Algunos ejemplos de funciones secundarias que se usan comunmente son: <code>library()</code>, <code>setwd()</code>, <code>plot()</code>, <code>write_delim()</code>‚Ä¶</p></li>
</ul>
</section>
<section id="c√≥mo-escribir-una-funci√≥n" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="c√≥mo-escribir-una-funci√≥n"><span class="header-section-number">4.5</span> C√≥mo escribir una funci√≥n</h3>
<p>En general, sint√°cticamente, las funciones tienen tres componentes:</p>
<ul>
<li>Funci√≥n para crear la funcion <code>function().</code> Se le asigna un nombre para poder reutilizarla</li>
<li>Argumentos: lista de entradas.
<ul>
<li>Argumentos que especifican los datos de entrada</li>
<li>Argumentos que especifican detalles de la ejecuci√≥n de la funci√≥n (se suelen colocar despues y tienen valores por defecto, si no los especificamos la funci√≥n se ejecuta con los valores por defecto)</li>
</ul></li>
<li>Cuerpo: trozo de c√≥digo que sigue a <code>function()</code>, tradicionalmente entre llaves.
<ul>
<li>La √∫ltima expresi√≥n ejecutada en una funci√≥n es el valor de retorno.</li>
</ul></li>
</ul>
<p><img src="images/funcion_componentes.png" class="img-fluid"></p>
<section id="ejercicio-consultar-la-funci√≥n-sort" class="level4" data-number="4.5.1">
<h4 data-number="4.5.1" class="anchored" data-anchor-id="ejercicio-consultar-la-funci√≥n-sort"><span class="header-section-number">4.5.1</span> üß© Ejercicio: consultar la funci√≥n sort()</h4>
<ul>
<li><p>Ordena el vector c(5, 8, 6, 2, 4, 5, NA) usando la funcion sort()</p></li>
<li><p>Utiliza el argumento ‚Äúdecreasing‚Äù para ordenarlo de mayor a menor (consulta la ayuda para ver como se usa este argumento). ¬øQu√© valor tiene por defecto?</p></li>
<li><p>¬øQue otro argumento tiene la funcion que especifica detalles de la ejecuci√≥n? C√°mbialo a otro valor que no sea su valor por defecto.</p></li>
<li><p>¬øCual es el valor de retorno de la funci√≥n?</p></li>
</ul>
<p>Cuando escribimos una funcion tenemos que especificar estos componentes. Ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>escribe_suma <span class="ot">&lt;-</span> <span class="cf">function</span>(n1,n2) { <span class="co">#argumentos de entrada n1 y n2</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  suma<span class="ot">&lt;-</span>n1<span class="sc">+</span>n2 <span class="co">#cuerpo de la funcion: paso intermedio</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"La suma de "</span>,n1,<span class="st">" mas "</span>, n2, <span class="st">" es: "</span>, suma) <span class="co"># cuerpo de la funcion: valor de retorno</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="fu">escribe_suma</span>(<span class="dv">10</span>,<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La suma de 10 mas 100 es: 110"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">escribe_suma</span>(<span class="dv">33</span>,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "La suma de 33 mas 2 es: 35"</code></pre>
</div>
</div>
<p>üí°Atajo para escribir funciones: escribir la palabra fun + tabulador</p>
<p>üìù Es conveniente usar comentarios (#) para explicar el razonamiento detr√°s de tus funciones.</p>
</section>
<section id="ejercicio-primera-funci√≥n" class="level4" data-number="4.5.2">
<h4 data-number="4.5.2" class="anchored" data-anchor-id="ejercicio-primera-funci√≥n"><span class="header-section-number">4.5.2</span> üß© Ejercicio: primera funci√≥n</h4>
<ol type="1">
<li><p>Crea una funci√≥n que sirva para calcular el √°rea de habitaciones cuadradas o rectangulares. Para ello crea una funci√≥n de dos argumentos (el ancho de la habitaci√≥n y el largo) y que devuelva el √°rea.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>mi_funcion <span class="ot">&lt;-</span> <span class="cf">function</span>(largo, ancho) {</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Escribe el c√≥digo aqu√≠</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Queremos saber el precio de enlosar la habitaci√≥n. Para ello a√±ade un tercer argumento con el precio por metro cuadrado.</p></li>
<li><p>¬øCuanto cuesta enlosar una habitaci√≥n de 10x16m con un tipo de losa que cuesta 5‚Ç¨ el metro cuadrado? ¬øY una de 32x4m con una que cuesta 16‚Ç¨ por metro cuadrado?</p></li>
</ol>
</section>
<section id="ejercicio-funcion-de-media-aritm√©tica" class="level4" data-number="4.5.3">
<h4 data-number="4.5.3" class="anchored" data-anchor-id="ejercicio-funcion-de-media-aritm√©tica"><span class="header-section-number">4.5.3</span> üß© Ejercicio: funcion de media aritm√©tica</h4>
<p>Crea una funci√≥n que calcule la media aritm√©tica de los valores de un vector (sin usar la funci√≥n mean()). De tal manera que si introducimos, por ejemplo, el vector c(1, 8, 18) nos devuelva el valor 9</p>
<ul>
<li><p>Pista1: sum() nos da el valor de la suma de los elementos de un vector # prueba sum(c(1, 2, 3)) para comprobarlo</p></li>
<li><p>Pista 2: length() nos da la longitud (numero de elementos) del vector.</p></li>
</ul>
</section>
</section>
<section id="iteraciones-con-bucles-for" class="level3" data-number="4.6">
<h3 data-number="4.6" class="anchored" data-anchor-id="iteraciones-con-bucles-for"><span class="header-section-number">4.6</span> Iteraciones con bucles for</h3>
<p>Una <strong>iteraci√≥n</strong> en programaci√≥n es la <strong>repetici√≥n controlada</strong> de un bloque de instrucciones hasta que se cumple una condici√≥n o se alcanza un n√∫mero de repeticiones; cada vez que se ejecuta ese bloque se llama <strong>una iteraci√≥n.</strong></p>
<p><img src="images/funcion_iteracion.png" class="img-fluid"></p>
<p>En R, el <code>for</code> itera sobre los elementos de una <strong>secuencia</strong> (por ejemplo <code>1:10</code>, un vector o una lista) y ejecuta el cuerpo del bucle una vez por cada elemento. La variable de control (i) toma el valor de cada elemento en cada iteraci√≥n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">+</span><span class="dv">10</span>)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11
[1] 12
[1] 13
[1] 14
[1] 15</code></pre>
</div>
</div>
<p>Para programar un bucle es necesario definir tres partes diferentes: la salida, la secuencia y el cuerpo</p>
<ol type="1">
<li><p>Salida: el espacio de la salida, es decir, primero tenemos que crear un espacio donde se va a ir almacenando el resultado del bucle. Puede ser un vector, una lista‚Ä¶</p></li>
<li><p>Secuencia: sobre lo que queremos iterar. Cada ejecuci√≥n del bucle <em>for</em> asignar√° un valor diferente a <code>i</code>, la variable control. La variable control puede ser una secuencia de n√∫meros o tambi√©n una secuencia de elementos de un vector o de una lista.</p></li>
<li><p>Cuerpo del bucle: aqu√≠ determinamos lo que queremos que haga cada iteraci√≥n. Se ejecuta repetidamente, cada vez con un valor diferente para <code>i</code>.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Ejemplo bucle 1:</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Salida</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>salida<span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"integer"</span>,<span class="dv">5</span>)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>salida <span class="co"># veo que es un vector de 0 (vacio)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){ <span class="co"># 1:5 es la secuencia</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  salida[[i]] <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">10</span> <span class="co">#cuerpo del bucle</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>salida <span class="co"># ahora tiene el resultado del bucle</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11 12 13 14 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo bucle 2:</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>salida<span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">"character"</span>,<span class="dv">5</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>salida</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "" "" "" "" ""</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>semana5<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"lunes"</span>, <span class="st">"martes"</span>,<span class="st">"miercoles"</span>,<span class="st">"jueves"</span>,<span class="st">"viernes"</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(semana5)){</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  salida[[j]]<span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"hoy es "</span>, semana5[[j]])</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-creando-bucles-for" class="level4" data-number="4.6.1">
<h4 data-number="4.6.1" class="anchored" data-anchor-id="ejercicio-creando-bucles-for"><span class="header-section-number">4.6.1</span> üß© Ejercicio: creando bucles for</h4>
<p>Elige al menos una de las siguientes opciones y crea un bucle:</p>
<ul>
<li><p>A partir del vector v&lt;- c(1,2,3,4), crea un vector w donde el pimer elemento de w sea el primer de v al cuadrado m√°s uno y as√≠ sucesivamente.</p></li>
<li><p>A partir de una lista con los dataframes de tidyverse msleep, diamonds y mpg, crea una nueva lista pero seleccionado solo las columnas que empiecen por ‚Äúc‚Äù y las filas de la 10 a la 20.</p></li>
<li><p>Genera un bucle para leer los archivos df1 a df5 de la carpeta data y almacenarlos en una lista. Pista: consulta la funcion list.files() y mira cuidadosamente todos los argumentos.</p></li>
</ul>
</section>
</section>
<section id="iteraciones-con-funcionales" class="level3" data-number="4.7">
<h3 data-number="4.7" class="anchored" data-anchor-id="iteraciones-con-funcionales"><span class="header-section-number">4.7</span> Iteraciones con funcionales</h3>
<p>Un funcional es una funci√≥n que toma una funci√≥n como entrada y devuelve un vector u otro tipo de objeto como salida. Un uso comun de los funcionales es como sustitutos de los bucles for. En R base los funcionales que sustituyen a los bucles for son las funciones de la familia apply (apply(), lapply(), tapply(), etc). En la colecci√≥n de paquetes de tidyverse, el equivalente a estos funcionales son los provistos por el paquete purr:: map().</p>
<p>Para programar un funcional, primero, solucionamos el problema para un elemento. Despu√©s, generamos una funci√≥n que nos permita tener la soluci√≥n en una funci√≥n . Por √∫ltimo, aplicamos la funci√≥n a todos los elementos que estamos interesados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>x10<span class="ot">&lt;-</span> <span class="cf">function</span>(x) x<span class="sc">*</span><span class="dv">10</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, x10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 10

[[2]]
[1] 20

[[3]]
[1] 30</code></pre>
</div>
</div>
<p>Usando map funci√≥n operar√° en todos los elementos de <code>x</code>, es decir, cada valor si <code>x</code> es un vector, cada columna si <code>x</code> es un <code>data.frame</code>, o cada elemento si <code>x</code> es una lista. Toma un vector y una funci√≥n, llama a la funci√≥n una vez por cada elemento del vector y devuelve los resultados en una lista. <code>map(1:3, f)</code> es equivalente a <code>list(f(1), f(2), f(3))</code>. Es el equivalente de <code>lapply()</code> de R base.</p>
<p><img src="images/map.png" class="img-fluid"></p>
<p><code>map()</code> devuelve una lista, lo que la convierte en la m√°s general de la familia <code>map</code> porque puedes poner cualquier cosa en una lista. Pero es inc√≥modo devolver una lista cuando una estructura de datos m√°s simple bastar√≠a, por eso existen cuatro variantes m√°s espec√≠ficas: <code>map_lgl()</code>, <code>map_int()</code>, <code>map_dbl()</code> y <code>map_chr()</code>. Cada una devuelve un vector at√≥mico del tipo especificado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>mi_lista<span class="ot">&lt;-</span><span class="fu">list</span>(<span class="st">"hola"</span>, <span class="dv">2</span>, <span class="fl">25.1</span>, <span class="cn">TRUE</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada componente de la lista dime el tipo de dato y devuelve un vector tipo character</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="fu">map_chr</span>(mi_lista, typeof)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character" "double"    "double"    "logical"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada componente de la lista devuelve un vector l√≥gico indicando TRUE si es de tipo doble y FALSE si no lo es</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_lgl</span>(mi_lista, is.double)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada columna del dataframe devuelve un vector num√©rico con la media (NA cuando en esa columna no hay n√∫meros)</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(msleep, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(.x[[i]], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>        name        genus         vore        order conservation  sleep_total 
          NA           NA           NA           NA           NA     10.43373 
   sleep_rem  sleep_cycle        awake      brainwt       bodywt 
          NA           NA     13.56747           NA    166.13635 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para cada columna del dataframe devuelve el n√∫mero de casos √∫nicos</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_int</span>(msleep, n_distinct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        name        genus         vore        order conservation  sleep_total 
          83           77            5           19            7           65 
   sleep_rem  sleep_cycle        awake      brainwt       bodywt 
          33           23           65           54           82 </code></pre>
</div>
</div>
<section id="ejercicio-map" class="level4" data-number="4.7.1">
<h4 data-number="4.7.1" class="anchored" data-anchor-id="ejercicio-map"><span class="header-section-number">4.7.1</span> üß© Ejercicio: map()</h4>
<ul>
<li><p>Genera un vector, una funci√≥n y aplica la funci√≥n a cada uno de los elementos del vector utilizando <code>map()</code>.</p></li>
<li><p>para la lista list(a = 1:3, b = letters[1:5], c = c(TRUE, FALSE)) utiliza map() para generar una salida que sea una lista con las longitudes de cada elemento. ¬øQue funcion tendr√≠as que utilizar si quieres que la salida sea un vector de n√∫meros enteros en lugar de una lista?</p></li>
<li><p>para la lista_num &lt;- list(a = c(1,2,3), b = c(4,5), c = 6) aplica la funcion de la familia map para obtener la media de cada elemento a, b, c en un vector num√©rico.</p></li>
</ul>
</section>
</section>
</section>
<section id="para-seguir-practicando" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="para-seguir-practicando"><span class="header-section-number">5</span> üß© <em>Para seguir practicando‚Ä¶</em></h2>
<p>El paquete swirl es un paquete de R que transforma la consola de R en un tutor interactivo que presenta lecciones, plantea preguntas (texto, num√©ricas, opciones) y eval√∫a tus respuestas en tiempo real. A parte de los m√≥dulos de aprendizaje que vienenen el propio paquete permite crear m√≥dulos nuevos.</p>
<p><img src="images/swirl_R.png" class="img-fluid"></p>
<p>Paquete <a href="https://swirlstats.com/">swirl</a>: aprendiendo R en R</p>
<p>Si quieres seguir practicando con el paquete tidyverse puedes seguir el siguiente curso obtenido de <a href="https://github.com/sysilviakim/swirl-tidy" class="uri">https://github.com/sysilviakim/swirl-tidy</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"swirl"</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(swirl)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install_course_github</span>(<span class="st">"sysilviakim"</span>, <span class="st">"swirl-tidy"</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="fu">swirl</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="enlaces-de-inter√©s" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="enlaces-de-inter√©s"><span class="header-section-number">6</span> Enlaces de inter√©s</h2>
<ul>
<li><p><a href="https://rstudio-education.github.io/hopr/">Hands-On Programming with R</a></p></li>
<li><p><a href="https://r4ds.had.co.nz/transform.html">R for data Science (Data transformation)</a></p></li>
<li><p><a href="http://adv-r.had.co.nz/Style.html">Style guide</a></p></li>
<li><p><a href="https://www.tidyverse.org">P√°gina web de <em>tidyverse</em></a></p></li>
<li><p><a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">Cheat sheet the dplyr</a></p></li>
<li><p><a href="https://www.revistaecosistemas.net/index.php/ecosistemas/article/view/2129">Quince consejos para mejorar nuestro c√≥digo y flujo de trabajo con R</a></p></li>
</ul>
<hr>
<details>
<summary>
Session Info
</summary>
</details>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>