<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marina Rodes Blanco, Paloma Ruiz Benito, Ver√≥nica Cruz Alonso y Juli√°n Tijerin Trivi√±o">

<title>D√≠a 2 - Manejo de datos con Tidyverse. Programa de doctorado UAH</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="dia_2_manejo_de_datos_files/libs/clipboard/clipboard.min.js"></script>
<script src="dia_2_manejo_de_datos_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dia_2_manejo_de_datos_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dia_2_manejo_de_datos_files/libs/quarto-html/popper.min.js"></script>
<script src="dia_2_manejo_de_datos_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dia_2_manejo_de_datos_files/libs/quarto-html/anchor.min.js"></script>
<link href="dia_2_manejo_de_datos_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dia_2_manejo_de_datos_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dia_2_manejo_de_datos_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dia_2_manejo_de_datos_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dia_2_manejo_de_datos_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">√çndice</h2>
   
  <ul>
  <li><a href="#s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio-por-terminar" id="toc-s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio-por-terminar" class="nav-link active" data-scroll-target="#s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio-por-terminar"><span class="header-section-number">1</span> S√≠ntesis del d√≠a 1: Introducci√≥n a R y a R studio (POR TERMINAR)</a>
  <ul>
  <li><a href="#modelo-de-ciencia-de-datos" id="toc-modelo-de-ciencia-de-datos" class="nav-link" data-scroll-target="#modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</a></li>
  <li><a href="#buenas-pr√°cticas-en-la-gesti√≥n-de-datos" id="toc-buenas-pr√°cticas-en-la-gesti√≥n-de-datos" class="nav-link" data-scroll-target="#buenas-pr√°cticas-en-la-gesti√≥n-de-datos"><span class="header-section-number">1.2</span> Buenas pr√°cticas en la gesti√≥n de datos</a></li>
  <li><a href="#tipos-de-objetos-y-operaciones-b√°sicas-en-r" id="toc-tipos-de-objetos-y-operaciones-b√°sicas-en-r" class="nav-link" data-scroll-target="#tipos-de-objetos-y-operaciones-b√°sicas-en-r"><span class="header-section-number">1.3</span> Tipos de objetos y operaciones b√°sicas en R</a>
  <ul>
  <li><a href="#ejercicio-repaso-del-d√≠a-anterior" id="toc-ejercicio-repaso-del-d√≠a-anterior" class="nav-link" data-scroll-target="#ejercicio-repaso-del-d√≠a-anterior"><span class="header-section-number">1.3.1</span> üß© Ejercicio: <em>repaso</em> <em>del d√≠a anterior</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#introducci√≥n" id="toc-introducci√≥n" class="nav-link" data-scroll-target="#introducci√≥n"><span class="header-section-number">2</span> Introducci√≥n</a>
  <ul>
  <li><a href="#estructura-de-datos-pendiente" id="toc-estructura-de-datos-pendiente" class="nav-link" data-scroll-target="#estructura-de-datos-pendiente"><span class="header-section-number">2.1</span> Estructura de datos (PENDIENTE)</a></li>
  <li><a href="#tidyverse-pendiente" id="toc-tidyverse-pendiente" class="nav-link" data-scroll-target="#tidyverse-pendiente"><span class="header-section-number">2.2</span> Tidyverse (PENDIENTE)</a></li>
  <li><a href="#presentando-los-set-de-datos-con-los-que-vamos-a-trabajar" id="toc-presentando-los-set-de-datos-con-los-que-vamos-a-trabajar" class="nav-link" data-scroll-target="#presentando-los-set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.3</span> Presentando los set de datos con los que vamos a trabajar:</a></li>
  </ul></li>
  <li><a href="#importar-y-renombrar-datos" id="toc-importar-y-renombrar-datos" class="nav-link" data-scroll-target="#importar-y-renombrar-datos"><span class="header-section-number">3</span> Importar y renombrar datos</a>
  <ul>
  <li><a href="#read_delim-leer-datos-desde-fuera-de-r" id="toc-read_delim-leer-datos-desde-fuera-de-r" class="nav-link" data-scroll-target="#read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.1</span> Read_delim: leer datos desde fuera de R</a></li>
  <li><a href="#rename-cambiar-nombres-de-variables-columnas" id="toc-rename-cambiar-nombres-de-variables-columnas" class="nav-link" data-scroll-target="#rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2</span> Rename: cambiar nombres de variables (columnas)</a></li>
  </ul></li>
  <li><a href="#funciones-b√°sicas-de-filtrado-y-selecci√≥n" id="toc-funciones-b√°sicas-de-filtrado-y-selecci√≥n" class="nav-link" data-scroll-target="#funciones-b√°sicas-de-filtrado-y-selecci√≥n"><span class="header-section-number">4</span> Funciones b√°sicas de filtrado y selecci√≥n</a>
  <ul>
  <li><a href="#slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" id="toc-slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" class="nav-link" data-scroll-target="#slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico"><span class="header-section-number">4.1</span> Slice: filtrar filas seg√∫n el √≠ndice num√©rico</a></li>
  <li><a href="#arrange-ordenar-filas-por-los-valores-de-una-o-m√°s-variables-columnas" id="toc-arrange-ordenar-filas-por-los-valores-de-una-o-m√°s-variables-columnas" class="nav-link" data-scroll-target="#arrange-ordenar-filas-por-los-valores-de-una-o-m√°s-variables-columnas"><span class="header-section-number">4.2</span> Arrange: ordenar filas por los valores de una o m√°s variables (columnas)</a></li>
  <li><a href="#filter-filtrar-filas-utilizando-condiciones" id="toc-filter-filtrar-filas-utilizando-condiciones" class="nav-link" data-scroll-target="#filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">4.3</span> Filter: filtrar filas utilizando condiciones</a>
  <ul>
  <li><a href="#ejercicio-slice-filter-arrange" id="toc-ejercicio-slice-filter-arrange" class="nav-link" data-scroll-target="#ejercicio-slice-filter-arrange"><span class="header-section-number">4.3.1</span> üß© <em>Ejercicio: slice(), filter(), arrange()</em></a></li>
  </ul></li>
  <li><a href="#select-sirve-para-seleccionar-columnas-utilizando-condiciones" id="toc-select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="nav-link" data-scroll-target="#select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">4.4</span> Select: sirve para seleccionar columnas utilizando condiciones</a>
  <ul>
  <li><a href="#ejercicio-select" id="toc-ejercicio-select" class="nav-link" data-scroll-target="#ejercicio-select"><span class="header-section-number">4.4.1</span> üß© <em>Ejercicio: select()</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#transformar-los-datos-y-calcular-nuevas-variables" id="toc-transformar-los-datos-y-calcular-nuevas-variables" class="nav-link" data-scroll-target="#transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">5</span> Transformar los datos y calcular nuevas variables</a>
  <ul>
  <li><a href="#mutate-crear-modificar-o-eliminar-columnas" id="toc-mutate-crear-modificar-o-eliminar-columnas" class="nav-link" data-scroll-target="#mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">5.1</span> Mutate: crear, modificar o eliminar columnas</a>
  <ul>
  <li><a href="#ejercicio-mutate" id="toc-ejercicio-mutate" class="nav-link" data-scroll-target="#ejercicio-mutate"><span class="header-section-number">5.1.1</span> üß© <em>Ejercicio: mutate()</em></a></li>
  <li><a href="#ejercicio-group_by-summrise" id="toc-ejercicio-group_by-summrise" class="nav-link" data-scroll-target="#ejercicio-group_by-summrise"><span class="header-section-number">5.1.2</span> üß© <em>Ejercicio: group_by(), summrise()</em></a></li>
  </ul></li>
  <li><a href="#pivot-transformar-datos-a-formato-largo-o-ancho" id="toc-pivot-transformar-datos-a-formato-largo-o-ancho" class="nav-link" data-scroll-target="#pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">5.2</span> Pivot: transformar datos a formato largo o ancho</a>
  <ul>
  <li><a href="#ejercicio-transformar-datos-largo-ancho" id="toc-ejercicio-transformar-datos-largo-ancho" class="nav-link" data-scroll-target="#ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">5.2.1</span> üß© <em>Ejercicio: transformar datos largo ancho</em></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#unir-data.frames" id="toc-unir-data.frames" class="nav-link" data-scroll-target="#unir-data.frames"><span class="header-section-number">6</span> Unir data.frames</a></li>
  <li><a href="#guardar-datos" id="toc-guardar-datos" class="nav-link" data-scroll-target="#guardar-datos"><span class="header-section-number">7</span> Guardar datos</a>
  <ul>
  <li><a href="#ejercicio-_join-y-exportar-datos" id="toc-ejercicio-_join-y-exportar-datos" class="nav-link" data-scroll-target="#ejercicio-_join-y-exportar-datos"><span class="header-section-number">7.0.1</span> üß© <em>Ejercicio: *_join() y exportar datos</em></a></li>
  </ul></li>
  <li><a href="#ejercicio-final" id="toc-ejercicio-final" class="nav-link" data-scroll-target="#ejercicio-final"><span class="header-section-number">8</span> üß© <em>Ejercicio final</em></a></li>
  <li><a href="#enlaces-de-inter√©s" id="toc-enlaces-de-inter√©s" class="nav-link" data-scroll-target="#enlaces-de-inter√©s"><span class="header-section-number">9</span> Enlaces de inter√©s</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="dia_2_manejo_de_datos.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">D√≠a 2 - Manejo de datos con Tidyverse. Programa de doctorado UAH</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Marina Rodes Blanco, Paloma Ruiz Benito, Ver√≥nica Cruz Alonso y Juli√°n Tijerin Trivi√±o </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">30/12/2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio-por-terminar" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="s√≠ntesis-del-d√≠a-1-introducci√≥n-a-r-y-a-r-studio-por-terminar"><span class="header-section-number">1</span> S√≠ntesis del d√≠a 1: Introducci√≥n a R y a R studio (POR TERMINAR)</h2>
<section id="modelo-de-ciencia-de-datos" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="modelo-de-ciencia-de-datos"><span class="header-section-number">1.1</span> Modelo de ciencia de datos</h3>
<p>1.- Importar:</p>
<p>2.- Ordenar:</p>
<p>3.- Transformar:</p>
<p>4.- Modelar:</p>
<p>5.- Visualizar:</p>
<p>6.- Comunicar:</p>
<div id="fig-datascience" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/datascience.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Modelo de ciencia de datos de Hadley Wickham, Mine √áetinkaya-Rundel y Garrett Grolemund. Traducido de https://r4ds.hadley.nz/intro#fig-ds-diagram
</figcaption>
</figure>
</div>
</section>
<section id="buenas-pr√°cticas-en-la-gesti√≥n-de-datos" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="buenas-pr√°cticas-en-la-gesti√≥n-de-datos"><span class="header-section-number">1.2</span> Buenas pr√°cticas en la gesti√≥n de datos</h3>
<ul>
<li>Trabajar por proyectos</li>
<li>Usar teclas r√°pidas</li>
<li>Consultar documentacion / pedir ayuda</li>
<li>C√≥digo reproducible</li>
<li>Seguir estilo (guia de estilo)</li>
</ul>
</section>
<section id="tipos-de-objetos-y-operaciones-b√°sicas-en-r" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="tipos-de-objetos-y-operaciones-b√°sicas-en-r"><span class="header-section-number">1.3</span> Tipos de objetos y operaciones b√°sicas en R</h3>
<ul>
<li>Vectores</li>
<li>Matrices</li>
<li>Data frames</li>
<li>Listas</li>
</ul>
<section id="ejercicio-repaso-del-d√≠a-anterior" class="level4" data-number="1.3.1">
<h4 data-number="1.3.1" class="anchored" data-anchor-id="ejercicio-repaso-del-d√≠a-anterior"><span class="header-section-number">1.3.1</span> üß© Ejercicio: <em>repaso</em> <em>del d√≠a anterior</em></h4>
<ul>
<li>Crea un vector con los meses del a√±o (en n√∫mero) y calcula la media</li>
<li>Crea una matriz ‚Ä¶ ¬øCual es el elemento de la fila 3 columna 2?</li>
<li>Crea una lista .. ¬øQue hay en el tercer elemento de la lista?</li>
<li>Crea un data frame con la siguiente informaci√≥n</li>
</ul>
</section>
</section>
</section>
<section id="introducci√≥n" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="introducci√≥n"><span class="header-section-number">2</span> Introducci√≥n</h2>
<section id="estructura-de-datos-pendiente" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="estructura-de-datos-pendiente"><span class="header-section-number">2.1</span> Estructura de datos (PENDIENTE)</h3>
</section>
<section id="tidyverse-pendiente" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="tidyverse-pendiente"><span class="header-section-number">2.2</span> Tidyverse (PENDIENTE)</h3>
</section>
<section id="presentando-los-set-de-datos-con-los-que-vamos-a-trabajar" class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="presentando-los-set-de-datos-con-los-que-vamos-a-trabajar"><span class="header-section-number">2.3</span> Presentando los set de datos con los que vamos a trabajar:</h3>
<p>Vamos a trabajar con datos de Tidytuesday, de las librerias de tidyverse y de un paquete denominado ‚Äúpalmerpenguins‚Äù. En todos los casos son datos reales.</p>
<p>Tidytuesday es un proyecto comunitario de ciencia de datos impulsado por la comunidad de R, especialmente por usuarios de tidyverse. Cada martes se publica un dataset limpio y listo para analizar, junto con una breve descripci√≥n y enlaces a la fuente original.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidyTuesday_logo.png" class="img-fluid figure-img"></p>
<figcaption><a href="https://github.com/rfordatascience/tidytuesday/">TidyTuesday</a></figcaption>
</figure>
</div>
<p>De este proyecto vamos a trabajar con dos set de datos diferentes:</p>
<table class="caption-top table">
<caption>Fuente imagen: copilot</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/recetas1_copilot.png" class="img-fluid"></td>
<td>El dataset de <strong>Cuisine</strong> de TidyTuesday recopila informaci√≥n sobre recetas y tipos de cocina (origen, valor nutricional, tiempo de preparaci√≥n etc.)</td>
</tr>
</tbody>
</table>
<table class="caption-top table">
<caption>Fuente imagen: <a href="https://www.flickr.com/photos/lorenjavier/4124134356" class="uri">https://www.flickr.com/photos/lorenjavier/4124134356</a> CC BY-ND 2.0</caption>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image1_flickr.jpg" class="img-fluid"></td>
<td>El dataset de <strong>Pixar</strong> en TidyTuesday recopila informaci√≥n detallada sobre las pel√≠culas de Pixar, incluyendo variables de producci√≥n, taquilla y cr√≠tica.</td>
</tr>
</tbody>
</table>
<p>Tidyverse tambien tiene sus propios set de datos con los que podemos practicar. Puedes consultarlo con la funci√≥n data(). De los sets de datos de tidyverse vamos a trabajar con msleep</p>
<table class="caption-top table">
<caption>Fuente imagen: copilot</caption>
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid" width="274"></td>
<td>El dataset <strong>msleep</strong> contiene informaci√≥n sobre <strong>el sue√±o de distintos</strong> mam√≠feros. Incluye variables biol√≥gicas, ecol√≥gicas y taxon√≥micas, as√≠ como medidas relacionadas con sus patrones de sue√±o</td>
</tr>
</tbody>
</table>
<p>Por √∫ltimo vamos a trabajar, para el ejercicio final, con los datos de paquete palmerpenguins</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/palmer_penguins.png" class="img-fluid"></td>
<td><p>Los datos fueron recopilados y puestos a disposici√≥n por la Dra. Kristen Gorman y la Estaci√≥n Palmer, LTER de la Ant√°rtida, miembro de la Red de Investigaci√≥n Ecol√≥gica a Largo Plazo.</p>
<p>Datos de pinguinos adultos de tres especies diferentes y de tres islas diferentes e incluye informaci¬¥n sonbre tama√±o y sexo.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="importar-y-renombrar-datos" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="importar-y-renombrar-datos"><span class="header-section-number">3</span> Importar y renombrar datos</h2>
<section id="read_delim-leer-datos-desde-fuera-de-r" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="read_delim-leer-datos-desde-fuera-de-r"><span class="header-section-number">3.1</span> <a href="https://readr.tidyverse.org/reference/read_delim.html">Read_delim</a>: leer datos desde fuera de R</h3>
<p>Leer datos que tenemos almacenados, como por ejemplo, una tabla en formato csv.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>recetas <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"data/cuisines.csv"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_type =</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"f"</span>, <span class="at">servings=</span><span class="st">"f"</span>),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># puedo especificar el tipo de dato (country como factor)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>recetas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(recetas)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name                                   country         url           
 Length:2218        Canadian                    :  67   Length:2218       
 Class :character   Brazilian                   :  67   Class :character  
 Mode  :character   Filipino                    :  66   Mode  :character  
                    Australian and New Zealander:  65                     
                    Cuban                       :  65                     
                    Chinese                     :  65                     
                    (Other)                     :1823                     
    author          date_published       ingredients           calories     
 Length:2218        Min.   :2009-02-09   Length:2218        Min.   :   3.0  
 Class :character   1st Qu.:2022-11-02   Class :character   1st Qu.: 190.0  
 Mode  :character   Median :2024-07-14   Mode  :character   Median : 319.5  
                    Mean   :2023-10-27                      Mean   : 358.4  
                    3rd Qu.:2025-01-06                      3rd Qu.: 477.0  
                    Max.   :2025-07-29                      Max.   :2266.0  
                                                            NA's   :32      
      fat             carbs           protein         avg_rating   
 Min.   :  0.00   Min.   :  1.00   Min.   :  0.00   Min.   :1.000  
 1st Qu.:  7.00   1st Qu.: 13.00   1st Qu.:  4.00   1st Qu.:4.300  
 Median : 15.00   Median : 26.00   Median : 11.00   Median :4.600  
 Mean   : 18.76   Mean   : 31.96   Mean   : 16.61   Mean   :4.509  
 3rd Qu.: 26.00   3rd Qu.: 45.00   3rd Qu.: 25.00   3rd Qu.:4.800  
 Max.   :225.00   Max.   :264.00   Max.   :159.00   Max.   :5.000  
 NA's   :55       NA's   :35       NA's   :39       NA's   :97     
 total_ratings       reviews         prep_time        cook_time     
 Min.   :  1.00   Min.   :  1.00   Min.   :   0.0   Min.   :  0.00  
 1st Qu.:  6.00   1st Qu.:  6.00   1st Qu.:  10.0   1st Qu.: 10.00  
 Median : 24.00   Median : 21.00   Median :  15.0   Median : 25.00  
 Mean   : 85.25   Mean   : 76.93   Mean   :  21.5   Mean   : 41.75  
 3rd Qu.: 87.00   3rd Qu.: 74.00   3rd Qu.:  25.0   3rd Qu.: 45.00  
 Max.   :997.00   Max.   :975.00   Max.   :1800.0   Max.   :600.00  
 NA's   :97       NA's   :108                                       
   total_time       servings  
 Min.   :    0   4      :487  
 1st Qu.:   35   6      :419  
 Median :   60   8      :396  
 Mean   :  171   12     :238  
 3rd Qu.:  120   10     :104  
 Max.   :14440   (Other):572  
                 NA's   :  2  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 2,218
Columns: 17
$ name           &lt;chr&gt; "Saganaki (Flaming Greek Cheese)", "Coney Island Knishe‚Ä¶
$ country        &lt;fct&gt; Greek, Jewish, Australian and New Zealander, Chilean, T‚Ä¶
$ url            &lt;chr&gt; "https://www.allrecipes.com/recipe/263750/flaming-greek‚Ä¶
$ author         &lt;chr&gt; "John Mitzewich", "John Mitzewich", "CHIPPENDALE", "Hei‚Ä¶
$ date_published &lt;date&gt; 2024-02-07, 2024-11-26, 2022-07-14, 2025-01-31, 2025-0‚Ä¶
$ ingredients    &lt;chr&gt; "1 (4 ounce) package kasseri cheese, 1 tablespoon water‚Ä¶
$ calories       &lt;dbl&gt; 391, 301, 64, 106, 449, 958, 378, 90, 157, 322, 4, NA, ‚Ä¶
$ fat            &lt;dbl&gt; 25, 17, 3, 9, 23, 24, 10, 5, 6, 16, 0, NA, 21, 2, 66, 8‚Ä¶
$ carbs          &lt;dbl&gt; 15, 31, 9, 7, 58, 144, 59, 10, 25, 39, 1, NA, 16, 63, 7‚Ä¶
$ protein        &lt;dbl&gt; 16, 7, 1, 1, 7, 46, 14, 1, 2, 7, 0, NA, 28, 6, 54, 17, ‚Ä¶
$ avg_rating     &lt;dbl&gt; 4.8, 4.6, 4.3, 5.0, 3.8, 4.4, 4.3, NA, 4.6, 5.0, 4.7, 4‚Ä¶
$ total_ratings  &lt;dbl&gt; 25, 10, 126, 1, 13, 40, 3, NA, 65, 2, 182, 2, 19, 16, 9‚Ä¶
$ reviews        &lt;dbl&gt; 22, 9, 104, 1, 11, 32, 3, NA, 55, 2, 138, 2, 15, 16, 84‚Ä¶
$ prep_time      &lt;dbl&gt; 10, 30, 20, 10, 30, 30, 30, 40, 0, 5, 5, 5, 10, 10, 20,‚Ä¶
$ cook_time      &lt;dbl&gt; 5, 75, 15, 0, 15, 165, 75, 30, 0, 5, 0, 25, 10, 50, 16,‚Ä¶
$ total_time     &lt;dbl&gt; 15, 180, 180, 10, 45, 675, 585, 155, 0, 10, 5, 30, 50, ‚Ä¶
$ servings       &lt;fct&gt; 2, 16, 12, 6, 15, 6, 6, 84, 24, 1, 21, 8, 4, 10, 4, 8, ‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="rename-cambiar-nombres-de-variables-columnas" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="rename-cambiar-nombres-de-variables-columnas"><span class="header-section-number">3.2</span> <a href="https://dplyr.tidyverse.org/reference/rename.html">Rename</a>: cambiar nombres de variables (columnas)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio el nombre y a√±ado la unidad de medida (gramos)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>recetas_g <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fat_g =</span> fat,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">carbs_g =</span> carbs,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nombre nuevo = nombre viejo</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">protein_g =</span> protein</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>üìù Ajustar sangr√≠a de c√≥digo: Ctrl + i; Reformatear c√≥digo: Ctrl + Shift + a</p>
</section>
</section>
<section id="funciones-b√°sicas-de-filtrado-y-selecci√≥n" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="funciones-b√°sicas-de-filtrado-y-selecci√≥n"><span class="header-section-number">4</span> Funciones b√°sicas de filtrado y selecci√≥n</h2>
<section id="slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="slice-filtrar-filas-seg√∫n-el-√≠ndice-num√©rico"><span class="header-section-number">4.1</span> <a href="https://dplyr.tidyverse.org/reference/slice.html">Slice</a>: filtrar filas seg√∫n el √≠ndice num√©rico</h3>
<p>Seleccionar filas concretas del set de datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> <span class="co"># shortcut para el pipe: CTRL + SHIFT + M</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="co"># la primera fila</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># la fila 1 y la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
2 Tex-Mex ‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># de la fila 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Saganaki‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
2 Coney Is‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
3 Diana's ‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
5 Tex-Mex ‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
6 Newfound‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) <span class="co"># todas las filas excepto de la 1 a la 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,213 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 2 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 3 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 4 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
 5 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
 6 Traci's‚Ä¶ Filipi‚Ä¶ http‚Ä¶ Traci‚Ä¶ 2022-08-28     2 tablespo‚Ä¶        4     0     1
 7 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 8 Lomo de‚Ä¶ Cuban   http‚Ä¶ lillo‚Ä¶ 2024-12-19     1 tablespo‚Ä¶      389    21    16
 9 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
10 Chef Jo‚Ä¶ Southe‚Ä¶ http‚Ä¶ John ‚Ä¶ 2023-12-08     1  whole c‚Ä¶     1115    66    75
# ‚Ñπ 2,203 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="arrange-ordenar-filas-por-los-valores-de-una-o-m√°s-variables-columnas" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="arrange-ordenar-filas-por-los-valores-de-una-o-m√°s-variables-columnas"><span class="header-section-number">4.2</span> <a href="https://dplyr.tidyverse.org/reference/arrange.html">Arrange</a>: ordenar filas por los valores de una o m√°s variables (columnas)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(prep_time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
 2 Rose Wa‚Ä¶ Turkish http‚Ä¶ thr33‚Ä¶ 2025-02-27     cooking sp‚Ä¶       70    NA    17
 3 Jewish ‚Ä¶ Jewish  http‚Ä¶ Sara   2022-08-04     ¬Ω cup butt‚Ä¶      364    21    40
 4 Nanaimo‚Ä¶ Canadi‚Ä¶ http‚Ä¶ Sheal‚Ä¶ 2022-08-22     ¬Ω cup butt‚Ä¶      389    23    47
 5 Pumpkin‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Carol‚Ä¶ 2022-08-08     1 (9 inch)‚Ä¶      228     8    34
 6 Pan De ‚Ä¶ Filipi‚Ä¶ http‚Ä¶ THEO72 2020-06-18     2 cups war‚Ä¶      175     3    32
 7 Dutch C‚Ä¶ Dutch   http‚Ä¶ Tracy‚Ä¶ 2024-12-01     ¬Ω cup butt‚Ä¶      107     6    13
 8 Dutch A‚Ä¶ Dutch   http‚Ä¶ Carol  2022-08-22     ¬Ω cup shor‚Ä¶      193     8    30
 9 Hawaiia‚Ä¶ Austra‚Ä¶ http‚Ä¶ Jan T‚Ä¶ 2022-07-14     1 ¬æ cups a‚Ä¶      131     6    18
10 Spiced ‚Ä¶ Jamaic‚Ä¶ http‚Ä¶ Barba‚Ä¶ 2022-08-22     2 pounds c‚Ä¶       37    NA     9
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Malasad‚Ä¶ Portug‚Ä¶ http‚Ä¶ Scotty 2020-06-18     1 teaspoon‚Ä¶      121     5    17
 2 Kringla‚Ä¶ Norweg‚Ä¶ http‚Ä¶ MBPG   2020-06-18     1 cup heav‚Ä¶      167     7    24
 3 Maria's‚Ä¶ Portug‚Ä¶ http‚Ä¶ BINGA‚Ä¶ 2024-11-21     2 pounds d‚Ä¶      701    31    25
 4 Feijoad‚Ä¶ Brazil‚Ä¶ http‚Ä¶ L Ire‚Ä¶ 2025-02-10     1 tablespo‚Ä¶      381    18    31
 5 Sushi P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Marcia 2022-01-04     9 ¬æ cups w‚Ä¶      516    12    88
 6 Lahmacu‚Ä¶ Dutch   http‚Ä¶ lysis  2025-03-10     1  yellow ‚Ä¶      480    20    58
 7 F√•rik√•l  Norweg‚Ä¶ http‚Ä¶ KATHY‚Ä¶ 2024-11-21     8 ounces s‚Ä¶      123     2    18
 8 Lebanes‚Ä¶ Lebane‚Ä¶ http‚Ä¶ Arlet‚Ä¶ 2024-04-30     1 ¬Ω pounds‚Ä¶      198    10    26
 9 Galakto‚Ä¶ Greek   http‚Ä¶ GapGi‚Ä¶ 2025-06-05     2 ¬Ω cups w‚Ä¶      367    14    52
10 Italian‚Ä¶ Austri‚Ä¶ http‚Ä¶ LaLee‚Ä¶ 2020-06-18     12 ounces ‚Ä¶       99     5    12
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="filter-filtrar-filas-utilizando-condiciones" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="filter-filtrar-filas-utilizando-condiciones"><span class="header-section-number">4.3</span> <a href="https://dplyr.tidyverse.org/reference/filter.html">Filter</a>: filtrar filas utilizando condiciones</h3>
<p>Se necesita un vector de filtrado que contenga valores l√≥gicos (TRUE/FALSE).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span>) <span class="co"># filtrar por filas que cumplen un patr√≥n </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 3 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 4 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
 5 Chilean‚Ä¶ Chilean http‚Ä¶ Alici‚Ä¶ 2022-10-18     1 tablespo‚Ä¶      530    28    54
 6 Empanad‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
 7 Pastel ‚Ä¶ Chilean http‚Ä¶ Epicu‚Ä¶ 2025-04-08     2  eggs, 1‚Ä¶      435    21    38
 8 Pastel ‚Ä¶ Chilean http‚Ä¶ Cucin‚Ä¶ 2024-11-22     5 cups pot‚Ä¶      366    25    22
 9 Leche A‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2020-06-18     1 quart wh‚Ä¶      258     9    25
10 Chilean‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
# ‚Ñπ 12 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todass las recetas chilenas</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">&amp;</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: AND</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
2 Pebre     Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
3 Empanada‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
5 Lemon Pi‚Ä¶ Chilean http‚Ä¶ Ruper‚Ä¶ 2025-02-01     1 tablespo‚Ä¶       NA    NA    NA
6 Isa's Co‚Ä¶ Chilean http‚Ä¶ Wonde‚Ä¶ 2022-09-26     20  whole ‚Ä¶       NA    NA    NA
7 Pisco So‚Ä¶ Chilean http‚Ä¶ DORITA 2022-10-03     4 cups ice‚Ä¶       NA    NA    NA
8 Gambas P‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-14     10 cloves ‚Ä¶      278    19     4
9 Pisco So‚Ä¶ Chilean http‚Ä¶ PattyQ 2025-01-31     2 cups pis‚Ä¶       NA    NA    NA
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas que se preparan en menos de 60 minutos</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">&amp;</span> total_time  <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="co"># combinar criterios: OR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 17
  name      country url   author date_published ingredients calories   fat carbs
  &lt;chr&gt;     &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Chilean ‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
2 Pebre     Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
3 Empanada‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2019-04-02     3 cups all‚Ä¶      343    14    39
4 Chilean ‚Ä¶ Chilean http‚Ä¶ Barba‚Ä¶ 2025-06-04     4 cups all‚Ä¶      477    28    49
5 Lemon Pi‚Ä¶ Chilean http‚Ä¶ Ruper‚Ä¶ 2025-02-01     1 tablespo‚Ä¶       NA    NA    NA
6 Isa's Co‚Ä¶ Chilean http‚Ä¶ Wonde‚Ä¶ 2022-09-26     20  whole ‚Ä¶       NA    NA    NA
7 Pisco So‚Ä¶ Chilean http‚Ä¶ DORITA 2022-10-03     4 cups ice‚Ä¶       NA    NA    NA
8 Gambas P‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-14     10 cloves ‚Ä¶      278    19     4
9 Pisco So‚Ä¶ Chilean http‚Ä¶ PattyQ 2025-01-31     2 cups pis‚Ä¶       NA    NA    NA
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas chilenas (independientemente del tiempo de preparaci√≥n) o bien aquellas recetas que se preparen en menos de 60mins (independientemente del pa√≠s)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chilean"</span>, <span class="st">"Brazilian"</span>, <span class="st">"Peruvian"</span>)) <span class="co"># combinar criterios: %in% </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 3 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
 4 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 5 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 6 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Socce‚Ä¶ 2023-02-13     1 cup brow‚Ä¶      255     0    66
 7 Pollo S‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Laure‚Ä¶ 2025-02-03     2 large sk‚Ä¶      351    11    37
 8 Citrus ‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Lorna  2025-01-28     ¬Ω cup fres‚Ä¶      440    29    17
 9 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
10 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Cacau  2020-03-05     3 tablespo‚Ä¶      451    11    83
# ‚Ñπ 117 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#En este caso, todas las recetas de pa√≠ses del cono sur. Es equivalente a:</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Chilean"</span> <span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Brazilian"</span><span class="sc">|</span> country <span class="sc">==</span> <span class="st">"Peruvian"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 127 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 2 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ JESSY‚Ä¶ 2022-09-25     1 cup whit‚Ä¶       NA    NA    NA
 3 Peruvia‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Kat N‚Ä¶ 2022-09-15     1 gallon w‚Ä¶      253     2    63
 4 Pebre    Chilean http‚Ä¶ Buckw‚Ä¶ 2025-04-09     1  dried a‚Ä¶      164    14    10
 5 Porotos‚Ä¶ Chilean http‚Ä¶ Stefa‚Ä¶ 2021-12-29     1 tablespo‚Ä¶      285     4    53
 6 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Socce‚Ä¶ 2023-02-13     1 cup brow‚Ä¶      255     0    66
 7 Pollo S‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Laure‚Ä¶ 2025-02-03     2 large sk‚Ä¶      351    11    37
 8 Citrus ‚Ä¶ Peruvi‚Ä¶ http‚Ä¶ Lorna  2025-01-28     ¬Ω cup fres‚Ä¶      440    29    17
 9 Ajiaco ‚Ä¶ Chilean http‚Ä¶ damas‚Ä¶ 2025-02-16     2 tablespo‚Ä¶      579    24    34
10 Brazili‚Ä¶ Brazil‚Ä¶ http‚Ä¶ Cacau  2020-03-05     3 tablespo‚Ä¶      451    11    83
# ‚Ñπ 117 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
</div>
<section id="ejercicio-slice-filter-arrange" class="level4" data-number="4.3.1">
<h4 data-number="4.3.1" class="anchored" data-anchor-id="ejercicio-slice-filter-arrange"><span class="header-section-number">4.3.1</span> üß© <em>Ejercicio: slice(), filter(), arrange()</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 75%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture1_copilot.png" class="img-fluid" width="950"></td>
<td><ul>
<li><p>Lee el data.frame ‚Äúmsleep.csv‚Äù. Pista: el delimitador entre datos es la coma (‚Äú,‚Äù).</p></li>
<li><p>Crea un subset que NO contenga los animales dom√©sticos (campo conservation). ¬øCuantas son?</p></li>
<li><p>Crea un subset de datos que contenga las filas de la 1 a la 5 y de la 18 a la 20, sobre esos datos obten los animales carn√≠voros. Ordena seg√∫n las horas de sue√±o ¬øQu√© animal duerme m√°s horas?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="select-sirve-para-seleccionar-columnas-utilizando-condiciones" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="select-sirve-para-seleccionar-columnas-utilizando-condiciones"><span class="header-section-number">4.4</span> <a href="https://dplyr.tidyverse.org/reference/select.html">Select</a>: sirve para seleccionar columnas utilizando condiciones</h3>
<p>Para ver como funciona esta funci√≥n vamos a usar un set de datos sobre el sue√±o de los mam√≠feros. Se llama ‚Äúmsleep‚Äù y viene en librer√≠a de tidyverse. Puedes encontrar mas informaci√≥n sobre este set de datos en ?msleep</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(recetas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "name"           "country"        "url"            "author"        
 [5] "date_published" "ingredients"    "calories"       "fat"           
 [9] "carbs"          "protein"        "avg_rating"     "total_ratings" 
[13] "reviews"        "prep_time"      "cook_time"      "total_time"    
[17] "servings"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ?select</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein) <span class="co">#solo nos interesan las columnas con informacion nutricional de cada receta</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, calories, fat, carbs, protein)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 5
   name                                           calories   fat carbs protein
   &lt;chr&gt;                                             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                     391    25    15      16
 2 Coney Island Knishes                                301    17    31       7
 3 Diana's Hawaiian Bread Rolls                         64     3     9       1
 4 Chilean Pebre                                       106     9     7       1
 5 Tex-Mex Sheet Cake                                  449    23    58       7
 6 Newfoundland Jigg's Dinner                          958    24   144      46
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew)      378    10    59      14
 8 Danish Butter Cookies                                90     5    10       1
 9 Lemon Poppy Seed Amish Friendship Bread             157     6    25       2
10 Pan con Tomate (Spanish Tomato Bread)               322    16    39       7
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede usar un patron de texto pra seleccionar colmnas</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"time"</span>)) <span class="co"># solo nos interesan las columnas relacionadas con el tiempo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 3
   prep_time cook_time total_time
       &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1        10         5         15
 2        30        75        180
 3        20        15        180
 4        10         0         10
 5        30        15         45
 6        30       165        675
 7        30        75        585
 8        40        30        155
 9         0         0          0
10         5         5         10
# ‚Ñπ 2,208 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># se pueden utilizar todo tipo de patrones de texto: https://rstudio.github.io/cheatsheets/strings.pdf</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name,author, <span class="fu">everything</span>()) <span class="co"># se puede usar para reordenar variables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     author country url   date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt;   &lt;chr&gt; &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ John ‚Ä¶ Greek   http‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ John ‚Ä¶ Jewish  http‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ CHIPP‚Ä¶ Austra‚Ä¶ http‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Heidi  Chilean http‚Ä¶ 2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Ann    Tex-Mex http‚Ä¶ 2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ MomWh‚Ä¶ Canadi‚Ä¶ http‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Buckw‚Ä¶ Italian http‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ TheOt‚Ä¶ Danish  http‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Laura‚Ä¶ Amish ‚Ä¶ http‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Luis ‚Ä¶ Spanish http‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">recipes_name=</span>name, country, author, reviews) <span class="co"># y para renombrarlas a la vez que hacemos la seleccion</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 4
   recipes_name                                   country         author reviews
   &lt;chr&gt;                                          &lt;fct&gt;           &lt;chr&gt;    &lt;dbl&gt;
 1 Saganaki (Flaming Greek Cheese)                Greek           John ‚Ä¶      22
 2 Coney Island Knishes                           Jewish          John ‚Ä¶       9
 3 Diana's Hawaiian Bread Rolls                   Australian and‚Ä¶ CHIPP‚Ä¶     104
 4 Chilean Pebre                                  Chilean         Heidi        1
 5 Tex-Mex Sheet Cake                             Tex-Mex         Ann         11
 6 Newfoundland Jigg's Dinner                     Canadian        MomWh‚Ä¶      32
 7 Pasta e Ceci (Italian Chickpea and Pasta Stew) Italian         Buckw‚Ä¶       3
 8 Danish Butter Cookies                          Danish          TheOt‚Ä¶      NA
 9 Lemon Poppy Seed Amish Friendship Bread        Amish and Menn‚Ä¶ Laura‚Ä¶      55
10 Pan con Tomate (Spanish Tomato Bread)          Spanish         Luis ‚Ä¶       2
# ‚Ñπ 2,208 more rows</code></pre>
</div>
</div>
<section id="ejercicio-select" class="level4" data-number="4.4.1">
<h4 data-number="4.4.1" class="anchored" data-anchor-id="ejercicio-select"><span class="header-section-number">4.4.1</span> üß© <em>Ejercicio: select()</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 72%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture2_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, crea un nuevo data.frame que contenga las variables relacionadas con el sue√±o.</p></li>
<li><p>Crea un nuevo objeto con el orden, g√©nero y nombre al principio y que incluya todas las dem√°s columnas excepto el tiempo despierto.</p></li>
<li><p>(extra) ¬øQue animal del orden Carnivora en estado vulnerable (conservation = vu) duerme m√°s?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="transformar-los-datos-y-calcular-nuevas-variables" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="transformar-los-datos-y-calcular-nuevas-variables"><span class="header-section-number">5</span> Transformar los datos y calcular nuevas variables</h2>
<section id="mutate-crear-modificar-o-eliminar-columnas" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="mutate-crear-modificar-o-eliminar-columnas"><span class="header-section-number">5.1</span> <a href="https://dplyr.tidyverse.org/reference/mutate.html">Mutate</a>: crear, modificar o eliminar columnas</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir una variable </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># desde cero</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># utilizando una variable para calcular otra (ej.- el numero de personas que       han dejado una puntuaci√≥n pero no han escrito un review)</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews) <span class="sc">|&gt;</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    ID, </span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    name<span class="sc">:</span>date_published, </span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    total_ratings,</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    reviews,</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    num_ratings_no_review,</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">everything</span>()</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 19
      ID name          country url   author date_published total_ratings reviews
   &lt;int&gt; &lt;chr&gt;         &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;                 &lt;dbl&gt;   &lt;dbl&gt;
 1     1 Saganaki (Fl‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07                25      22
 2     2 Coney Island‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26                10       9
 3     3 Diana's Hawa‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14               126     104
 4     4 Chilean Pebre Chilean http‚Ä¶ Heidi  2025-01-31                 1       1
 5     5 Tex-Mex Shee‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18                13      11
 6     6 Newfoundland‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12                40      32
 7     7 Pasta e Ceci‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12                 3       3
 8     8 Danish Butte‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19                NA      NA
 9     9 Lemon Poppy ‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21                65      55
10    10 Pan con Toma‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02                 2       2
# ‚Ñπ 2,208 more rows
# ‚Ñπ 11 more variables: num_ratings_no_review &lt;dbl&gt;, ingredients &lt;chr&gt;,
#   calories &lt;dbl&gt;, fat &lt;dbl&gt;, carbs &lt;dbl&gt;, protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;,
#   prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;, servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sobreescribir una variable.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fct_recode sirve para redefinir los niveles de un factor (ojo sintaxis:          new_name="old_name")</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span> </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>      ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 17
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 8 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#utilizar mas de una variable para generar otra</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"highest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>        )  <span class="sc">~</span> <span class="st">"lowest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,218 √ó 18
   name     country url   author date_published ingredients calories   fat carbs
   &lt;chr&gt;    &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;date&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Saganak‚Ä¶ Greek   http‚Ä¶ John ‚Ä¶ 2024-02-07     1 (4 ounce‚Ä¶      391    25    15
 2 Coney I‚Ä¶ Jewish  http‚Ä¶ John ‚Ä¶ 2024-11-26     2 ¬æ cups a‚Ä¶      301    17    31
 3 Diana's‚Ä¶ Austra‚Ä¶ http‚Ä¶ CHIPP‚Ä¶ 2022-07-14     1 ¬Ω cups w‚Ä¶       64     3     9
 4 Chilean‚Ä¶ Chilean http‚Ä¶ Heidi  2025-01-31     ¬Ω cup chop‚Ä¶      106     9     7
 5 Tex-Mex‚Ä¶ Tex-Mex http‚Ä¶ Ann    2025-02-18     2 cups all‚Ä¶      449    23    58
 6 Newfoun‚Ä¶ Canadi‚Ä¶ http‚Ä¶ MomWh‚Ä¶ 2022-08-12     1 (3 pound‚Ä¶      958    24   144
 7 Pasta e‚Ä¶ Italian http‚Ä¶ Buckw‚Ä¶ 2023-12-12     1 cup dry ‚Ä¶      378    10    59
 8 Danish ‚Ä¶ Danish  http‚Ä¶ TheOt‚Ä¶ 2020-06-19     4 cups all‚Ä¶       90     5    10
 9 Lemon P‚Ä¶ Amish ‚Ä¶ http‚Ä¶ Laura‚Ä¶ 2025-01-21     2 cups all‚Ä¶      157     6    25
10 Pan con‚Ä¶ Spanish http‚Ä¶ Luis ‚Ä¶ 2025-06-02     1 large to‚Ä¶      322    16    39
# ‚Ñπ 2,208 more rows
# ‚Ñπ 9 more variables: protein &lt;dbl&gt;, avg_rating &lt;dbl&gt;, total_ratings &lt;dbl&gt;,
#   reviews &lt;dbl&gt;, prep_time &lt;dbl&gt;, cook_time &lt;dbl&gt;, total_time &lt;dbl&gt;,
#   servings &lt;fct&gt;, classification &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer todo lo anterior concatenando todo el proceso y guardar el set de datos:</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>recetas_modif <span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ID =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(recetas),</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_ratings_no_review =</span> total_ratings <span class="sc">-</span> reviews,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">servings =</span> <span class="fu">fct_recode</span>(</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>      servings,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">una_persona =</span> <span class="st">"1"</span> ,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">dos_personas =</span> <span class="st">"2"</span>,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">tres_personas =</span> <span class="st">"3"</span>),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">classification =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      <span class="co"># utilizar varias variables para calcular otra nueva</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"highest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>      avg_rating <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">&amp;</span></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>        country <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Chilean"</span>,</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Brazilian"</span>,</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Peruvian"</span>,</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Cuban"</span>,</span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Puerto Rican"</span>,</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Colombian"</span>)  <span class="sc">~</span> <span class="st">"lowest‚Äërated_Latin_cuisine"</span>,</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"others"</span> <span class="co">#resto de casos</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-mutate" class="level4" data-number="5.1.1">
<h4 data-number="5.1.1" class="anchored" data-anchor-id="ejercicio-mutate"><span class="header-section-number">5.1.1</span> üß© <em>Ejercicio: mutate()</em></h4>
<table class="caption-top table">
<caption><a href="https://dplyr.tidyverse.org/reference/summarise.html">Summarise</a> y <a href="https://dplyr.tidyverse.org/reference/group_by.html">group by</a>: generar un nuevo <code>data.frame</code> resumiendo cada grupo a una fila</caption>
<tbody>
<tr class="odd">
<td><img src="images/mammals_sleeping_picture3_copilot.png" class="img-fluid" width="222"></td>
<td><ul>
<li><p>Con el data set de msleep, incluye una nueva columna con el porcentaje de horas que duerme cada animal al d√≠a</p></li>
<li><p>Haz una clasificaci√≥n que incluya tres categor√≠as: carnivoros amenazados, herviboros amenazados y otros. Para ello tienes que basarte en las columnas ‚Äúvore‚Äù y ‚Äúconservation‚Äù. Segun la UICN se considera amenazado cuando est√° en las categor√≠as vulnerable (vu), endangered (en) o critically endangered (cr)</p></li>
</ul></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># m√≠nimo y m√°ximo tiempo de preparaci√≥n</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prep_time_max =</span> <span class="fu">max</span>(prep_time),</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">prep_time_total_min =</span> <span class="fu">min</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 2
  prep_time_max prep_time_total_min
          &lt;dbl&gt;               &lt;dbl&gt;
1          1800                   0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># minimo, m√°ximo y media de prote√≠nas de todas las recetas</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein),</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein),</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1          NA           NA           0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a> <span class="do">## Ojo! si no queremos que tenga en cuenta los NA hay que a√±adir argumento na.rm=T</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 3
  protein_max protein_mean protein_min
        &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1         159         16.6           0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lo mismo que antes, pero por pa√≠s</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>recetas <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">protein_max =</span> <span class="fu">max</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_mean =</span> <span class="fu">mean</span>(protein, <span class="at">na.rm=</span>T),</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">protein_min =</span> <span class="fu">min</span>(prep_time, <span class="at">na.rm=</span>T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 √ó 4
   country                      protein_max protein_mean protein_min
   &lt;fct&gt;                              &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
 1 Greek                                 65        15.9            5
 2 Jewish                                62        11.7            0
 3 Australian and New Zealander          27         4.61           0
 4 Chilean                               54        12.3            0
 5 Tex-Mex                               56        23.2            0
 6 Canadian                              58        15.3            0
 7 Italian                               91        25.4            5
 8 Danish                                35         7.61           5
 9 Amish and Mennonite                   69         8.92           0
10 Spanish                               95        19.9            0
# ‚Ñπ 39 more rows</code></pre>
</div>
</div>
</section>
<section id="ejercicio-group_by-summrise" class="level4" data-number="5.1.2">
<h4 data-number="5.1.2" class="anchored" data-anchor-id="ejercicio-group_by-summrise"><span class="header-section-number">5.1.2</span> üß© <em>Ejercicio: group_by(), summrise()</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 74%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src=".png" class="img-fluid"><img src="images/mammals_sleeping_picture4_copilot.png" class="img-fluid"></td>
<td><ul>
<li><p>Con el data set de msleep, cuenta el n√∫mero de especies estudiadas por orden (order)</p></li>
<li><p>Calcula el promedio de horas de sue√±o seg√∫n el tipo de alimentaci√≥n ¬øduemen mas los carnivoros, los herb√≠voros o los insect√≠voros estudiados en este dataset?</p></li>
</ul></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="pivot-transformar-datos-a-formato-largo-o-ancho" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="pivot-transformar-datos-a-formato-largo-o-ancho"><span class="header-section-number">5.2</span> <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">Pivot</a>: transformar datos a formato largo o ancho</h3>
<p>Nos permite transformar datos de formato largo a ancho y viceversa. Nos puede convenir una forma u otra seg√∫n lo que queramos hacer con lo datos: presentarlos en una tabla, hacer transformaciones o an√°lisis, hacer un gr√°fico etc.</p>
<p>En la siguiente imagen, extra√≠da de <a href="https://www.epirhandbook.com/en/">The Epidemiologist R Handbook</a> se puede ver en qu√© consiste esta transformaci√≥n.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pivot_longer_epirhandbook.png" class="img-fluid figure-img" width="555"></p>
<figcaption>Pivot data transformation</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam<span class="ot">&lt;-</span> recetas <span class="sc">|&gt;</span>  <span class="fu">select</span>(name, country, fat, carbs,protein) <span class="sc">|&gt;</span>  <span class="fu">filter</span>(country<span class="sc">==</span><span class="st">"Vietnamese"</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># transformamos a formato largo, incluyendo los valores de grasas, carbohidratos y proteinas en una columna llamada "nutritional_value</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_long <span class="ot">&lt;-</span> recetas_Vietnam <span class="sc">|&gt;</span> </span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>fat<span class="sc">:</span>protein, <span class="at">names_to=</span><span class="st">"nutritional_value"</span>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">#volvemos al set original</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>recetas_Vietnam_wide<span class="ot">&lt;-</span> recetas_Vietnam_long <span class="sc">|&gt;</span> </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>nutritional_value, <span class="at">values_from=</span>value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-transformar-datos-largo-ancho" class="level4" data-number="5.2.1">
<h4 data-number="5.2.1" class="anchored" data-anchor-id="ejercicio-transformar-datos-largo-ancho"><span class="header-section-number">5.2.1</span> üß© <em>Ejercicio: transformar datos largo ancho</em></h4>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 80%">
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/pixar_image2_flickr.jpg" class="img-fluid" width="231"></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response_long. En este set de datos se encuentra la puntuaci√≥n de pel√≠culas pixar por la audiencia seg√∫n tres webs diferentes: rotten tomatoes, metacritic y critics‚Äô choice.</p></li>
<li><p>Reorganiza el set de datos para que la puntuaci√≥n de cada una de las webs se encuentre en una columna diferente</p></li>
<li><p>(extra) ¬øCual es el promedio de puntuaci√≥n por pel√≠cula teniendo en cuenta todas las fuentes? ¬øQue pel√≠cula es la mejor y peor puntuada de media?</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente: <a href="https://www.flickr.com/photos/harshlight/17294952412" class="uri">https://www.flickr.com/photos/harshlight/17294952412</a> (CC BY 2.0)</p>
</section>
</section>
</section>
<section id="unir-data.frames" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="unir-data.frames"><span class="header-section-number">6</span> Unir data.frames</h2>
<p><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">Joins</a></p>
<p><code>*_join()</code> a√±ade columnas de <code>y</code> (segundo data.frame) a <code>x</code> (primer data.frame), haciendo coincidir las observaciones en funci√≥n de la variable com√∫n.</p>
<p><img src="images/joins_from_dataWrangling_RStudio_cheatsheet.png" class="img-fluid" width="559"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join: left, right, full, inner</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">#datos de pais - capital- continente</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>paises <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"Espa√±a"</span>, <span class="st">"Francia"</span>, <span class="st">"Jap√≥n"</span>, <span class="st">"Brasil"</span>, <span class="st">"Sud√°frica"</span>),</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">capital =</span> <span class="fu">c</span>(<span class="st">"Madrid"</span>, <span class="st">"Par√≠s"</span>, <span class="st">"Tokio"</span>, <span class="st">"Brasilia"</span>, <span class="st">"Pretoria"</span>),</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">continente =</span> <span class="fu">c</span>(<span class="st">"Europa"</span>, <span class="st">"Europa"</span>, <span class="st">"Asia"</span>, <span class="st">"Am√©rica"</span>, <span class="st">"√Åfrica"</span>)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">#datos demogr√°ficos</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>demografia <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">pais =</span> <span class="fu">c</span>(<span class="st">"Espa√±a"</span>, <span class="st">"Jap√≥n"</span>, <span class="st">"Brasil"</span>, <span class="st">"Canad√°"</span>, <span class="st">"Sud√°frica"</span>),</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">poblacion_millones =</span> <span class="fu">c</span>(<span class="fl">47.4</span>, <span class="fl">125.7</span>, <span class="fl">203.1</span>, <span class="fl">39.6</span>, <span class="fl">60.0</span>),</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">extension_km2 =</span> <span class="fu">c</span>(<span class="dv">505990</span>, <span class="dv">377975</span>, <span class="dv">8515767</span>, <span class="dv">9984670</span>, <span class="dv">1221037</span>)</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co">#left join: se une al set de datos de pais los datos de demografia (si los hay)</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Francia   Par√≠s    Europa                   NA              NA
3 Jap√≥n     Tokio    Asia                    126.         377975
4 Brasil    Brasilia Am√©rica                 203.        8515767
5 Sud√°frica Pretoria √Åfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#right join: se une al set de datos de demografa los datos de pais (si los hay)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Jap√≥n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia Am√©rica                 203.        8515767
4 Sud√°frica Pretoria √Åfrica                   60         1221037
5 Canad√°    &lt;NA&gt;     &lt;NA&gt;                     39.6       9984670</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">#inner join: une los paises presentes en los dos set de datos</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 5
  pais      capital  continente poblacion_millones extension_km2
  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;         &lt;dbl&gt;
1 Espa√±a    Madrid   Europa                   47.4        505990
2 Jap√≥n     Tokio    Asia                    126.         377975
3 Brasil    Brasilia Am√©rica                 203.        8515767
4 Sud√°frica Pretoria √Åfrica                   60         1221037</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#full join: une todos los paises presentes en uno u otro.</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>paises_demo_full_join<span class="ot">&lt;-</span><span class="fu">full_join</span>(paises, demografia, <span class="at">by=</span><span class="st">"pais"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="guardar-datos" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="guardar-datos"><span class="header-section-number">7</span> Guardar datos</h2>
<p><a href="https://readr.tidyverse.org/reference/write_delim.html">Write_delim</a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>(paises_demo_full_join, <span class="at">file =</span> <span class="st">"paises_demo_full_join.csv"</span>, <span class="at">delim =</span> <span class="st">";"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co"># en file hay que especificar el directorio donde queremos que se guarde. Si no, se guardar√° en el directorio de trabajo (getwd())</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="ejercicio-_join-y-exportar-datos" class="level4" data-number="7.0.1">
<h4 data-number="7.0.1" class="anchored" data-anchor-id="ejercicio-_join-y-exportar-datos"><span class="header-section-number">7.0.1</span> üß© <em>Ejercicio: *_join() y exportar datos</em></h4>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td><a href="https://www.flickr.com/photos/harshlight/6988729286"><img src="images/pixar_image3_flickr.jpg" class="img-fluid" width="293" alt="Fuente"></a></td>
<td><ul>
<li><p>Lee el set de datos pixar_public_response y pixar_films</p></li>
<li><p>Explora los dos data sets con funciones como head() para ver las primeras lineas, glimpse() o View()</p></li>
<li><p>une ambos datasets en uno solo para tener en un mismo data frame toda la informaci√≥n. Elige el campo m√°s apropiado de uni√≥n</p></li>
<li><p>Guarda el nuevo set de datos como pixar_joint</p></li>
</ul></td>
</tr>
</tbody>
</table>
<p>Fuente imagen: <a href="https://www.flickr.com/photos/harshlight/6988729286" class="uri">https://www.flickr.com/photos/harshlight/6988729286</a> (CC BY 2.0)</p>
</section>
</section>
<section id="ejercicio-final" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="ejercicio-final"><span class="header-section-number">8</span> üß© <em>Ejercicio final</em></h2>
<p>Queremos estudiar caracter√≠sticas f√≠sicas de los ping√ºinos y relacionarlas con el tipo de isla donde viven. Para ello, realiza las siguientes tareas utilizando exclusivamente funciones del tidyverse:</p>
<p>üêß Instala el paquete penguins y c√°rgalo</p>
<p>üêß Crea un data frame con dos columnas, la primera denominada ‚Äúislands_info‚Äù con los valores ‚ÄúTorgersen‚Äù, ‚ÄúBiscoe‚Äù, ‚ÄúDream‚Äù y otra llamada ‚Äúprotected_area‚Äù con los valores ‚ÄúSi‚Äù, ‚ÄúNo‚Äù, ‚ÄúSi‚Äù</p>
<p>üêßSelecciona los pinguinos que tengan picos de m√°s de 40mm (bill_len) y que pesen menos de 4.5kg (recuerda que puedes ver m√°s informaci√≥n de tu dataset en ?penguins)</p>
<p>üêßDe los datos filtrados conserva √∫nicamente las columnas species, island, bill_length, bill_depth y body_mass</p>
<p>üêßA√±ade una columna llamada bill_ratio que calcule la relaci√≥n entre longitud y profundidad del pico</p>
<p>üêßUne el resultado con el dataset islands _info, de forma que cada ping√ºino quede asociado a si su isla es un √°rea protegida.</p>
<p>üêßCrea una columna categoria_peso con valores ‚Äúligero‚Äù, ‚Äúmedio‚Äù, ‚Äúpesado‚Äùseg√∫n los umbrales que quieras o, m√°s dificil, con terciles de body_mass.</p>
<p>üêßCuenta cuantos individuos hay ligeros, medios y pesados en zonas protegidas vs zonas no protegidas</p>
<p>üêß(EXTRA) Responde a las siguientes preguntas:</p>
<p>üêß¬øCual es la m√°xima relaci√≥n entre longitud y profundidad del pico de los individuos en zonas protegidas? ¬øy no protegidas? ¬øCuanto pesa el individuo m√°s pesado?</p>
</section>
<section id="enlaces-de-inter√©s" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="enlaces-de-inter√©s"><span class="header-section-number">9</span> Enlaces de inter√©s</h2>
<ul>
<li><p><a href="https://rstudio-education.github.io/hopr/">Hands-On Programming with R</a></p></li>
<li><p><a href="https://r4ds.had.co.nz/transform.html">R for data Science (Data transformation)</a></p></li>
<li><p><a href="http://adv-r.had.co.nz/Style.html">Style guide</a></p></li>
<li><p><a href="https://www.tidyverse.org">P√°gina web de <em>tidyverse</em></a></p></li>
<li><p><a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">Cheat sheet the dplyr</a></p></li>
<li><p><a href="https://www.revistaecosistemas.net/index.php/ecosistemas/article/view/2129">Quince consejos para mejorar nuestro c√≥digo y flujo de trabajo con R</a></p></li>
</ul>
<hr>
<details>
<summary>
Session Info
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-12-30 19:32:36 CET"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.5.2 (2025-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 11 x64 (build 26200)

Matrix products: default
  LAPACK version 3.12.1

locale:
[1] LC_COLLATE=Spanish_Spain.utf8  LC_CTYPE=Spanish_Spain.utf8   
[3] LC_MONETARY=Spanish_Spain.utf8 LC_NUMERIC=C                  
[5] LC_TIME=Spanish_Spain.utf8    

time zone: Europe/Madrid
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] lubridate_1.9.4 forcats_1.0.1   stringr_1.6.0   dplyr_1.1.4    
 [5] purrr_1.2.0     readr_2.1.6     tidyr_1.3.1     tibble_3.3.0   
 [9] ggplot2_4.0.1   tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] bit_4.6.0          gtable_0.3.6       jsonlite_2.0.0     crayon_1.5.3      
 [5] compiler_4.5.2     tidyselect_1.2.1   parallel_4.5.2     scales_1.4.0      
 [9] yaml_2.3.11        fastmap_1.2.0      R6_2.6.1           generics_0.1.4    
[13] knitr_1.50         htmlwidgets_1.6.4  pillar_1.11.1      RColorBrewer_1.1-3
[17] tzdb_0.5.0         rlang_1.1.6        utf8_1.2.6         stringi_1.8.7     
[21] xfun_0.54          S7_0.2.1           bit64_4.6.0-1      timechange_0.3.0  
[25] cli_3.6.5          withr_3.0.2        magrittr_2.0.4     digest_0.6.39     
[29] grid_4.5.2         vroom_1.6.7        rstudioapi_0.17.1  hms_1.1.4         
[33] lifecycle_1.0.4    vctrs_0.6.5        evaluate_1.0.5     glue_1.8.0        
[37] farver_2.1.2       rmarkdown_2.30     tools_4.5.2        pkgconfig_2.0.3   
[41] htmltools_0.5.9   </code></pre>
</div>
</div>
</details>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>