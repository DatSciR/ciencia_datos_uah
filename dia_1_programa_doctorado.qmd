---
title: "D√≠a 1 - Introduccion a R y Rstudio. Programa de dcotorado UAH"
author: "Paloma Ruiz Benito, Ver√≥nica Cruz Alonso, Marina Rodes Blanco y Juli√°n Tijerin Trivi√±o"
date: "2025-12-22"
format:
  html:
    code-copy: true
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, include = TRUE)
```

Paloma Ruiz Benito (paloma.ruizb\@uah), Ver√≥nica Cruz-Alonso (veronica.cruza\@uah), Marina Rodes Blanco (marina.rodesb\@uah.es) y Juli√°n Tijerin Trivi√±o (julian.tijerint\@uah.es) somos investigadores de la Universidad de Alcal√°, en el grupo de Ecolog√≠a y Restauraci√≥n Forestal (<https://portalcientifico.uah.es/grupos/9603/detalle>) y en el Grupo de Investigaci√≥n en Teledetecci√≥n Ambiental (<https://geogra.uah.es/gita/>).

Junto con Julen Astigarraga Urcelay (colaborador y amigo), pubilcamos los materiales de los curso que impartimos en DatSciR.

Y vosotros **¬øqui√©nes sois?**

LINK ENCUESTA: <https://forms.gle/zmqTKWiwM3qVtJi79>

**¬øY qu√© es R y de d√≥nde procede?**

[Un poco de historia de R contada por Jumping Rivers](https://www.jumpingrivers.com/misc/timeline/)

## Presentaci√≥n

En este curso exploraremos los **fundamentos te√≥ricos** y las **aplicaciones pr√°cticas** de la ciencia de datos en R. Combinaremos material preparado con los problemas espec√≠ficos de cada asistente, los cuales ir√°n evolucionando d√≠a a d√≠a. El objetivo principal es que tanto aquellos con conocimientos b√°sicos en ciencia de datos como aquellos con un nivel m√°s avanzado puedan beneficiarse y llevar consigo nuevos aprendizajes al finalizar el curso.

![Modelo de ciencia de datos de Hadley Wickham, Mine √áetinkaya-Rundel y Garrett Grolemund. Traducido de <https://r4ds.hadley.nz/>](images/datascience.png){#fig-datascience alt="Modelo de ciencia de datos de Hadley Wickham, Mine √áetinkaya-Rundel y Garrett Grolemund. Traducido de https://r4ds.hadley.nz/intro#fig-ds-diagram"}

En este curso no veremos ning√∫n d√≠a modelizar (ya que hay un curso espec√≠fico programado para ello en junio de este a√±o), pero nos centraremos en la gesti√≥n de datos, visualizaci√≥n, trabajo en equipo y comunicaci√≥n. ¬°Esperamos que os sea de utilidad!

## Estructura del curso

+------------------------------+--------------------------------------------------------------------+
| D√≠as de trabajo              | Contenido                                                          |
+==============================+====================================================================+
| Introducci√≥n                 | Introducci√≥n a la programaci√≥n en R                                |
|                              |                                                                    |
| ¬øQu√© necesitamos?            | Consejos b√°sicos de programaci√≥n                                   |
|                              |                                                                    |
|                              | Tipos de objetivos y lo b√°sico                                     |
+------------------------------+--------------------------------------------------------------------+
| Organizando datos            | Tidyverse                                                          |
|                              |                                                                    |
| ¬øC√≥mo lo organizamos?        | Importar, filtrar, seleccionar, transformar, unir y exportar datos |
+------------------------------+--------------------------------------------------------------------+
| Visualizaci√≥n                | Fundamentos de visualizaci√≥n                                       |
|                              |                                                                    |
| ¬øC√≥mo lo mostramos?          | Bases: gr√°ficos por capas                                          |
|                              |                                                                    |
|                              | Visualizaci√≥n avanzada                                             |
+------------------------------+--------------------------------------------------------------------+
| Colaboraci√≥n                 | Introducci√≥n a Git                                                 |
|                              |                                                                    |
| ¬øC√≥mo trabajamos en equipo?  | Introducci√≥n a GitHub                                              |
|                              |                                                                    |
|                              | Flujo de trabajo en Git y GitHub                                   |
|                              |                                                                    |
|                              | Trabajos colaborativos                                             |
+------------------------------+--------------------------------------------------------------------+

## Din√°mica del curso

Cada d√≠a combinaremos teor√≠a con ejercicios. Idealmente, el cuarto y quinto d√≠a tendremos tiempo para que cada uno trabaje con sus propios datos. Todos los apuntes y ejercicios resueltos estar√°n disponibles en el [repositorio de GitHub del curso](https://github.com/DatSciR/ciencia_datos). Si alguien tiene alguna duda o sugerencia, nos puede contactar por correo electr√≥nico o publicarlo en las [discusiones del repositorio de GitHub](https://github.com/DatSciR/ciencia_datos/discussions/2)

¬°as√≠ aprenderemos entre todos! üòâ

![El proceso de aprendizaje en R, por Allison Horst.[https://allisonhorst.com/everything-else](https://allisonhorst.com)](images/e684f0da-13b1-4d00-ab25-37814e79ee1e.png){alt="El proceso de aprendizaje en R, por Allison Horst. https://allisonhorst.com/everything-else" width="362"}

## Antes de empezar. Estamos de acuerdo con el c√≥digo √©tico y hacemos un ejemplo de este curso

Lee: <https://www.contributor-covenant.org/version/2/0/code_of_conduct/> e informaci√≥n sacada de <https://datasciencebox.org/>

![](images/data-science-box.png)

## Objetivos d√≠a 1

-   Conceptos b√°sicos de R (üìù)

-   Consejos de programaci√≥n (üßë‚Äçüéì )

## Conceptos b√°sicos de R (üìù)

-   üéØ **R**: lenguaje de programaci√≥n din√°mico (se interpreta el c√≥digo en el momento que se ejecuta).

-   üéØ **RStudio**: entorno de desarrollo integrado para programar en R. Tiene cuatro zonas diferenciadas: el editor de c√≥digo, la consola (donde se ejecuta el c√≥digo), el navegador del espacio de trabajo (con el entorno ‚Äì*environment-* y el historial de comandos) y el mix de abajo a la derecha (Archivos, Gr√°ficos, Paquetes, Ayuda).

-   üéØ **Objetos**: cualquier elemento almacenado con un nombre espec√≠fico. Pueden ser de muchos tipos: `numeric`, `integer`, `logical`, `data.frame`, `SpatVector`, etc.

El operador ":" genera un grupo de n√∫meros enteros

```{r}
1:6
```

Ahora mismo hemos generado un grupo de seis n√∫mero de enteros, pero no se han guardado en ning√∫n sitio en la memoria del ordenador. Si quieres usar este vector de nuevo, debes guardarlo, creando un objeto en R

-   üéØ **Funciones**: objetos de R que toman un vector de entrada y dan como resultado otro vector haciendo una acci√≥n concreta (funcionalidad espec√≠fica). Son los *bloques de construcci√≥n* fundamentales en cualquier script de R que es un lenguaje funcional.

    Los **paquetes o librerias** contienen funciones reutilizables, documentaci√≥n sobre c√≥mo usarlas y datos de ejemplo. Son las unidades fundamentales de c√≥digo reproducible en R. La primera vez que necesitas un paquete o librer√≠a lo instalas, la segunda lo cargas en tu sesi√≥n de trabajo, con las funciones `install.packages()`, `library()`.

> Para comprender la programaci√≥n en R, resultan √∫tiles dos lemas:
>
> \- Todo lo que existe es un objeto.
>
> \- Todo lo que sucede es una llamada a funci√≥n.
>
> ‚Äî John Chambers ([Advanced R](https://adv-r.hadley.nz/index.html))

## El espacio de trabajo

El directorio de trabajo es la carpeta de nuestro ordenador donde estamos trabajando. El script es el archivo b√°sico que almacena c√≥digo de R de nuestra sesi√≥n de trabajo.

*¬°En este curso debes usar las TECLAS R√ÅPIDAS para programar!*

``` r
getwd() # saber directorio de trabajo 
setwd("C:/Users/uah/OneDrive - Universidad de Alcala/GitHub_Projects/programacion-TIG") # ojo con la ruta / o \\
```

‚ÑπÔ∏è **Informaci√≥n importante:**\
Cuando ejecutes un comando en RStudio, recuerda que el resultado aparece inmediatamente en la consola.

No es recomendable establecer el directorio de trabajo manualmente porque el trabajo deja de ser reproducible. Es mejor crear desde el principio un proyecto en R ligado a un directorio relativo que contenga todos los datos de entrada, los scripts y los resultados del script. Al abrir el proyecto, se sincroniza con pesta√±a Files.

üí°Para crear un proyecto: Archivo \> Nuevo proyecto

#### Ejercicio en clase

Crea un proyecto para el Curso: **doctorado_UAH_R**. Una vez creado genera una carpeta de "scripts" y una de "resultados". Revisa en tu panel de Rstudio a la derecha, abajo, que archivos tienes. ¬øC√≥mo has nombrado tu archivo de trabajo actual? ¬°Revisa y cambia el nombre al final de la sesi√≥n!

## Instalar y cargar paquetes. Pidiendo ayuda.

üí°Para ejecutar una l√≠nea de c√≥digo usa el comando: *Ctrl + Enter (Ctrl + R)*

``` r
# install.packages("tidyverse", dep = T) # dep = T significa instalar dependencias

library(tidyverse)

install.packages(c("swirl", "swirlify"))
library(swirlify)
```

#### Ejercicio

¬øpuedes buscar ayuda sobre qu√© es el paquete tidyverse y qu√© hace? ¬øpuedes buscar ayuda sobre la funci√≥n "select"?

``` r
?tidyverse
```

``` r
?select
```

## Usando R como calculadora: operadores en R

En R, el c√≥digo que tecleas se llama comando. La interfaz de R studio es sencilla, cuando en el *prompt* de la consola de RStudio ejecutas una l√≠nea de comando da instrucciones al ordenador para hacer la operaci√≥n escrita.

#### Ejercicio

Usa R como una calculadora, mira como sumar, multiplicar, restar y dividir "6" y "5". ¬øPodr√≠as hacer el exponte entre ambos n√∫meros? Discute con tu compa√±ero d√≥nde est√°n tus objetos guardados.

## Sintaxis en R: Estilo

![](images/Importance-style-guide.png)

### Nombrar objetos y archivos

Al asignar un nombre a un objeto podemos llamarlos siempre que necesitemos a lo largo del script. No es necesario guardar (exportar) la mayor√≠a de los objetos que tenemos en el entorno de trabajo de R a nuestro ordenador, lo importante es conservar el script con el que se generan.

#### Ejercicio

¬øEs lo mismo nombrar a un objeto "x" o "X"?¬øCrees que te puede dar problemas en el c√≥digo nombrar variables con may√∫sculas y min√∫sculas? Para verlo, nombra dos objetos

```{r}
x <- 4.5 
X <- "objeto" # si el objeto contiene letras, usar comillas 
class(x) # funci√≥n para ver de que clase es nuestro objeto 
```

üìùR es sensible a las may√∫sculas. Mejor no usarlas.

üìùLos nombre de los objetos deben ser descriptivos y no deben contener s√≠mbolos especiales. Es mejor usar nombres largos pero descriptivos, que cortos o sin sentido. Excepci√≥n: para archivos temporales yo generalmente uso "kk" que me recuerda a recordar que este archivo es temporal y prescindible...

![](images/FINALdoc.png)

> Hay dos cosas dif√≠ciles en la Ciencia de Computaci√≥n:
>
> \- Invalidar cach√©s.
>
> \- Poner nombres a cosas
>
> ‚Äî Phil Carton

üìùUsa nombre memorables y correctos para tus variables:

‚úÖ Siempre empiezan por letras (en el caso de objetos)

‚úÖ Solo pueden contener letras, numeros, "\_" y ".".

‚úÖ Los nombres deben ser legibles por m√°quinas: No uses espacios, caracteres especiales o palabras reservadas.: (`^`, `!`, `$`, `@`, `+`, `-`, `/`, `*`).

‚úÖ Usa min√∫sculas separadas por "\_"

‚úÖ Los nombres deben ser legibles para humanos: describen lo que continene. Para variables usa nombres y para funciones verbos.

‚úÖ Evita el uso de nombres comunes Object names must start with a letter and can only contain letters, numbers, \_, and ..

üí° Numerar los scripts e incluso las salidas (tablas, figuras, etc.) ayuda a simplificar el orden y trabajar comodamente mediante proyectos.

#### Ejercicio

Lee la gu√≠a de estilo de tidyverse (con la que trabajaremos en el curso):

Secci√≥n 2.2.: <https://r4ds.hadley.nz/workflow-style.html> Secci√≥n 4.1. y 4.2.: <https://style.tidyverse.org/syntax.html>

Contesta a la actividad que est√° disponible en el aula virtual.

### Tipos de objetos ¬øcon qu√© datos trabajas?

#### Vectores

Un **vector** es la estructura de datos m√°s simple en R. Es una colecci√≥n de uno o m√°s elementos del mismo tipo (n√∫meros, texto o valores l√≥gicos).

```{r} # Vector con coordenadas de latitud lat <- c(41.4, 42.1, 40.9, 39.5)  lat   # Vector con valores de altitud (en metros) alt <- c(110, 450, 440, 200) alt   # Podemos operar con ellos alt + 10       # sumar 10 metros a todas las altitudes alt * 0.001    # convertir a kil√≥metros mean(alt)      # promedio de altitudes max(alt)       # altitud m√°xima}
```

### Ejercicio 1 (vectores)

-   Crea un vector llamado `long` con cuatro valores de longitud de tu elecci√≥n.
-   Calcula la media y el m√≠nimo de `long`.
-   Suma 0.5 a todos los valores de `long`.
-   Combina `lat` y `long` en un √∫nico vector (ll√°malo `coords_comb`).

```{r sol_vectores, echo = FALSE} # Soluci√≥n sugerida (oculta): puedes activar echo = TRUE para mostrar long <- c(-3.7, -3.6, -3.8, -3.9) mean(long) min(long) long_plus <- long + 0.5 coords_comb <- c(lat, long) coords_comb}
```

------------------------------------------------------------------------

## Matrices

Las **matrices** son datos bidimensionales que contienen datos del mismo tipo. En TIG, pueden servir para representar un **raster** (por ejemplo, una matriz de elevaciones o pendientes).

```{r matrices} # Crear 15 valores de elevaci√≥n simulados elev <- sample(100:500, size = 15, replace = TRUE)  # Transformar a matriz 3x4 (3 filas, 4 columnas) mat_elev <- matrix(elev, nrow = 3, ncol = 4) mat_elev  # Resumen de la matriz summary(mat_elev)}
```

### Ejercicio 2 (matrices)

-   Crea una matriz de 5x5 con valores aleatorios entre 0 y 1 (piensa en ello como un raster de pendientes).
-   Calcula el valor m√°ximo de esa matriz.
-   ¬øQu√© celda (fila, columna) tiene el m√°ximo?

```{r sol_matrices, echo = FALSE} # Soluci√≥n sugerida (oculta) mat5 <- matrix(runif(25, min = 0, max = 1), nrow = 5, ncol = 5) max_val <- max(mat5) which(mat5 == max_val, arr.ind = TRUE)  # fila, columna del m√°ximo}
```

------------------------------------------------------------------------

## Data frames

Un **data.frame** es una tabla (2D) donde cada columna puede ser de distinto tipo. Es la estructura m√°s usada para an√°lisis y la que normalmente acompa√±a a una capa espacial (atributos).

```{r dataframes} municipios <- data.frame(   nombre = c("A", "B", "C"),   poblacion = c(1200, 5400, 3100),   alt_media = c(350, 200, 480) )  municipios summary(municipios)}
```

### Ejercicio 3 (data.frames)

-   Crea un `data.frame` llamado `rios` con tres r√≠os: columnas `nombre`, `longitud_km` y `caudal_m3s`.
-   Calcula la longitud media de los r√≠os.

```{r sol_dataframes, echo = FALSE} # Soluci√≥n sugerida (oculta) rios <- data.frame(   nombre = c("Rio1", "Rio2", "Rio3"),   longitud_km = c(45.2, 120.5, 78.0),   caudal_m3s = c(12.3, 45.1, 8.7) ) mean(rios$longitud_km)}
```

------------------------------------------------------------------------

## Listas

Una **lista** puede contener objetos heterog√©neos: vectores, matrices, data.frames, modelos, etc. En TIG es muy √∫til para agrupar varias capas o resultados de un an√°lisis en un √∫nico objeto.

```{r listas} info_tig <- list(   coords = list(lat = lat, long = c(-3.7, -3.6, -3.8, -3.9)),   municipios = municipios,   elev_matrix = mat_elev )  str(info_tig)}
```

### Ejercicio 4 (listas)

-   Crea una lista que contenga: tu vector `long`, la matriz 5x5 `mat5` (del ejercicio) y el `data.frame` `rios`.
-   Accede al primer elemento de la lista y mu√©stralo.

```{r sol_listas, echo = FALSE} # Soluci√≥n sugerida (oculta) mi_lista <- list(long = c(-3.7, -3.6, -3.8, -3.9), pendiente = mat5, rios = rios) mi_lista[[1]]  # acceso al primer elemento}
```

------------------------------------------------------------------------

## Indexaci√≥n (acceder a elementos)

Saber indexar es esencial: permite leer o modificar valores puntuales.

```{r indexacion} # Vectores alt alt[2]          # segunda altitud  # Matrices: [fila, columna] mat_elev mat_elev[1, 3]  # fila 1, columna 3 mat_elev[1, ]   # todas las columnas de la fila 1 mat_elev[, 2]   # todas las filas de la columna 2  # Data.frame municipios municipios[2, "poblacion"]   # poblaci√≥n del municipio B municipios$poblacion         # vector de la columna 'poblacion'  # Listas mi_lista <- list(a = 1:4, b = letters[1:4]) mi_lista[[2]]    # segundo elemento (por posici√≥n) mi_lista$b       # elemento por nombre}
```

### Ejercicio 5 (indexaci√≥n)

-   Accede a la tercera coordenada de `long`.
-   Selecciona el valor m√°ximo de `alt`.
-   Extrae la altitud media del municipio C del data.frame `municipios`.

```{r, echo = FALSE} # Soluci√≥n sugerida (oculta) long <- c(-3.7, -3.6, -3.8, -3.9) long[3] max(alt) municipios[municipios$nombre == "C", "alt_media"]}
```

## Session info (√∫til para reproducibilidad)

```{r session_info} Sys.time() sessionInfo()}
```
