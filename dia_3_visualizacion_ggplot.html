<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juli√°n Tijer√≠n Trivi√±o, Marina Rodes Blanco, Ver√≥nica Cruz Alonso y Paloma Ruiz Benito">
<meta name="dcterms.date" content="2025-12-29">

<title>D√≠a 3. Visualizaci√≥n de datos en R. Curso de Doctorado 2025-2026</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="dia_3_visualizacion_ggplot_files/libs/clipboard/clipboard.min.js"></script>
<script src="dia_3_visualizacion_ggplot_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="dia_3_visualizacion_ggplot_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="dia_3_visualizacion_ggplot_files/libs/quarto-html/popper.min.js"></script>
<script src="dia_3_visualizacion_ggplot_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dia_3_visualizacion_ggplot_files/libs/quarto-html/anchor.min.js"></script>
<link href="dia_3_visualizacion_ggplot_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dia_3_visualizacion_ggplot_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dia_3_visualizacion_ggplot_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dia_3_visualizacion_ggplot_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dia_3_visualizacion_ggplot_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">D√≠a 3. Visualizaci√≥n de datos en R. Curso de Doctorado 2025-2026</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Juli√°n Tijer√≠n Trivi√±o, Marina Rodes Blanco, Ver√≥nica Cruz Alonso y Paloma Ruiz Benito </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 29, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Bienvenidos al <strong>D√≠a 3: Visualizaci√≥n de datos en R con ggplot2</strong>. Este documento est√° pensado como material de clase. Seguiremos paso a paso las explicaciones y los bloques de c√≥digo en RStudio, ejecutando los ejemplos y realizando los ejercicios propuestos. Usaremos la base de datos <strong><code>palmerpenguins</code></strong> y complementaremos con ejemplos breves y mapas.</p>
<section id="objetivos" class="level1">
<h1>1. Objetivos</h1>
<ul>
<li><p>Familiarizarse con la filosof√≠a y las funciones fundamentales del paquete de visualizaci√≥n de datos <strong><code>ggplot2</code></strong>.</p></li>
<li><p>Comprender y utilizar herramientas avanzadas de <strong><code>ggplot2</code></strong> para una visualizaci√≥n m√°s elaborada.</p></li>
<li><p>Adquirir la capacidad de generar figuras de calidad publicable para art√≠culos cient√≠ficos.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-data-science" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-science-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/datascience.png" class="img-fluid figure-img" width="2206">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-science-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Figure 1: Data science model by Hadley Wickham, Mine √áetinkaya-Rundel and Garrett Grolemund. Translated from https://r4ds.hadley.nz/intro#fig-ds-diagram
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="introducci√≥n" class="level1">
<h1>2.Introducci√≥n</h1>
<p><strong>ggplot2</strong> es uno de los paquetes m√°s utilizados en R para la visualizaci√≥n de datos cient√≠ficos y forma parte del ecosistema tidyverse, un conjunto de paquetes dise√±ados para trabajar con datos de forma coherente, eficiente y reproducible. En tidyverse se proporcionan herramientas para importar, ordenar, transformar, analizar y visualizar datos siguiendo una misma filosof√≠a, lo que facilita un flujo de trabajo claro y estructurado, especialmente √∫til en investigaci√≥n cient√≠fica.</p>
<p>A diferencia de otros enfoques m√°s inmediatos, ggplot2 se basa en la Grammar of Graphics, una filosof√≠a que entiende los gr√°ficos como la combinaci√≥n de componentes bien definidos: los datos, las variables que se representan (est√©ticas), las formas geom√©tricas que las visualizan, las escalas y el contexto visual. Esta l√≥gica resulta especialmente √∫til en ecolog√≠a, donde trabajamos con datasets multidimensionales, heterog√©neos y, a menudo, espaciales o temporales.</p>
<p>En lugar de ‚Äúdibujar‚Äù un gr√°fico de una sola vez, ggplot2 nos invita a construirlo por capas, a√±adiendo informaci√≥n de manera progresiva. Este enfoque favorece la exploraci√≥n de los datos, permite modificar y reutilizar gr√°ficos con facilidad, y encaja muy bien con los principios de ciencia reproducible. Un mismo conjunto de datos puede representarse de m√∫ltiples maneras simplemente cambiando una capa o una est√©tica, lo que resulta ideal para comparar escenarios, especies, periodos temporales o gradientes ambientales.</p>
<p>En el contexto de la ecolog√≠a y la gesti√≥n ambiental, <strong>ggplot2</strong> es una herramienta clave para crear figuras como mapas de distribuci√≥n de especies, relaciones entre variables ambientales, comparaciones entre tratamientos de manejo o an√°lisis de respuestas ecol√≥gicas frente a perturbaciones. A lo largo de esta sesi√≥n, aprenderemos a utilizar ggplot2 desde sus elementos m√°s b√°sicos hasta funciones m√°s avanzadas, con el objetivo de generar gr√°ficos claros, informativos y aptos para su inclusi√≥n en informes t√©cnicos o art√≠culos cient√≠ficos.</p>
<section id="visualizaci√≥n-eficaz-y-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="visualizaci√≥n-eficaz-y-ggplot2">2.1. Visualizaci√≥n eficaz y ggplot2</h2>
<p>Antes de empezar a crear gr√°ficos, es importante reflexionar sobre qu√© hace que una visualizaci√≥n sea realmente buena. Un buen gr√°fico no depende solo de que sea visualmente atractivo, sino de dos dimensiones fundamentales:</p>
<ul>
<li><p>La ejecuci√≥n, es decir, c√≥mo de bien construido est√° el gr√°fico desde el punto de vista t√©cnico y visual (claridad, legibilidad, coherencia), y</p></li>
<li><p>La adecuaci√≥n, que responde a preguntas clave como qu√© queremos comunicar, a qui√©n va dirigido, con qu√© objetivo y en qu√© contexto se va a utilizar.</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-data-science-example" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-science-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/buen-grafico.png" class="img-fluid figure-img" width="1255">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-science-example-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Figure 2: Conceptual framework of a ‚Äúgood graphic,‚Äù considering both execution (how well it is constructed) and appropriateness (what is being communicated, to whom, where, and why). Adapted from Good Charts by Scott Berinato.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Este enfoque conceptual, adaptado de Good Charts de Scott Berinato, es especialmente relevante, mostr√°ndose que los gr√°ficos suelen servir para apoyar decisiones de gesti√≥n, comunicar resultados a distintos actores o sintetizar sistemas complejos.</p>
<p>En este bloque aprenderemos a representar datos de forma efectiva utilizando el paquete <strong>ggplot2</strong>, parte del ecosistema tidyverse (meta-paquete). ggplot2 permite generar gr√°ficos claros, informativos y est√©ticamente atractivos con relativamente poco esfuerzo, lo que lo convierte en una herramienta muy eficiente para el an√°lisis exploratorio y la comunicaci√≥n cient√≠fica. Al mismo tiempo, es un paquete extremadamente flexible y potente, capaz de adaptarse a una gran variedad de tipos de datos, lo que explica su amplia adopci√≥n en la comunidad cient√≠fica.</p>
<p><strong>ggplot2</strong> est√° construido siguiendo la gram√°tica de los gr√°ficos (Grammar of Graphics). Esto implica que, al utilizarlo, el usuario no ‚Äúdibuja‚Äù un gr√°fico de una sola vez, sino que lo construye progresivamente por capas, de forma similar a una pintura. El flujo de trabajo habitual consiste en crear un lienzo inicial, a√±adir los datos, definir c√≥mo se mapean las variables a elementos visuales, incorporar geometr√≠as, y finalmente ajustar etiquetas, escalas o temas. Este enfoque facilita tanto la exploraci√≥n de los datos como la modificaci√≥n y reutilizaci√≥n de gr√°ficos.</p>
<p>Otra caracter√≠stica fundamental de <strong>ggplot2</strong> es que funciona de manera √≥ptima con datos ordenados (tidy data), donde cada variable es una columna y cada observaci√≥n una fila. Esta estructura resulta especialmente adecuada para los an√°lisis modernos, en los que se combinan m√∫ltiples variables temporales y espaciales, y favorece un flujo de trabajo reproducible y transparente.</p>
<hr>
</section>
<section id="paquetes-y-datos" class="level2">
<h2 class="anchored" data-anchor-id="paquetes-y-datos">Paquetes y datos</h2>
<p>Primero de todo, tenemos que realizar la <strong>instalaci√≥n y carga los paquetes necesarios</strong> si a√∫n no los tenemos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Se usa esta l√≠nea porque comprueba primero si el paquete est√° instalado y solo lo instala si falta, evitando errores y descargas innecesarias. Adem√°s, requireNamespace() no carga el paquete, solo verifica su existencia.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"palmerpenguins"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"palmerpenguins"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"tidyverse"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)<span class="do">##Instalando y llamando a la librer√≠a de tidiverse, directamente instalamos y llamamos a ggplot. Esto es debido a que ggplot forma parte de tidyverse.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"sf"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"sf"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"spData"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"spData"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"patchwork"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"patchwork"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spData)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora que ya tenemos los paquetes instalados y las librer√≠as que vamos a utilizar, cabe destacar que siempre es conveniente hacer una comprobaci√≥n sobre qu√© tipo de datos tenemos y c√≥mo es su estructura.</p>
<p>Por ejemplo, que tipo de variables tenemos (e.g., tipo num√©ricas, tipo caracter, tipo integer).</p>
<p>Miramos las primeras filas del dataset <code>penguins</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
5 Adelie  Torgersen           36.7          19.3               193        3450
6 Adelie  Torgersen           39.3          20.6               190        3650
# ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      species          island    bill_length_mm  bill_depth_mm  
 Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
 Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
 Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
                                 Mean   :43.92   Mean   :17.15  
                                 3rd Qu.:48.50   3rd Qu.:18.70  
                                 Max.   :59.60   Max.   :21.50  
                                 NA's   :2       NA's   :2      
 flipper_length_mm  body_mass_g       sex           year     
 Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
 1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
 Median :197.0     Median :4050   NA's  : 11   Median :2008  
 Mean   :200.9     Mean   :4202                Mean   :2008  
 3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
 Max.   :231.0     Max.   :6300                Max.   :2009  
 NA's   :2         NA's   :2                                 </code></pre>
</div>
</div>
<p>Con <code>head()</code> vamos a ver las primeras l√≠neas de nuestro dataframe. Con <code>summary()</code> vamos a ver un resumen de las variables que tiene nuestro dataframe.</p>
<hr>
</section>
</section>
<section id="elementos-b√°sicos-de-un-gr√°fico-en-ggplot" class="level1">
<h1>3. Elementos b√°sicos de un gr√°fico en ggplot</h1>
<section id="ggplot2-paso-a-paso" class="level2">
<h2 class="anchored" data-anchor-id="ggplot2-paso-a-paso">3.1. ggplot2 paso a paso</h2>
</section>
<section id="breve-introducci√≥n" class="level2">
<h2 class="anchored" data-anchor-id="breve-introducci√≥n">Breve introducci√≥n</h2>
<p>La visualizaci√≥n exploratoria de datos es una etapa fundamental en cualquier an√°lisis estad√≠stico. Nos permite detectar patrones, identificar valores at√≠picos, entender relaciones entre variables y comunicar resultados de manera efectiva. Una visualizaci√≥n bien construida debe ser clara, tener ejes etiquetados apropiadamente, incluir un t√≠tulo descriptivo, una leyenda legible cuando sea necesario, y siempre indicar las unidades de medida.</p>
<p>El paquete ggplot2 implementa la <em>Grammar of Graphics</em> (Gram√°tica de los Gr√°ficos), un sistema coherente y estructurado para construir visualizaciones. Esta gram√°tica se compone de varios elementos fundamentales: <strong>datos</strong> + <strong>aesthetics</strong> + <strong>geometr√≠as</strong> + <strong>facets</strong> + <strong>escalas</strong> + <strong>temas</strong>., que se combinan de forma modular para crear gr√°ficos complejos.</p>
<hr>
</section>
<section id="antes-de-empezar-sintaxis-b√°sica-y-elementos-fundamentales" class="level2">
<h2 class="anchored" data-anchor-id="antes-de-empezar-sintaxis-b√°sica-y-elementos-fundamentales">3.2. Antes de empezar: Sintaxis b√°sica y elementos fundamentales</h2>
<p>Antes de construir gr√°ficos con ggplot2, es esencial entender los tres componentes fundamentales que definen cualquier visualizaci√≥n creada con este paquete. Estos componentes siguen una l√≥gica espec√≠fica y se combinan de manera sistem√°tica:</p>
<ol type="1">
<li><strong>Datos (data)</strong>: indicamos qu√© datos queremos mostrar.<br>
</li>
<li><strong>Aesthetics (aes)</strong>: definimos c√≥mo se relacionan las variables con las caracter√≠sticas visuales del gr√°fico (posici√≥n, color, tama√±o, forma‚Ä¶).<br>
</li>
<li><strong>Geometr√≠as (geom)</strong>: definimos el tipo de gr√°fico que queremos dibujar (puntos, l√≠neas, barras, cajas, etc.).</li>
</ol>
<p>Esta estructura constituye la <strong>Gram√°tica de los Gr√°ficos</strong>, que proporciona un marco consistente y flexible para crear visualizaciones de nuestros datos.</p>
<p>Todas las capas se conectan entre s√≠ con el s√≠mbolo <code>+</code>. Es importante colocarlo <strong>al final de la l√≠nea</strong> si queremos seguir a√±adiendo capas al gr√°fico.</p>
<p>üí° Nota: se utiliza <code>+</code> en lugar del pipe (<code>|&gt;</code> √≥ <code>%&gt;%</code>) porque <code>ggplot2</code> fue desarrollado antes de su popularizaci√≥n y cambiarlo requerir√≠a ajustar muchos paquetes.</p>
<hr>
</section>
<section id="estructura-general-de-un-gr√°fico" class="level2">
<h2 class="anchored" data-anchor-id="estructura-general-de-un-gr√°fico">3.3. Estructura general de un gr√°fico</h2>
<p>La sintaxis general para crear un gr√°fico en <strong>ggplot2</strong> sigue este patr√≥n:</p>
<blockquote class="blockquote">
<p>ggplot(data = DATOS, aes(x = VARIABLE1, y = VARIABLE2)) + GEOMETR√çA() + OPCIONES_ADICIONALES</p>
</blockquote>
<p>A continuaci√≥n, veremos un ejemplo concreto que ilustra esta estructura. Creamos un histograma para visualizar la distribuci√≥n de la longitud del pico de los ping√ºinos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm)) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ejemplo de gr√°fico usando ggplot"</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud del pico (mm)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="creaci√≥n-de-un-gr√°fico-paso-a-paso-ggplot-el-lienzo-inicial." class="level2">
<h2 class="anchored" data-anchor-id="creaci√≥n-de-un-gr√°fico-paso-a-paso-ggplot-el-lienzo-inicial.">3.4 Creaci√≥n de un gr√°fico paso a paso: ggplot(), el lienzo inicial.</h2>
<p>La funci√≥n ggplot() inicializa el sistema de gr√°ficos y establece el marco de trabajo. Por s√≠ sola, no produce ninguna visualizaci√≥n, sino que crea un ‚Äúlienzo vac√≠o‚Äù sobre el cual construiremos el gr√°fico. Es necesario especificar al menos un conjunto de datos para que funcione correctamente.</p>
<p>Al ejecutar solo ggplot(penguins), obtenemos un panel vac√≠o porque no hemos definido qu√© variables representar ni c√≥mo visualizarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="creaci√≥n-de-un-gr√°fico-paso-a-paso-aes-aesthetics." class="level2">
<h2 class="anchored" data-anchor-id="creaci√≥n-de-un-gr√°fico-paso-a-paso-aes-aesthetics.">3.5 Creaci√≥n de un gr√°fico paso a paso: aes(), aesthetics.</h2>
<p>La funci√≥n <em>aes()</em> (abreviatura de ‚Äúaesthetics‚Äù) define las asignaciones est√©ticas, es decir, c√≥mo se relacionan las variables del conjunto de datos con las propiedades visuales del gr√°fico. Dentro de <em>aes()</em> podemos especificar:</p>
<p><strong>x</strong>: Variable para el eje horizontal</p>
<p><strong>y</strong>: Variable para el eje vertical</p>
<p><strong>color</strong>: Variable que determina el color de los elementos</p>
<p><strong>fill</strong>: Variable que determina el color de relleno</p>
<p><strong>size</strong>: Variable que determina el tama√±o de los elementos</p>
<p><strong>shape</strong>: Variable que determina la forma de los elementos</p>
<p><strong>alpha</strong>: Variable que determina la transparencia</p>
<p>En el siguiente c√≥digo, asignamos la especie de ping√ºino al eje X, pero a√∫n no especificamos ninguna geometr√≠a para representar visualmente estos datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/grafico%20aes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="aqu√≠-estamos-diciendo" class="level3">
<h3 class="anchored" data-anchor-id="aqu√≠-estamos-diciendo">Aqu√≠ estamos diciendo:</h3>
<p>eje X ‚Üí Especie de ping√ºino (<em>species</em>)</p>
<p>Por ahora seguimos sin dibujar nada, pero <strong>el gr√°fico ya sabe qu√© representar</strong>.</p>
</section>
</section>
<section id="creaci√≥n-de-un-gr√°fico-paso-a-paso-las-geometr√≠as-que-vamos-dar-a-nuestro-gr√°fico" class="level2">
<h2 class="anchored" data-anchor-id="creaci√≥n-de-un-gr√°fico-paso-a-paso-las-geometr√≠as-que-vamos-dar-a-nuestro-gr√°fico">3.6 Creaci√≥n de un gr√°fico paso a paso: las geometr√≠as que vamos dar a nuestro gr√°fico</h2>
<p>Las <strong>geometr√≠as</strong> (funciones que comienzan con geom_) son las capas que realmente dibujan elementos en el gr√°fico. Cada tipo de gr√°fico corresponde a una geometr√≠a espec√≠fica. La elecci√≥n de la geometr√≠a depende del tipo de datos y del mensaje que queremos comunicar.</p>
<p>Algunos ejemplos de gr√°ficos:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Geometr√≠a</th>
<th>Tipo de gr√°fico</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>geom_point()</code></td>
<td>Gr√°fico de Dispersi√≥n</td>
</tr>
<tr class="even">
<td><code>geom_line()</code></td>
<td>Gr√°fico de Tendencia</td>
</tr>
<tr class="odd">
<td><code>geom_bar()</code></td>
<td>Gr√°fico de Barras</td>
</tr>
<tr class="even">
<td><code>geom_histogram()</code></td>
<td>Histogramas</td>
</tr>
<tr class="odd">
<td><code>geom_boxplot()</code></td>
<td>Boxplots</td>
</tr>
</tbody>
</table>
<p>Ahora a√±adimos una geometr√≠a (geom_bar) de barras al gr√°fico anterior para crear un gr√°fico que nos muestre el n√∫mero de ejemplares que tenemos de cada especie de ping√ºino en nuestra base de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/ejemplo%20de%20gr√°fico%20de%20barras-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="gr√°ficos-bidimensionales" class="level2">
<h2 class="anchored" data-anchor-id="gr√°ficos-bidimensionales">3.7 Gr√°ficos bidimensionales</h2>
<p>Mientras que los gr√°ficos unidimensionales nos permiten explorar una sola variable a la vez, los gr√°ficos bidimensionales nos permiten examinar relaciones entre dos variables. Este tipo de visualizaciones es fundamental para identificar correlaciones, patrones y tendencias en nuestros datos.</p>
<section id="scatterplot-b√°sico-gr√°fico-de-dispersi√≥n" class="level3">
<h3 class="anchored" data-anchor-id="scatterplot-b√°sico-gr√°fico-de-dispersi√≥n">Scatterplot b√°sico (Gr√°fico de dispersi√≥n)</h3>
<p>Existen diferentes formas de especificar los datos en <strong>ggplot2</strong>. Podemos incluirlos en la funci√≥n ggplot() principal (recomendado cuando todas las geometr√≠as usan el mismo conjunto de datos) o directamente en cada geometr√≠a (√∫til cuando combinamos datos de diferentes fuentes).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico de dispersi√≥n bidimensional b√°sico</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aqu√≠ necesitamos especificar tanto el eje X como el eje Y</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/scatter-basic-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Este gr√°fico de dispersi√≥n muestra la relaci√≥n entre la longitud de la aleta (eje X) y la masa corporal (eje Y) de los ping√ºinos. Podemos observar una tendencia positiva: en general, los ping√ºinos con aletas m√°s largas tienden a tener mayor masa corporal.</p>
<p>IMPORTANTE: Los datos se pueden colocar dentro de la funcion ggplot si se van a usar los mismos en todas las geometrias. Por ejemplo, si queremos representar una linea de tendencia lineal para estas variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico de dispersi√≥n bidimensional b√°sico</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Aqu√≠ necesitamos especificar tanto el eje X como el eje Y</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/scatter-basic-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Hasta aqu√≠ habr√≠amos creado un gr√°fico b√°sico utilizando <strong>ggplot2</strong>. A partir de aqu√≠ trabajaremos para mejorar la visualizaci√≥n de nuestros gr√°ficos, a√±adir elementos y/o representar nuestros datos de la manera m√°s adecuada a nuestros requerimientos.</p>
</section>
<section id="como-guardar-plots-satisfactorios" class="level3">
<h3 class="anchored" data-anchor-id="como-guardar-plots-satisfactorios">Como guardar plots satisfactorios</h3>
<p>Una vez que hemos creado un gr√°fico que cumple con nuestros objetivos, es importante guardarlo en un formato y calidad adecuados para su uso en informes, presentaciones o publicaciones. La funci√≥n ggsave() permite exportar gr√°ficos en diversos formatos (JPG, PNG, PDF, SVG, etc.) con control preciso sobre dimensiones y resoluci√≥n.</p>
<p>Primero debejos asignar nuestro gr√°fico a un objeto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primero, asignamos el gr√°fico a un objeto</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>plot_pinguinos <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora, utilizando la funcion ggsave(), y especificando las caracter√≠sticas con las que queremos guardar nuetro gr√°fico (formato, tama√±o, unidades, dpi, etc), procedemos a guardar el resultado para poderlo utilizar fuera del entorno de R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar en formato JPG con alta resoluci√≥n (300 dpi)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"penguins_scatter.jpg"</span>, <span class="at">plot =</span> plot_pinguinos, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">9</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar en formato PDF (vectorial, ideal para publicaciones)</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"penguins_scatter.pdf"</span>, <span class="at">plot =</span> plot_pinguinos, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">9</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>üí° Consejo sobre dimensiones: Algunas revistas cient√≠ficas tienen especificaciones detalladas sobre el formato de los gr√°ficos. Cuando no hay directrices espec√≠ficas, es recomendable dise√±ar los gr√°ficos pensando en un formato A4 (21 √ó 29.7 cm), asegur√°ndose de que todos los elementos sean legibles cuando se reduzcan o ampl√≠en a este tama√±o.</p>
</section>
</section>
</section>
<section id="scatterplot-con-colores-por-categor√≠a" class="level1">
<h1>Scatterplot con colores por categor√≠a</h1>
<p>Podemos enriquecer los gr√°ficos bidimensionales a√±adiendo una tercera variable mediante colores, formas o tama√±os. Esto nos permite visualizar patrones dentro de subgrupos de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico de dispersi√≥n bidimensional con colores por especie</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> bill_depth_mm, <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/scatter-basic%20+%20colors-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="ejercicio-pr√°ctico" class="level2">
<h2 class="anchored" data-anchor-id="ejercicio-pr√°ctico">3.8 Ejercicio pr√°ctico</h2>
<p>Crea dos gr√°ficos:</p>
<p>1.1. -Un gr√°fico unidimensional que muestre el n√∫mero de individuos por isla (island).</p>
<p>1.2. -Un gr√°fico bidimensional que muestre la relaci√≥n entre la masa corporal y la longitud del pico, diferenciando por sexo mediante colores.</p>
<p>1.3. -Guarda ambos gr√°ficos en formato JPG con dimensiones apropiadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.1. Gr√°fico unidimensional: n√∫mero de individuos por isla</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>plot_unidimensional <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> island)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"N√∫mero de individuos por isla"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Isla"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Conteo"</span>) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gr√°ficos 1.1</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>plot_unidimensional</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/ejercicio%20pr√°ctico%201.1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.2. Gr√°fico bidimensional: relaci√≥n masa corporal vs longitud del pico por sexo</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>plot_bidimensional <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Relaci√≥n entre masa corporal y longitud del pico"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud del pico (mm)"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Masa corporal (g)"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Sexo"</span>) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar los gr√°ficos 1.2.</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>plot_bidimensional</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/ejercicio%20pr√°ctico%201.2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar los gr√°ficos</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"individuos_por_isla.jpg"</span>, plot_unidimensional, </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">15</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"relacion_masa_pico.jpg"</span>, plot_bidimensional, </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">15</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="aesthetics-vs.-argumentos-est√©ticos" class="level2">
<h2 class="anchored" data-anchor-id="aesthetics-vs.-argumentos-est√©ticos">3.9 Aesthetics vs.&nbsp;argumentos est√©ticos</h2>
<p>Es crucial entender la diferencia entre definir propiedades est√©ticas dentro de aes(), que est√°n vinculadas a variables, y fuera de aes(), que son valores fijos que afectar√°n a la totalidad de los componentes del gr√°fico:</p>
<ul>
<li>Dentro de aes(): El valor visual var√≠a seg√∫n los datos de una variable.</li>
<li>Fuera de aes(): El valor visual es constante para todos los elementos.</li>
</ul>
<p>En el primer ejemplo, el color est√° mapeado a la variable sex, por lo que ggplot asignar√° autom√°ticamente colores diferentes a cada categor√≠a de sexo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_depth_mm, <span class="at">color =</span> sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/scatter-smooth-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En el segundo ejemplo, el color se especifica fuera de aes(), por lo que todos los puntos tendr√°n el mismo color (azul oscuro), independientemente de los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">###Hay que tener mucho cuidado de d√≥nde se insertan los diferentes argumentos</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_depth_mm), <span class="at">color =</span> <span class="st">"darkblue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/scatter-smooth-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Esta distinci√≥n es fundamental: cuando queremos que un atributo visual (color, tama√±o, forma) represente informaci√≥n de una variable, debe ir dentro de aes(). Cuando queremos que todos los elementos tengan el mismo valor para ese atributo, debe ir fuera.</p>
<p>En la ayuda de las funciones de {ggplot2} aparece una lista de los aesthetics y los argumentos est√©ticos que acepta esa funci√≥n. Se pueden incluir tantos aesthetics como se deseen.</p>
<p>Ejercicio:</p>
<p>ggplot(data = penguins)</p>
</section>
<section id="tipos-de-gr√°fico-geoms" class="level2">
<h2 class="anchored" data-anchor-id="tipos-de-gr√°fico-geoms">3.10 Tipos de gr√°fico (geoms)</h2>
<p>La elecci√≥n del tipo de gr√°fico apropiado depende fundamentalmente de:</p>
<p>El tipo de variables que estamos analizando (cualitativas, cuantitativas discretas, cuantitativas continuas)</p>
<p>El prop√≥sito de la visualizaci√≥n (explorar distribuciones, comparar grupos, mostrar relaciones, etc.)</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-data-science-10" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-science-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/tipos_variables.png" class="img-fluid figure-img" width="1555">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-science-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Figure 3: Variable types and thier clasification
</figcaption>
</figure>
</div>
</div>
</div>
<p>üí°Para elegir qu√© tipo de gr√°fico nos conviene seg√∫n el prop√≥sito una herrramienta muy √∫til es <a href="https://graphicsprinciples.github.io/cheatsheet.html">chuleta sobre los principios de los gr√°ficos</a>.</p>
<section id="exploraci√≥n-de-variables-cualitativas-unidimensional" class="level3">
<h3 class="anchored" data-anchor-id="exploraci√≥n-de-variables-cualitativas-unidimensional">3.10.1 Exploraci√≥n de variables cualitativas (unidimensional)</h3>
<p>Las variables cualitativas (tambi√©n llamadas categ√≥ricas) representan atributos o categor√≠as sin un orden num√©rico inherente. En el conjunto de datos penguins, ejemplos claros son:</p>
<ul>
<li>species (Adelie, Chinstrap, Gentoo)</li>
<li>island (Biscoe, Dream, Torgersen)</li>
<li>sex (female, male + NA)</li>
</ul>
</section>
<section id="conteo-por-categor√≠a" class="level3">
<h3 class="anchored" data-anchor-id="conteo-por-categor√≠a">Conteo por categor√≠a</h3>
<p>Cuando queremos saber cu√°ntas observaciones hay en cada categor√≠a. El conteo responde a preguntas como:</p>
<p>¬øCu√°ntas observaciones hay en cada categor√≠a?</p>
<p>El gr√°fico de barras (geom_bar()) es la opci√≥n m√°s directa y efectiva..</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bar</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/conteo%20ind/spp-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interpretaci√≥n: Este gr√°fico nos muestra claramente que la especie Adelie es la m√°s numerosa en nuestro conjunto de datos, seguida por Gentoo y finalmente Chinstrap. Los conteos absolutos nos permiten entender la representatividad de cada categor√≠a en nuestra muestra.</p>
</section>
<section id="proporciones-dentro-de-categor√≠as" class="level3">
<h3 class="anchored" data-anchor-id="proporciones-dentro-de-categor√≠as">3.10.2 Proporciones dentro de categor√≠as</h3>
<p>Cuando queremos entender la composici√≥n interna de cada categor√≠a (por ejemplo, ‚Äú¬øC√≥mo se distribuyen los sexos dentro de cada especie?‚Äù), usamos gr√°ficos de barras con el argumento <code>fill</code> y diferentes posiciones.</p>
<p>A√±adimos una segunda variable con <code>fill</code> y usamos position = ‚Äúfill‚Äù para normalizar al 100%.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporciones de sexo dentro de cada especie</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proporciones-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Para comparaci√≥n directa entre subgrupos, usamos position = "dodge"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploraci√≥n-de-variables-cuantitativas-num√©ricas" class="level3">
<h3 class="anchored" data-anchor-id="exploraci√≥n-de-variables-cuantitativas-num√©ricas">3.10.3 Exploraci√≥n de variables cuantitativas (num√©ricas)</h3>
<p>Las variables cuantitativas describen medidas num√©ricas. Estas variables pueden ser continuas o discretas. En penguins, ejemplos incluyen:</p>
<ul>
<li><p>body_mass_g (Peso corporal (gr))</p></li>
<li><p>flipper_length_mm (Longitud de la aleta (mm))</p></li>
<li><p>bill_length_mm (Longitud del pico (mm))</p></li>
</ul>
</section>
<section id="variables-cuantitativas-continuas" class="level3">
<h3 class="anchored" data-anchor-id="variables-cuantitativas-continuas">Variables cuantitativas continuas</h3>
<p>Estas variables pueden tomar cualquier valor dentro de un rango continuo (incluyendo decimales). En penguins: body_mass_g (Peso corporal (gr)),flipper_length_mm (Longitud de la aleta (mm)), bill_length_mm (Longitud del pico (mm)).</p>
<p>Distribuci√≥n de una variable continua</p>
<p>Para explorar c√≥mo se distribuyen los valores de una variable continua, usamos principalmente dos tipos de gr√°ficos:</p>
<p>Histograma (geom_histogram()) -&gt; Divide el rango de valores en intervalos (bins) y muestra la frecuencia en cada intervalo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma b√°sico - muestra la distribuci√≥n en intervalos</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">100</span>)  <span class="co"># binwidth controla el ancho de cada intervalo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/cuantitativas%20continuas-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Gr√°fico de densidad (geom_density()) -&gt; Muestra una estimaci√≥n suavizada de la distribuci√≥n continua:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico de densidad - curva suavizada</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/cuantitativas%20continuas-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Comparaci√≥n entre grupos Cuando queremos comparar la distribuci√≥n de una variable continua entre diferentes categor√≠as podemos utilizar:</p>
<p>Diagrama de cajas (geom_boxplot()) - Muestra estad√≠sticos de resumen (mediana, cuartiles, valores at√≠picos):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot comparando masa corporal entre especies</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/boxplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Gr√°fico de viol√≠n (geom_violin()) - Combina las ventajas del boxplot con la visualizaci√≥n de la densidad:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico de viol√≠n mostrando la forma completa de la distribuci√≥n</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/violin-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variables-cuantitativas-discretas" class="level3">
<h3 class="anchored" data-anchor-id="variables-cuantitativas-discretas">Variables cuantitativas discretas</h3>
<p>Estas variables solo pueden tomar valores enteros o contables espec√≠ficos (no hay valores intermedios entre ellos). Aunque en penguins no hay ejemplos claros de variables discretas, podemos crear uno para ilustrar el concepto.</p>
<p>Ejemplo con datos discretos: Supongamos que tenemos datos sobre el n√∫mero de cr√≠as por nido (variable discreta):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos datos de ejemplo para variable discreta</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>datos_crias <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">nido =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">crias =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">50</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para variables discretas, podemos usar geom_bar() con stat = ‚Äúcount‚Äù o geom_histogram() con bins centrados en los valores enteros</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opci√≥n 1: geom_bar() para conteos de valores discretos</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_crias, <span class="fu">aes</span>(<span class="at">x =</span> crias)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/discreta-bar-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opci√≥n 2: geom_histogram() con binwidth = 1 y l√≠mites alineados</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos_crias, <span class="fu">aes</span>(<span class="at">x =</span> crias)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">center =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/discreta-histogram-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="diferencias-clave-en-el-tratamiento-gr√°fico" class="level1">
<h1>Diferencias clave en el tratamiento gr√°fico:</h1>
<section id="caracter√≠stica-variables-continuas-variables-discretas" class="level2">
<h2 class="anchored" data-anchor-id="caracter√≠stica-variables-continuas-variables-discretas">Caracter√≠stica Variables continuas Variables discretas</h2>
<p>Valores posibles Cualquier valor en un rango (incluye decimales) Solo valores espec√≠ficos (generalmente enteros) Geometr√≠a t√≠pica <code>geom_histogram()</code>, <code>geom_density()</code> <code>geom_bar()</code>, <code>geom_histogram()</code> con bins espec√≠ficos Ajuste de bins binwidth o bins para agrupar valores continuos binwidth = 1 para separar cada valor entero Posiciones en eje X Escala continua con cualquier valor posible Escala discreta con saltos entre valores</p>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 35%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>Caracter√≠stica</th>
<th>Variables continuas</th>
<th>Variables discretas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Valores posibles</td>
<td>Cualquier valor en un rango (incluye decimales)</td>
<td>Solo valores espec√≠ficos (generalmente enteros)</td>
</tr>
<tr class="even">
<td>Geometr√≠a t√≠pica</td>
<td><code>geom_histogram()</code>, <code>geom_density()</code></td>
<td><code>geom_bar()</code>, <code>geom_histogram()</code> con bins espec√≠ficos</td>
</tr>
<tr class="odd">
<td>Ajuste de bins</td>
<td>binwidth o bins para agrupar valores continuos</td>
<td>binwidth = 1 para separar cada valor entero</td>
</tr>
<tr class="even">
<td>Posiciones en eje X</td>
<td>Escala continua con cualquier valor posible</td>
<td>Escala discreta con saltos entre valores</td>
</tr>
</tbody>
</table>
<section id="variables-discretas-en-penguins" class="level3">
<h3 class="anchored" data-anchor-id="variables-discretas-en-penguins">Variables discretas en penguins</h3>
<p>Aunque todas las variables num√©ricas en penguins son t√©cnicamente continuas, algunas pueden tratarse como discretas en ciertos contextos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tratando year como variable discreta (aunque sea temporal)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span>  <span class="co"># Convertimos a factor para tratarlo como discreto</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"A√±o"</span>, <span class="at">title =</span> <span class="st">"N√∫mero de observaciones por a√±o"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/discreta-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Resumen pr√°ctico: ¬øC√≥mo elegir?</p>
</section>
</section>
<section id="para-variables-continuas" class="level2">
<h2 class="anchored" data-anchor-id="para-variables-continuas">Para variables continuas:</h2>
<p>Histograma (geom_histogram): Cuando queremos ver la distribuci√≥n en intervalos espec√≠ficos</p>
<p>Densidad (geom_density): Cuando queremos una visi√≥n suavizada de la distribuci√≥n</p>
<p>Boxplot (geom_boxplot): Para comparar estad√≠sticos entre grupos</p>
<p>Viol√≠n (geom_violin): Para comparar distribuciones completas entre grupos</p>
</section>
<section id="para-variables-discretas" class="level2">
<h2 class="anchored" data-anchor-id="para-variables-discretas">Para variables discretas:</h2>
<p>Gr√°fico de barras (geom_bar): Cuando tenemos pocos valores posibles y queremos mostrar conteos</p>
<p>Histograma con binwidth = 1: Cuando queremos mantener la apariencia de histograma pero con valores discretos</p>
<p>Ejercicio pr√°ctico: Para cada una de estas variables de penguins, identifica si es continua o discreta (o podr√≠a tratarse como discreta) y crea el gr√°fico apropiado:</p>
<p>flipper_length_mm (longitud de aleta)</p>
<p>island (isla)</p>
<p>bill_depth_mm (profundidad del pico)</p>
<p>year (a√±o de observaci√≥n)</p>
<p>sex (sexo)</p>
<p>{r # 1. flipper_length_mm - Variable continua ggplot(penguins, aes(x = flipper_length_mm)) + geom_histogram(binwidth = 2) + labs(title = ‚ÄúDistribuci√≥n de longitud de aleta (continua)‚Äù)</p>
</section>
</section>
<section id="bill_depth_mm---variable-continua" class="level1">
<h1>2. bill_depth_mm - Variable continua</h1>
<p>ggplot(penguins, aes(x = bill_depth_mm)) + geom_density(fill = ‚Äúlightblue‚Äù, alpha = 0.5) + labs(title = ‚ÄúDistribuci√≥n de profundidad del pico (continua)‚Äù)</p>
</section>
<section id="year---variable-discreta-aunque-sea-temporal" class="level1">
<h1>3. year - Variable discreta (aunque sea temporal)</h1>
<p>ggplot(penguins, aes(x = factor(year))) + geom_bar(fill = ‚Äústeelblue‚Äù) + labs(x = ‚ÄúA√±o‚Äù, y = ‚ÄúConteo‚Äù, title = ‚ÄúObservaciones por a√±o (discreta)‚Äù)</p>
<p>Consejo clave: La elecci√≥n entre tratar una variable como continua o discreta depende del contexto anal√≠tico. En general:</p>
<ul>
<li><p>Variables de medici√≥n (peso, longitud, tiempo) suelen ser continuas</p></li>
<li><p>Variables de conteo (n√∫mero de hijos, n√∫mero de errores) suelen ser discretas</p></li>
<li><p>Variables como year pueden tratarse como discretas cuando nos interesan los valores espec√≠ficos</p></li>
</ul>
<p>Esta distinci√≥n es importante porque afecta c√≥mo interpretamos los gr√°ficos y qu√© tipo de an√°lisis estad√≠stico realizamos posteriormente.</p>
</section>
<section id="ggplot2-funciones-avanzadas" class="level1">
<h1>5 {ggplot2}: Funciones avanzadas</h1>
<section id="etiquetas-labs" class="level2">
<h2 class="anchored" data-anchor-id="etiquetas-labs">5.1 Etiquetas (labs())</h2>
<p>Las etiquetas son elementos fundamentales para mejorar la claridad y comprensi√≥n de los gr√°ficos. La funci√≥n labs() nos permite personalizar todos los textos descriptivos de un gr√°fico, haci√©ndolo aut√≥nomo y comprensible sin necesidad de referencias externas. Es crucial para crear visualizaciones profesionales que puedan ser interpretadas correctamente fuera de su contexto original, por ejemplo en una presentaci√≥n de ppt.</p>
<p>Comenzamos creando un gr√°fico base de diagramas de caja que relaciona la especie de ping√ºinos con su masa corporal. Este gr√°fico servir√° como punto de partida para demostrar c√≥mo las etiquetas mejoran la comunicaci√≥n de la informaci√≥n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico base</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>pnumcat <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>pnumcat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/grafico-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ahora aplicamos la funci√≥n labs() para a√±adir todos los elementos textuales necesarios: t√≠tulo principal, subt√≠tulo contextual, etiquetas descriptivas para ambos ejes y un pie de figura que indica la fuente de los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A√±adir etiquetas descriptivas</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>pnumcat <span class="sc">+</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Masa corporal de los ping√ºinos por especie"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Datos de las tres islas"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Especie"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Masa corporal (g)"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Fuente: palmerpenguins"</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/grafico-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La funci√≥n {labs()} permite personalizar los textos del gr√°fico. Es crucial para hacer los gr√°ficos aut√≥nomos y comprensibles.</p>
</section>
<section id="sistema-de-coordenadas" class="level2">
<h2 class="anchored" data-anchor-id="sistema-de-coordenadas">5.2 Sistema de coordenadas</h2>
<p>Por defecto, ggplot2 usa coordenadas cartesianas, pero ofrece flexibilidad para ajustar la vista de los datos. <strong>Es importante distinguir entre hacer zoom (manteniendo todos los datos) y limitar el rango (eliminando datos fuera del rango).</strong></p>
<p>La funci√≥n coord_cartesian() permite enfocar en una regi√≥n espec√≠fica del gr√°fico <strong>sin descartar observaciones</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Zoom en el eje Y</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>pnumcat <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">2000</span>, <span class="dv">4500</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/coordenadas-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En contraste, cuando se usan l√≠mites directamente en la escala (scale_*_continuous() o xlim()/ylim()) se descartan los datos que quedan fuera del rango especificado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># L√≠mite en escala que S√ç descarta datos (observaciones fuera de 2000-6000 se eliminan)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>pnumcat <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2000</span>, <span class="dv">4500</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/coordenadas_1.1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalente usando ylim() - tambi√©n descarta datos</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>pnumcat <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">2000</span>, <span class="dv">4500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/coordenadas_1.1-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>‚ö†Ô∏è Advertencia: Cuando se usan l√≠mites en escalas, ggplot2 mostrar√° una advertencia indicando que se han eliminado observaciones.</p>
<p>Comparaci√≥n pr√°ctica:</p>
<p>coord_cartesian(ylim = c(2000, 4500)): <strong>Mantiene todos los datos, solo ajusta la vista</strong></p>
<p>scale_y_continuous(limits = c(2000, 4500)): <strong>Filtra y elimina datos fuera del rango</strong></p>
<p>Esta diferencia es crucial cuando se usan estad√≠sticos como regresiones o suavizados, ya que al descartar datos se afectan los c√°lculos de tendencias y modelos.</p>
</section>
<section id="faceting" class="level2">
<h2 class="anchored" data-anchor-id="faceting">5.3 Faceting</h2>
<p>El faceting (o creaci√≥n de m√∫ltiples paneles) es una t√©cnica poderosa para visualizar subconjuntos de datos en gr√°ficos separados pero comparables. Es especialmente √∫til para analizar patrones entre diferentes grupos categ√≥ricos. Comenzamos creando un gr√°fico de dispersi√≥n base que relaciona masa corporal con longitud de aleta, coloreado por especie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>miplot2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color =</span> species)) <span class="sc">+</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>miplot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/facets-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La funci√≥n facet_grid() organiza los paneles en una rejilla seg√∫n variables categ√≥ricas. En este primer ejemplo, creamos filas separadas por el sexo de los ping√ºinos, permitiendo comparar la relaci√≥n entre variables para machos y hembras por separado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet en filas</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>miplot2 <span class="sc">+</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(sex), <span class="at">scales =</span> <span class="st">"free"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/facets-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Podemos extender el faceting a dos dimensiones, creando una matriz de gr√°ficos que cruza dos variables categ√≥ricas. Esto permite analizar interacciones complejas entre diferentes factores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet en filas y columnas</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>miplot2 <span class="sc">+</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(sex), <span class="at">cols =</span> <span class="fu">vars</span>(island))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/facets-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Cuando tenemos muchas categor√≠as, facet_wrap() es m√°s flexible que facet_grid(), ya que empaqueta los paneles en una rejilla que se adapta al n√∫mero de categor√≠as y al espacio disponible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet wrap (organiza en rejilla)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>miplot2 <span class="sc">+</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(island), <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/facets-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Explicaci√≥n: facet_grid() organiza por filas/columnas, facet_wrap() empaqueta m√∫ltiples paneles.</p>
</section>
<section id="posici√≥n" class="level2">
<h2 class="anchored" data-anchor-id="posici√≥n">5.4 Posici√≥n</h2>
<p>El par√°metro <em>position</em> controla c√≥mo se disponen elementos geom√©tricos cuando hay superposiciones, especialmente en gr√°ficos de barras con agrupaciones. Por defecto, ggplot2 usa posici√≥n ‚Äústack‚Äù (apilado), donde las barras se apilan unas sobre otras mostrando el total por categor√≠a.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Por defecto: apilado (stack)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/position-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La posici√≥n ‚Äúdodge‚Äù coloca las barras lado a lado, lo que facilita la comparaci√≥n directa de los subgrupos dentro de cada categor√≠a principal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Barras lado a lado (dodge)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> sex), <span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/position-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La posici√≥n ‚Äúfill‚Äù tambi√©n apila las barras, pero normaliza la altura al 100%, mostrando proporciones en lugar de conteos absolutos. Esto es √∫til para comparar la composici√≥n relativa de cada categor√≠a.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporciones (fill)</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> sex), <span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Proporci√≥n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/position-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="escalas-de-color" class="level2">
<h2 class="anchored" data-anchor-id="escalas-de-color">5.5 Escalas de color</h2>
<p>Las funciones <strong>scale_*</strong> permiten personalizar c√≥mo se mapean los datos a atributos visuales. La estructura general es *scale_‚Äúaesthetic‚Äù_‚Äútipo‚Äù()*, donde ‚Äúaesthetic‚Äù puede ser color, fill, x, y, etc., y ‚Äútipo‚Äù puede ser continuous, discrete, manual, etc. En este ejemplo, personalizamos manualmente los colores y etiquetas de una variable categ√≥rica, y tambi√©n modificamos las marcas y etiquetas del eje Y.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Escala de color manual</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>miplot2 <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>, <span class="st">"purple"</span>, <span class="st">"cyan4"</span>),</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Adelie"</span>, <span class="st">"Chinstrap"</span>, <span class="st">"Gentoo"</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">180</span>, <span class="dv">200</span>, <span class="dv">220</span>),</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Bajo"</span>, <span class="st">"Medio"</span>, <span class="st">"Alto"</span>)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/escalas%20de%20color-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Es importante comprender la diferencia entre scale_y_continuous (limits) y coord_cartesian (ylim). La primera funci√≥n elimina permanentemente los datos fuera de los l√≠mites especificados, lo que puede afectar c√°lculos estad√≠sticos como los cuartiles en diagramas de caja.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ¬°Cuidado! scale_y_continuous(limits) ELIMINA datos fuera de los l√≠mites</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">3000</span>, <span class="dv">5000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/escalas%20de%20color-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>En contraste, coord_cartesian(ylim) simplemente aplica un zoom visual a la regi√≥n especificada, manteniendo todos los datos para los c√°lculos estad√≠sticos. Esta es generalmente la opci√≥n preferida cuando queremos enfocar en un rango espec√≠fico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coord_cartesian(ylim) hace zoom sin eliminar datos</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">3000</span>, <span class="dv">5000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/escalas%20de%20color-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>5.5.1 Ejercicio Modifica el siguiente gr√°fico para usar una escala de color gradiente de azul a amarillo. Pista: Usa scale_color_gradient()</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar para usar una escala de color gradiente de azul a amarillo</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">high =</span> <span class="st">"yellow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/escalas%20de%20color-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>5.6 Los colores en R R ofrece m√∫ltiples sistemas para trabajar con paletas de colores, cada uno con sus ventajas y casos de uso espec√≠ficos. Las paletas <em>ColorBrewer</em> son ampliamente utilizadas y est√°n organizadas en tres tipos: cualitativas (para datos categ√≥ricos sin orden), secuenciales (para datos num√©ricos ordenados) y divergentes (para datos con un punto medio significativo).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Paletas Brewer (cualitativas, secuenciales, divergentes)</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/paletas%20de%20color-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Podemos extraer colores espec√≠ficos de una paleta <em>Brewer</em> usando la funci√≥n <strong>brewer.pal()</strong>, especificando el nombre de la paleta y el n√∫mero de colores deseado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una paleta Brewer</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="at">name =</span> <span class="st">"Set2"</span>, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "#66C2A5" "#FC8D62" "#8DA0CB"</code></pre>
</div>
</div>
<p>Las paletas HCL (Hue-Chroma-Luminance) est√°n dise√±adas para ser perceptualmente uniformes y accesibles para personas con daltonismo. A continuaci√≥n vemos algunas de las paletas disponibles en este sistema.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Paletas HCL (m√°s accesibles)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>grDevices<span class="sc">::</span><span class="fu">hcl.pals</span>()[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Pastel 1" "Dark 2"   "Dark 3"   "Set 2"    "Set 3"    "Warm"    
 [7] "Cold"     "Harmonic" "Dynamic"  "Grays"   </code></pre>
</div>
</div>
<p>La funci√≥n <strong>hcl.colors()</strong> nos permite generar secuencias de colores de cualquier paleta HCL, especificando el n√∫mero de colores y la paleta deseada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una paleta HCL</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>grDevices<span class="sc">::</span><span class="fu">hcl.colors</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">palette =</span> <span class="st">"Blues 3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "#00366C" "#0066A5" "#5295D4" "#99BFEF" "#D0E4FF" "#F9F9F9"</code></pre>
</div>
</div>
<p>Aplicamos una paleta de colores en un gr√°fico real. Usamos scale_color_gradientn() con la paleta ‚ÄúViridis‚Äù, que es perceptualmente uniforme, de alto contraste y apta para personas con daltonismo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Uso en gr√°ficos: gradiente con Viridis</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> body_mass_g)) <span class="sc">+</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradientn</span>(<span class="at">colours =</span> <span class="fu">hcl.colors</span>(<span class="dv">12</span>, <span class="st">"Viridis"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/paletas%20de%20color-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Para mayor comodidad, <strong>ggplot2</strong> ofrece funciones directas para paletas populares como Viridis. scale_color_viridis_c() aplica autom√°ticamente la paleta Viridis a variables continuas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Versi√≥n directa con scale_color_viridis_c()</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> body_mass_g)) <span class="sc">+</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/paletas%20de%20color-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="temas" class="level2">
<h2 class="anchored" data-anchor-id="temas">5.7 Temas</h2>
<p>Los temas <em>(theme_)</em> en <strong>ggplot2</strong> controlan los elementos no relacionados con los datos de un gr√°fico, es decir, los componentes est√©ticos que no dependen de la informaci√≥n que estamos visualizando. Esto incluye fuentes, colores de fondo, l√≠neas de la cuadr√≠cula, marcas de los ejes, leyendas y otros elementos decorativos. Los temas permiten dar un estilo coherente y profesional a nuestras visualizaciones, adapt√°ndolas al contexto de presentaci√≥n (informes acad√©micos, presentaciones, publicaciones web, etc.).</p>
<section id="temas-predefinidos" class="level3">
<h3 class="anchored" data-anchor-id="temas-predefinidos">5.7.1 Temas predefinidos</h3>
<p><strong>ggplot2</strong> incluye varios temas predefinidos que podemos aplicar inmediatamente a cualquier gr√°fico. Cada uno tiene un prop√≥sito y estilo diferente.</p>
<p>Comenzamos creando un gr√°fico base que usaremos para demostrar los diferentes temas. Utilizaremos un gr√°fico de dispersi√≥n que relaciona la masa corporal con la longitud de la aleta, coloreado por especie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gr√°fico base para demostrar temas</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(penguins, </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> flipper_length_mm, </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Relaci√≥n entre masa corporal y longitud de aleta"</span>,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Datos de ping√ºinos Palmer"</span>,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Masa corporal (g)"</span>,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Longitud de aleta (mm)"</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Especie"</span>)</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>base_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_gray() - Tema por defecto Este es el tema predeterminado de ggplot2. Tiene un fondo gris claro con l√≠neas de cuadr√≠cula blancas. Es un buen punto de partida, pero puede no ser ideal para publicaciones formales.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema por defecto (se aplica autom√°ticamente, pero lo mostramos expl√≠citamente)</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_gray</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_bw() - Tema blanco y negro Un tema cl√°sico con fondo blanco y l√≠neas de cuadr√≠cula grises. Es muy √∫til para publicaciones acad√©micas donde se requiere alta legibilidad y compatibilidad con impresi√≥n en blanco y negro.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema en blanco y negro, ideal para publicaciones</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_minimal() - Tema minimalista Elimina muchos elementos decorativos, manteniendo solo lo esencial. No tiene l√≠neas de cuadr√≠cula ni marco alrededor del gr√°fico. Es moderno y se enfoca completamente en los datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema minimalista, sin elementos superfluos</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_classic() - Tema cl√°sico Inspirado en gr√°ficos tradicionales de estad√≠stica. Tiene ejes simples con l√≠neas en los bordes, sin l√≠neas de cuadr√≠cula. Es limpio y apropiado para publicaciones cient√≠ficas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema cl√°sico, similar a gr√°ficos de software estad√≠stico tradicional</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_void() - Tema vac√≠o Elimina pr√°cticamente todos los elementos excepto los datos. Es √∫til cuando queremos crear visualizaciones muy limpias o cuando vamos a a√±adir anotaciones personalizadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema vac√≠o, solo muestra los datos</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_dark() - Tema oscuro Similar al tema gris por defecto, pero con colores invertidos (fondo oscuro). Puede ser √∫til para presentaciones con fondos oscuros o para resaltar colores brillantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema oscuro, √∫til para presentaciones con fondo negro</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_dark</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>##5.7.2 Temas de paquetes externos Existen paquetes adicionales que proporcionan temas especializados. Uno de los m√°s populares es <em>ggthemes</em>, que incluye temas que imitan estilos de publicaciones como <em>The Economist</em>, <em>Wall Street Journal</em>, <em>Excel</em>, entre otros.</p>
<p>Primero, si no est√° instalado, debemos instalar el paquete ggthemes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instalar ggthemes si no est√° disponible</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("ggthemes")</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>theme_economist() - Estilo The Economist Imita el estilo caracter√≠stico de las gr√°ficas de la revista The Economist. Usa colores distintivos y tipograf√≠a espec√≠fica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema estilo The Economist</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_economist</span>() <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_economist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_wsj() - Estilo Wall Street Journal Basado en las gr√°ficas del Wall Street Journal, con un estilo m√°s period√≠stico y accesible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema estilo Wall Street Journal</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_wsj</span>() <span class="sc">+</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_wsj</span>(<span class="st">"colors6"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_excel() - Estilo Excel Recrea la est√©tica por defecto de Microsoft Excel. Puede ser √∫til para transicionar usuarios de Excel a R, o para mantener consistencia con gr√°ficos existentes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema estilo Excel (versi√≥n antigua)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_excel</span>() <span class="sc">+</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_excel</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>theme_fivethirtyeight() - Estilo FiveThirtyEight Inspirado en el sitio web de an√°lisis estad√≠stico FiveThirtyEight, conocido por sus visualizaciones atractivas y claras.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tema estilo FiveThirtyEight</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">theme_fivethirtyeight</span>() <span class="sc">+</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_fivethirtyeight</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>5.7.3 Personalizaci√≥n avanzada con theme() La funci√≥n theme() permite ajustar individualmente casi cualquier aspecto del tema. Podemos modificar elementos espec√≠ficos como textos, leyendas, ejes, fondos y m√°rgenes.</p>
<p>Si acced√©is a la ayuda para los temas (?theme), podr√©is modificar toooooodas estas opciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>?theme</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Modificar elementos de texto Podemos cambiar la fuente, tama√±o, color y estilo de todos los textos del gr√°fico: t√≠tulo, subt√≠tulo, etiquetas de ejes, texto de los ejes, leyenda, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Personalizaci√≥n completa de elementos de texto</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># T√≠tulo principal</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"serif"</span>,        <span class="co"># Fuente con serifas</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">16</span>,               <span class="co"># Tama√±o 16</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span>,           <span class="co"># Negrita</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="fl">0.5</span>,             <span class="co"># Centrado horizontal</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"darkblue"</span>       <span class="co"># Color azul oscuro</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subt√≠tulo</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"serif"</span>,</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="fl">0.5</span>,</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray40"</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Etiquetas de ejes</span></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"sans"</span>,         <span class="co"># Fuente sin serifas</span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Texto de los ejes (n√∫meros)</span></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"sans"</span>,</span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span>,</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"black"</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Texto de la leyenda</span></span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"sans"</span>,</span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">10</span>,</span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"italic"</span>          <span class="co"># Cursiva</span></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># T√≠tulo de la leyenda</span></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">family =</span> <span class="st">"sans"</span>,</span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">11</span>,</span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">face =</span> <span class="st">"bold"</span></span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Modificar elementos de la leyenda La leyenda puede reposicionarse, ajustarse su fondo, borde, espaciado y m√°s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Personalizaci√≥n de la leyenda</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Posici√≥n de la leyenda (opciones: "none", "left", "right", "bottom", "top")</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Direcci√≥n de la leyenda ("horizontal" o "vertical")</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Justificaci√≥n de la leyenda dentro de su √°rea</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.justification =</span> <span class="st">"center"</span>,</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fondo de la leyenda</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"gray95"</span>,        <span class="co"># Color de fondo</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray50"</span>,       <span class="co"># Color del borde</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="fl">0.5</span>         <span class="co"># Grosor del borde</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Espaciado alrededor de la leyenda</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">10</span>),  <span class="co"># m√°rgenes: arriba, derecha, abajo, izquierda</span></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Espaciado entre elementos de la leyenda</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tama√±o de los s√≠mbolos en la leyenda</span></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">1</span>, <span class="st">"cm"</span>),</span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fondo de los s√≠mbolos en la leyenda</span></span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(</span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">title.position =</span> <span class="st">"top"</span>,    <span class="co"># Posici√≥n del t√≠tulo</span></span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title.hjust =</span> <span class="fl">0.5</span>,         <span class="co"># Centrado horizontal del t√≠tulo</span></span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrow =</span> <span class="dv">1</span>                   <span class="co"># Una sola fila para los elementos</span></span>
<span id="cb70-37"><a href="#cb70-37" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Modificar elementos de los ejes Podemos personalizar las l√≠neas de los ejes, marcas de graduaci√≥n (ticks) y l√≠neas de cuadr√≠cula.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Personalizaci√≥n de ejes</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># L√≠neas de los ejes</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"darkred"</span>,      <span class="co"># Color de las l√≠neas de los ejes</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="dv">1</span>           <span class="co"># Grosor</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Marcas de graduaci√≥n (ticks) en los ejes</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"darkred"</span>,      <span class="co"># Color</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="dv">1</span>           <span class="co"># Grosor</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Longitud de las marcas de graduaci√≥n</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">"cm"</span>),</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># L√≠neas de cuadr√≠cula mayores (grid.major)</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray90"</span>,       <span class="co"># Color m√°s claro</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="fl">0.5</span>,        <span class="co"># Grosor</span></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">linetype =</span> <span class="st">"dashed"</span>     <span class="co"># L√≠nea discontinua</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># L√≠neas de cuadr√≠cula menores (grid.minor)</span></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray95"</span>,       <span class="co"># Color muy claro</span></span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="fl">0.25</span>        <span class="co"># Muy fino</span></span>
<span id="cb71-31"><a href="#cb71-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb71-32"><a href="#cb71-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-33"><a href="#cb71-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Eliminar l√≠neas de cuadr√≠cula verticales</span></span>
<span id="cb71-34"><a href="#cb71-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb71-35"><a href="#cb71-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb71-36"><a href="#cb71-36" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Modificar el fondo y m√°rgenes El √°rea del gr√°fico completa puede personalizarse, incluyendo fondos y m√°rgenes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Personalizaci√≥n de fondos y m√°rgenes</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fondo del √°rea del gr√°fico (donde est√°n los datos)</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"lightblue"</span>,     <span class="co"># Color de fondo</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"darkblue"</span>,     <span class="co"># Color del borde</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="fl">1.5</span>         <span class="co"># Grosor del borde</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fondo de toda la figura (incluye t√≠tulos, leyenda, etc.)</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(</span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"gray98"</span>,        <span class="co"># Color de fondo claro</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray50"</span>,       <span class="co"># Borde gris</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">linewidth =</span> <span class="dv">1</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># M√°rgenes del gr√°fico (arriba, derecha, abajo, izquierda)</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="at">unit =</span> <span class="st">"pt"</span>),</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fondo de la leyenda</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"gray50"</span></span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/themes-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="mapas-con-ggplot2-introducci√≥n-a-la-visualizaci√≥n-de-datos-espaciales." class="level1">
<h1>7. Mapas con ggplot2: Introducci√≥n a la visualizaci√≥n de datos espaciales.</h1>
<p>La representaci√≥n de mapas es una parte fundamental de muchas disciplinas cient√≠ficas, desde la ecolog√≠a y geograf√≠a hasta la salud p√∫blica y la sociolog√≠a. En R, podemos crear mapas de alta calidad utilizando ggplot2, siempre que transformemos los datos espaciales en un formato estructurado que ggplot pueda entender.</p>
<p>Existen dos tipos principales de datos espaciales: raster y vectorial. Los datos raster est√°n compuestos por una matriz de p√≠xeles (cada uno con un valor), mientras que los datos vectoriales est√°n compuestos por puntos, l√≠neas y pol√≠gonos.</p>
<section id="mapas-r√°ster" class="level2">
<h2 class="anchored" data-anchor-id="mapas-r√°ster">7.1 Mapas r√°ster</h2>
<p>Los mapas r√°ster son √∫tiles para representar datos continuos sobre una superficie, como temperatura, elevaci√≥n, o densidad de poblaci√≥n. Cada celda en el raster tiene un valor num√©rico que representa la variable de inter√©s.</p>
<p>Preparaci√≥n del entorno: Cargar y visualizar datos raster b√°sicos.</p>
<p>Vamos a utilizar paquetes que son est√°ndar y ampliamente disponibles. Si no los tienes instalados, puedes instalarlos con install.packages().</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar las librer√≠as necesarias</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)    <span class="co"># Para datos raster</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)  <span class="co"># Para paletas de colores</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Comenzaremos con un ejemplo simple usando datos de elevaci√≥n incluidos en el paquete terra. Estos datos representan la topograf√≠a de una regi√≥n espec√≠fica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos de ejemplo de elevaci√≥n</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co"># system.file() busca el archivo dentro del paquete instalado</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="fu">system.file</span>(<span class="st">"ex/elev.tif"</span>, <span class="at">package =</span> <span class="st">"terra"</span>))</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Examinar la estructura del objeto raster</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class       : SpatRaster 
dimensions  : 90, 95, 1  (nrow, ncol, nlyr)
resolution  : 0.008333333, 0.008333333  (x, y)
extent      : 5.741667, 6.533333, 49.44167, 50.19167  (xmin, xmax, ymin, ymax)
coord. ref. : lon/lat WGS 84 (EPSG:4326) 
source      : elev.tif 
name        : elevation 
min value   :       141 
max value   :       547 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Informaci√≥n b√°sica sobre el raster</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Resoluci√≥n (tama√±o de celda):"</span>, <span class="fu">res</span>(r), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Resoluci√≥n (tama√±o de celda): 0.008333333 0.008333333 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Extensi√≥n (l√≠mites):</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Extensi√≥n (l√≠mites):</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">ext</span>(r))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SpatExtent : 5.74166666666667, 6.53333333333333, 49.4416666666667, 50.1916666666667 (xmin, xmax, ymin, ymax)</code></pre>
</div>
</div>
<p>##Transformar datos raster para ggplot2 Para usar datos raster en ggplot2, necesitamos convertirlos a un formato tabular (data.frame) que contenga las coordenadas (x, y) y los valores de cada celda.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir raster a data.frame para ggplot</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># xy = TRUE incluye las coordenadas, na.rm = TRUE elimina celdas sin valor</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>r_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(r, <span class="at">xy =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examinar la estructura de los datos transformados</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(r_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           x        y elevation
127 6.004167 50.17917       529
128 6.012500 50.17917       542
129 6.020833 50.17917       547
130 6.029167 50.17917       535
218 5.970833 50.17083       485
219 5.979167 50.17083       497</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(r_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   4608 obs. of  3 variables:
 $ x        : num  6 6.01 6.02 6.03 5.97 ...
 $ y        : num  50.2 50.2 50.2 50.2 50.2 ...
 $ elevation: int  529 542 547 535 485 497 515 515 515 518 ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar el nombre de la columna para mayor claridad</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"elevacion"</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(r_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           x        y elevacion
127 6.004167 50.17917       529
128 6.012500 50.17917       542
129 6.020833 50.17917       547
130 6.029167 50.17917       535
218 5.970833 50.17083       485
219 5.979167 50.17083       497</code></pre>
</div>
</div>
<p>##Crear un mapa raster con ggplot2 Ahora que tenemos los datos en formato tabular, podemos crear un mapa usando <code>geom_raster()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa b√°sico con ggplot</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> r_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevacion)) <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mapa de elevaci√≥n usando ggplot2"</span>,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud"</span>, </span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Latitud"</span>,</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Elevaci√≥n (m)"</span>) <span class="sc">+</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/raster-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mejorar-la-visualizaci√≥n-del-mapa-raster" class="level2">
<h2 class="anchored" data-anchor-id="mejorar-la-visualizaci√≥n-del-mapa-raster">Mejorar la visualizaci√≥n del mapa raster</h2>
<p>Podemos mejorar nuestro mapa ajustando la paleta de colores, a√±adiendo contornos y mejorando la leyenda.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa mejorado con paleta de colores secuencial</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> r_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevacion)) <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># A√±adir curvas de nivel para mejorar la lectura</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_contour</span>(<span class="at">data =</span> r_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">z =</span> elevacion), </span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"gray30"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">linewidth =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Usar una paleta de colores secuencial (viridis)</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ajustar coordenadas para mantener proporciones</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mapa topogr√°fico mejorado"</span>,</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Datos de elevaci√≥n con curvas de nivel"</span>,</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud"</span>, </span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Latitud"</span>,</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Altitud (m)"</span>) <span class="sc">+</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"cm"</span>)</span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/raster-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mapas-vectoriales" class="level2">
<h2 class="anchored" data-anchor-id="mapas-vectoriales">7.2 Mapas vectoriales</h2>
<p>Los mapas vectoriales son ideales para representar l√≠mites administrativos, r√≠os, carreteras y otros elementos lineales o poligonales. En ggplot2, la funci√≥n principal para trabajar con datos vectoriales es <code>geom_sf()</code>.</p>
</section>
<section id="trabajar-con-datos-vectoriales-simples" class="level2">
<h2 class="anchored" data-anchor-id="trabajar-con-datos-vectoriales-simples">Trabajar con datos vectoriales simples</h2>
<p>Comenzaremos con datos vectoriales b√°sicos usando el paquete terra, que incluye conjuntos de datos espaciales de ejemplo.</p>
<section id="cargar-datos-vectoriales-de-ejemplo" class="level3">
<h3 class="anchored" data-anchor-id="cargar-datos-vectoriales-de-ejemplo">Cargar datos vectoriales de ejemplo</h3>
<p>Vamos a cargar datos de l√≠mites administrativos de un pa√≠s de ejemplo que viene incluido con el paquete <em>terra</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar librer√≠a para datos vectoriales</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sf es el est√°ndar para datos vectoriales en R</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar datos vectoriales de ejemplo (Luxemburgo)</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co"># system.file() busca el archivo shapefile dentro del paquete</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>lux_vector <span class="ot">&lt;-</span> <span class="fu">vect</span>(<span class="fu">system.file</span>(<span class="st">"ex/lux.shp"</span>, <span class="at">package =</span> <span class="st">"terra"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir a formato sf (simple features) para usar con ggplot2</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>lux_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(lux_vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examinar la estructura de los datos</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lux_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 12 features and 6 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 5.74414 ymin: 49.44781 xmax: 6.528252 ymax: 50.18162
Geodetic CRS:  WGS 84
First 10 features:
   ID_1       NAME_1 ID_2           NAME_2 AREA    POP
1     1     Diekirch    1         Clervaux  312  18081
2     1     Diekirch    2         Diekirch  218  32543
3     1     Diekirch    3          Redange  259  18664
4     1     Diekirch    4          Vianden   76   5163
5     1     Diekirch    5            Wiltz  263  16735
6     2 Grevenmacher    6       Echternach  188  18899
7     2 Grevenmacher    7           Remich  129  22366
8     2 Grevenmacher   12     Grevenmacher  210  29828
9     3   Luxembourg    8         Capellen  185  48187
10    3   Luxembourg    9 Esch-sur-Alzette  251 176820
                         geometry
1  POLYGON ((6.026519 50.17767...
2  POLYGON ((6.178368 49.87682...
3  POLYGON ((5.881378 49.87015...
4  POLYGON ((6.131309 49.97256...
5  POLYGON ((5.977929 50.02602...
6  POLYGON ((6.385532 49.83703...
7  POLYGON ((6.316665 49.62337...
8  POLYGON ((6.425158 49.73164...
9  POLYGON ((5.998312 49.69992...
10 POLYGON ((6.039474 49.44826...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lux_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 6 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 5.74414 ymin: 49.69933 xmax: 6.528252 ymax: 50.18162
Geodetic CRS:  WGS 84
  ID_1       NAME_1 ID_2     NAME_2 AREA   POP                       geometry
1    1     Diekirch    1   Clervaux  312 18081 POLYGON ((6.026519 50.17767...
2    1     Diekirch    2   Diekirch  218 32543 POLYGON ((6.178368 49.87682...
3    1     Diekirch    3    Redange  259 18664 POLYGON ((5.881378 49.87015...
4    1     Diekirch    4    Vianden   76  5163 POLYGON ((6.131309 49.97256...
5    1     Diekirch    5      Wiltz  263 16735 POLYGON ((5.977929 50.02602...
6    2 Grevenmacher    6 Echternach  188 18899 POLYGON ((6.385532 49.83703...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Informaci√≥n sobre las columnas disponibles</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Columnas disponibles:</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Columnas disponibles:</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">names</span>(lux_sf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ID_1"     "NAME_1"   "ID_2"     "NAME_2"   "AREA"     "POP"      "geometry"</code></pre>
</div>
</div>
</section>
</section>
<section id="crear-un-mapa-vectorial-con-geom_sf" class="level2">
<h2 class="anchored" data-anchor-id="crear-un-mapa-vectorial-con-geom_sf">Crear un mapa vectorial con <code>geom_sf()</code></h2>
<p>La funci√≥n <code>geom_sf()</code> simplifica enormemente la creaci√≥n de mapas vectoriales, ya que autom√°ticamente maneja la geometr√≠a y el sistema de coordenadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa b√°sico de Luxemburgo</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> lux_sf) <span class="sc">+</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mapa b√°sico de Luxemburgo"</span>,</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Distritos administrativos"</span>) <span class="sc">+</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/vectorial-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>##A√±adir informaci√≥n tem√°tica al mapa Podemos usar variables de los datos para colorear los pol√≠gonos y crear mapas tem√°ticos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa tem√°tico: √Årea de cada distrito</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> lux_sf) <span class="sc">+</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> AREA)) <span class="sc">+</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Usar una paleta de colores secuencial</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"viridis"</span>,</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"gray90"</span>,</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"√Årea (km¬≤)"</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"√Årea de los distritos de Luxemburgo"</span>,</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Mapa tem√°tico por tama√±o geogr√°fico"</span>,</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Fuente: Datos de ejemplo de terra"</span>) <span class="sc">+</span></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/vectorial-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="personalizar-colores-para-variables-categ√≥ricas" class="level2">
<h2 class="anchored" data-anchor-id="personalizar-colores-para-variables-categ√≥ricas">Personalizar colores para variables categ√≥ricas</h2>
<p>Cuando trabajamos con variables categ√≥ricas (como nombres de regiones), podemos usar paletas de colores cualitativas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa con colores por nombre de distrito (variable categ√≥rica)</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> lux_sf) <span class="sc">+</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> NAME_2), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">linewidth =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Usar una paleta de colores cualitativa</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>, <span class="at">name =</span> <span class="st">"Distrito"</span>) <span class="sc">+</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distritos de Luxemburgo"</span>,</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Coloreados por nombre de distrito"</span>,</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud"</span>,</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Latitud"</span>) <span class="sc">+</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/vectorial-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="combinar-datos-raster-y-vectoriales" class="level2">
<h2 class="anchored" data-anchor-id="combinar-datos-raster-y-vectoriales">7.3 Combinar datos raster y vectoriales</h2>
<p>Una de las ventajas de <strong>ggplot2</strong> es la capacidad de combinar m√∫ltiples capas de datos. Podemos superponer datos vectoriales sobre un mapa raster.</p>
<section id="para-este-ejemplo-vamos-a-crear-un-raster-simple-y-superponer-los-datos-vectoriales" class="level3">
<h3 class="anchored" data-anchor-id="para-este-ejemplo-vamos-a-crear-un-raster-simple-y-superponer-los-datos-vectoriales">Para este ejemplo, vamos a crear un raster simple y superponer los datos vectoriales</h3>
</section>
<section id="primero-crear-un-raster-de-ejemplo-con-la-misma-extensi√≥n-que-luxemburgo" class="level3">
<h3 class="anchored" data-anchor-id="primero-crear-un-raster-de-ejemplo-con-la-misma-extensi√≥n-que-luxemburgo">Primero, crear un raster de ejemplo con la misma extensi√≥n que Luxemburgo</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener la extensi√≥n de Luxemburgo</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>lux_bbox <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(lux_sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un raster simple con valores aleatorios para la regi√≥n</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>raster_lux <span class="ot">&lt;-</span> <span class="fu">rast</span>(</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">extent =</span> <span class="fu">c</span>(lux_bbox[<span class="st">"xmin"</span>], lux_bbox[<span class="st">"xmax"</span>], </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>             lux_bbox[<span class="st">"ymin"</span>], lux_bbox[<span class="st">"ymax"</span>]),</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">resolution =</span> <span class="fl">0.01</span>,  <span class="co"># Resoluci√≥n de 0.01 grados</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vals =</span> <span class="fu">runif</span>(<span class="dv">100</span> <span class="sc">*</span> <span class="dv">100</span>)  <span class="co"># 100x100 celdas con valores aleatorios</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir a data.frame para ggplot</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>raster_lux_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(raster_lux, <span class="at">xy =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(raster_lux_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"valor"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear mapa combinado</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Capa base: raster</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> raster_lux_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> valor), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"magma"</span>, <span class="at">name =</span> <span class="st">"Valor raster"</span>) <span class="sc">+</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Capa superior: l√≠mites vectoriales</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> lux_sf, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># A√±adir etiquetas de distritos</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="at">data =</span> lux_sf, <span class="fu">aes</span>(<span class="at">label =</span> NAME_2), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mapa combinado raster-vectorial"</span>,</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Raster aleatorio con l√≠mites administrativos de Luxemburgo"</span>,</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud"</span>,</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Latitud"</span>) <span class="sc">+</span></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/vectorial-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="proyecciones-y-sistemas-de-coordenadas" class="level2">
<h2 class="anchored" data-anchor-id="proyecciones-y-sistemas-de-coordenadas">7.4 Proyecciones y sistemas de coordenadas</h2>
<p>Los mapas utilizan diferentes proyecciones para representar la superficie curva de la Tierra en un plano. Es importante entender y especificar la proyecci√≥n correcta para cada mapa.</p>
<p>Trabajar con diferentes proyecciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapa de Luxemburgo con diferentes proyecciones</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Proyecci√≥n original (WGS84 - coordenadas geogr√°ficas)</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> lux_sf) <span class="sc">+</span> <span class="co">#Por defecto tendremos el crs = WGS84</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">+</span>  <span class="co"># WGS84 (c√≥digo EPSG)</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"WGS84 (coordenadas geogr√°ficas)"</span>) <span class="sc">+</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proyecciones-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Proyecci√≥n UTM para la zona de Luxemburgo</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>lux_utm <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(lux_sf, <span class="at">crs =</span> <span class="dv">32631</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> lux_utm) <span class="sc">+</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"UTM Zona 31N"</span>,</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Unidades: metros</span><span class="sc">\n</span><span class="st">Eje X: Este (Easting), Eje Y: Norte (Northing)"</span>) <span class="sc">+</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proyecciones-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las dos proyecciones</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Comparaci√≥n de proyecciones cartogr√°ficas"</span>,</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"La misma regi√≥n con diferentes sistemas de coordenadas"</span>,</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"La proyecci√≥n UTM minimiza la distorsi√≥n para esta zona"</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proyecciones-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ejercicios-pr√°cticos" class="level2">
<h2 class="anchored" data-anchor-id="ejercicios-pr√°cticos">7.5 Ejercicios pr√°cticos</h2>
<section id="ejercicio-1-mapa-tem√°tico-de-poblaci√≥n" class="level3">
<h3 class="anchored" data-anchor-id="ejercicio-1-mapa-tem√°tico-de-poblaci√≥n">Ejercicio 1: Mapa tem√°tico de poblaci√≥n</h3>
<p>Utilizando los datos de Luxemburgo (lux_sf), crea un mapa que muestre la poblaci√≥n (POP) de cada distrito. Personaliza los colores, a√±ade una leyenda clara y etiquetas con los nombres de los distritos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tu c√≥digo aqu√≠ para el ejercicio 1:</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Crea un mapa con geom_sf() usando fill = POP</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Personaliza la paleta de colores con scale_fill_viridis_c()</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. A√±ade etiquetas con geom_sf_text() o geom_sf_label()</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Ajusta el tema y los t√≠tulos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Soluci√≥n del ejercicio 1:</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> lux_sf) <span class="sc">+</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> POP), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">linewidth =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> NAME_2), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">option =</span> <span class="st">"inferno"</span>,</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Poblaci√≥n"</span>,</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>()</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Poblaci√≥n por distrito en Luxemburgo"</span>,</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Datos censales"</span>,</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Longitud"</span>,</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Latitud"</span>) <span class="sc">+</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"right"</span></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proyecciones-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>###Ejercicio 2: Mapa raster personalizado Crea un raster simple (sin l√≠mites ni otros elementos de mapas) que represente un gradiente de este a oeste (valores que aumentan de izquierda a derecha) y de norte a sur (valores que aumentan de arriba a abajo). Comb√≠nalos para crear un patr√≥n de sombreado y visual√≠zalo con ggplot2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tu c√≥digo aqu√≠ para el ejercicio 2:</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Crea una secuencia de coordenadas x e y</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Calcula valores basados en las coordenadas (p.ej., x * y)</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Crea un data.frame con x, y y valor</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Visualiza con geom_raster()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Soluci√≥n del ejercicio 2:</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear coordenadas</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>x_coords <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>y_coords <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear matriz de valores (producto de coordenadas)</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">outer</span>(x_coords, y_coords, <span class="cf">function</span>(x, y) x <span class="sc">*</span> y)</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear data.frame</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>raster_df <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">x =</span> x_coords, <span class="at">y =</span> y_coords)</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>raster_df<span class="sc">$</span>valor <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(valores)</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar</span></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(raster_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> valor)) <span class="sc">+</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>() <span class="sc">+</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"turbo"</span>, <span class="at">name =</span> <span class="st">"Valor"</span>) <span class="sc">+</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Raster artificial: gradiente X*Y"</span>,</span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Coordenada X"</span>,</span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Coordenada Y"</span>) <span class="sc">+</span></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="dia_3_visualizacion_ggplot_files/figure-html/proyecciones-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ejercicio 3: Mapa de localizaciones puntuales Crea un mapa que muestre puntos de inter√©s en Luxemburgo. Puedes generar coordenadas aleatorias dentro de la extensi√≥n del pa√≠s y visualizarlas sobre el mapa vectorial.</p>
</section>
</section>
<section id="consejos-y-mejores-pr√°cticas" class="level2">
<h2 class="anchored" data-anchor-id="consejos-y-mejores-pr√°cticas">7.6 Consejos y mejores pr√°cticas</h2>
</section>
<section id="elecci√≥n-de-colores" class="level2">
<h2 class="anchored" data-anchor-id="elecci√≥n-de-colores">Elecci√≥n de colores:</h2>
<ul>
<li><p>Para datos secuenciales (como elevaci√≥n o temperatura), usa paletas secuenciales (viridis, magma, plasma).</p></li>
<li><p>Para datos categ√≥ricos (como tipos de suelo o regiones), usa paletas cualitativas (Set3, Accent, Dark2).</p></li>
</ul>
</section>
<section id="sistemas-de-coordenadas" class="level2">
<h2 class="anchored" data-anchor-id="sistemas-de-coordenadas">Sistemas de coordenadas:</h2>
<ul>
<li><p>Siempre verifica el CRS (Sistema de Referencia de Coordenadas) de tus datos.</p></li>
<li><p>Para datos vectoriales: st_crs(objeto_sf)</p></li>
<li><p>Para datos raster: crs(objeto_raster)</p></li>
</ul>
</section>
<section id="rendimiento" class="level2">
<h2 class="anchored" data-anchor-id="rendimiento">Rendimiento:</h2>
<ul>
<li><p>Para mapas muy detallados con muchos pol√≠gonos, considera simplificar la geometr√≠a.</p></li>
<li><p>Para r√°steres muy grandes, considera reducir la resoluci√≥n o usar submuestreo.</p></li>
</ul>
</section>
<section id="leyendas" class="level2">
<h2 class="anchored" data-anchor-id="leyendas">Leyendas:</h2>
<ul>
<li><p>Aseg√∫rate de que las leyendas sean claras e informativas.</p></li>
<li><p>Incluye unidades cuando sea apropiado.</p></li>
<li><p>Considera la posici√≥n de la leyenda (derecha, izquierda, abajo) seg√∫n el espacio disponible.</p></li>
</ul>
</section>
<section id="reproducibilidad" class="level2">
<h2 class="anchored" data-anchor-id="reproducibilidad">Reproducibilidad:</h2>
<ul>
<li><p>Siempre establece una semilla (set.seed()) cuando generes datos aleatorios.</p></li>
<li><p>Documenta las fuentes de tus datos espaciales.</p></li>
<li><p>Especifica las versiones de los paquetes utilizados.</p></li>
</ul>
<section id="fin-d√≠a-3-visualizaci√≥n" class="level3">
<h3 class="anchored" data-anchor-id="fin-d√≠a-3-visualizaci√≥n">Fin ‚Äî D√≠a 3: Visualizaci√≥n</h3>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>